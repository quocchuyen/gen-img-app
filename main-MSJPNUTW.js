var YC=Object.create;var rc=Object.defineProperty,ZC=Object.defineProperties,KC=Object.getOwnPropertyDescriptor,QC=Object.getOwnPropertyDescriptors,XC=Object.getOwnPropertyNames,Xh=Object.getOwnPropertySymbols,eI=Object.getPrototypeOf,tg=Object.prototype.hasOwnProperty,tI=Object.prototype.propertyIsEnumerable;var eg=(e,t,n)=>t in e?rc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,X=(e,t)=>{for(var n in t||={})tg.call(t,n)&&eg(e,n,t[n]);if(Xh)for(var n of Xh(t))tI.call(t,n)&&eg(e,n,t[n]);return e},ke=(e,t)=>ZC(e,QC(t));var li=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,n)=>(typeof require<"u"?require:t)[n]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});var ng=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var nI=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of XC(t))!tg.call(e,o)&&o!==n&&rc(e,o,{get:()=>t[o],enumerable:!(r=KC(t,o))||r.enumerable});return e};var rg=(e,t,n)=>(n=e!=null?YC(eI(e)):{},nI(t||!e||!e.__esModule?rc(n,"default",{value:e,enumerable:!0}):n,e));var P_=ng((x_,Bp)=>{"use strict";(function(e){typeof x_=="object"&&typeof Bp<"u"?Bp.exports=e():typeof define=="function"&&define.amd?define([],e):(typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this).JSZip=e()})(function(){return(function e(t,n,r){function o(a,l){if(!n[a]){if(!t[a]){var c=typeof li=="function"&&li;if(!l&&c)return c(a,!0);if(i)return i(a,!0);var f=new Error("Cannot find module '"+a+"'");throw f.code="MODULE_NOT_FOUND",f}var p=n[a]={exports:{}};t[a][0].call(p.exports,function(h){var g=t[a][1][h];return o(g||h)},p,p.exports,e,t,n,r)}return n[a].exports}for(var i=typeof li=="function"&&li,s=0;s<r.length;s++)o(r[s]);return o})({1:[function(e,t,n){"use strict";var r=e("./utils"),o=e("./support"),i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.encode=function(s){for(var a,l,c,f,p,h,g,m=[],y=0,E=s.length,C=E,T=r.getTypeOf(s)!=="string";y<s.length;)C=E-y,c=T?(a=s[y++],l=y<E?s[y++]:0,y<E?s[y++]:0):(a=s.charCodeAt(y++),l=y<E?s.charCodeAt(y++):0,y<E?s.charCodeAt(y++):0),f=a>>2,p=(3&a)<<4|l>>4,h=1<C?(15&l)<<2|c>>6:64,g=2<C?63&c:64,m.push(i.charAt(f)+i.charAt(p)+i.charAt(h)+i.charAt(g));return m.join("")},n.decode=function(s){var a,l,c,f,p,h,g=0,m=0,y="data:";if(s.substr(0,y.length)===y)throw new Error("Invalid base64 input, it looks like a data url.");var E,C=3*(s=s.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(s.charAt(s.length-1)===i.charAt(64)&&C--,s.charAt(s.length-2)===i.charAt(64)&&C--,C%1!=0)throw new Error("Invalid base64 input, bad content length.");for(E=o.uint8array?new Uint8Array(0|C):new Array(0|C);g<s.length;)a=i.indexOf(s.charAt(g++))<<2|(f=i.indexOf(s.charAt(g++)))>>4,l=(15&f)<<4|(p=i.indexOf(s.charAt(g++)))>>2,c=(3&p)<<6|(h=i.indexOf(s.charAt(g++))),E[m++]=a,p!==64&&(E[m++]=l),h!==64&&(E[m++]=c);return E}},{"./support":30,"./utils":32}],2:[function(e,t,n){"use strict";var r=e("./external"),o=e("./stream/DataWorker"),i=e("./stream/Crc32Probe"),s=e("./stream/DataLengthProbe");function a(l,c,f,p,h){this.compressedSize=l,this.uncompressedSize=c,this.crc32=f,this.compression=p,this.compressedContent=h}a.prototype={getContentWorker:function(){var l=new o(r.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new s("data_length")),c=this;return l.on("end",function(){if(this.streamInfo.data_length!==c.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),l},getCompressedWorker:function(){return new o(r.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},a.createWorkerFrom=function(l,c,f){return l.pipe(new i).pipe(new s("uncompressedSize")).pipe(c.compressWorker(f)).pipe(new s("compressedSize")).withStreamInfo("compression",c)},t.exports=a},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,t,n){"use strict";var r=e("./stream/GenericWorker");n.STORE={magic:"\0\0",compressWorker:function(){return new r("STORE compression")},uncompressWorker:function(){return new r("STORE decompression")}},n.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,t,n){"use strict";var r=e("./utils"),o=(function(){for(var i,s=[],a=0;a<256;a++){i=a;for(var l=0;l<8;l++)i=1&i?3988292384^i>>>1:i>>>1;s[a]=i}return s})();t.exports=function(i,s){return i!==void 0&&i.length?r.getTypeOf(i)!=="string"?(function(a,l,c,f){var p=o,h=f+c;a^=-1;for(var g=f;g<h;g++)a=a>>>8^p[255&(a^l[g])];return-1^a})(0|s,i,i.length,0):(function(a,l,c,f){var p=o,h=f+c;a^=-1;for(var g=f;g<h;g++)a=a>>>8^p[255&(a^l.charCodeAt(g))];return-1^a})(0|s,i,i.length,0):0}},{"./utils":32}],5:[function(e,t,n){"use strict";n.base64=!1,n.binary=!1,n.dir=!1,n.createFolders=!0,n.date=null,n.compression=null,n.compressionOptions=null,n.comment=null,n.unixPermissions=null,n.dosPermissions=null},{}],6:[function(e,t,n){"use strict";var r=null;r=typeof Promise<"u"?Promise:e("lie"),t.exports={Promise:r}},{lie:37}],7:[function(e,t,n){"use strict";var r=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=e("pako"),i=e("./utils"),s=e("./stream/GenericWorker"),a=r?"uint8array":"array";function l(c,f){s.call(this,"FlateWorker/"+c),this._pako=null,this._pakoAction=c,this._pakoOptions=f,this.meta={}}n.magic="\b\0",i.inherits(l,s),l.prototype.processChunk=function(c){this.meta=c.meta,this._pako===null&&this._createPako(),this._pako.push(i.transformTo(a,c.data),!1)},l.prototype.flush=function(){s.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},l.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this._pako=null},l.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var c=this;this._pako.onData=function(f){c.push({data:f,meta:c.meta})}},n.compressWorker=function(c){return new l("Deflate",c)},n.uncompressWorker=function(){return new l("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,t,n){"use strict";function r(p,h){var g,m="";for(g=0;g<h;g++)m+=String.fromCharCode(255&p),p>>>=8;return m}function o(p,h,g,m,y,E){var C,T,D=p.file,A=p.compression,b=E!==a.utf8encode,O=i.transformTo("string",E(D.name)),R=i.transformTo("string",a.utf8encode(D.name)),B=D.comment,G=i.transformTo("string",E(B)),S=i.transformTo("string",a.utf8encode(B)),k=R.length!==D.name.length,_=S.length!==B.length,L="",ee="",H="",ge=D.dir,q=D.date,ne={crc32:0,compressedSize:0,uncompressedSize:0};h&&!g||(ne.crc32=p.crc32,ne.compressedSize=p.compressedSize,ne.uncompressedSize=p.uncompressedSize);var P=0;h&&(P|=8),b||!k&&!_||(P|=2048);var x=0,le=0;ge&&(x|=16),y==="UNIX"?(le=798,x|=(function(J,Be){var lt=J;return J||(lt=Be?16893:33204),(65535&lt)<<16})(D.unixPermissions,ge)):(le=20,x|=(function(J){return 63&(J||0)})(D.dosPermissions)),C=q.getUTCHours(),C<<=6,C|=q.getUTCMinutes(),C<<=5,C|=q.getUTCSeconds()/2,T=q.getUTCFullYear()-1980,T<<=4,T|=q.getUTCMonth()+1,T<<=5,T|=q.getUTCDate(),k&&(ee=r(1,1)+r(l(O),4)+R,L+="up"+r(ee.length,2)+ee),_&&(H=r(1,1)+r(l(G),4)+S,L+="uc"+r(H.length,2)+H);var K="";return K+=`
\0`,K+=r(P,2),K+=A.magic,K+=r(C,2),K+=r(T,2),K+=r(ne.crc32,4),K+=r(ne.compressedSize,4),K+=r(ne.uncompressedSize,4),K+=r(O.length,2),K+=r(L.length,2),{fileRecord:c.LOCAL_FILE_HEADER+K+O+L,dirRecord:c.CENTRAL_FILE_HEADER+r(le,2)+K+r(G.length,2)+"\0\0\0\0"+r(x,4)+r(m,4)+O+L+G}}var i=e("../utils"),s=e("../stream/GenericWorker"),a=e("../utf8"),l=e("../crc32"),c=e("../signature");function f(p,h,g,m){s.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=h,this.zipPlatform=g,this.encodeFileName=m,this.streamFiles=p,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}i.inherits(f,s),f.prototype.push=function(p){var h=p.meta.percent||0,g=this.entriesCount,m=this._sources.length;this.accumulate?this.contentBuffer.push(p):(this.bytesWritten+=p.data.length,s.prototype.push.call(this,{data:p.data,meta:{currentFile:this.currentFile,percent:g?(h+100*(g-m-1))/g:100}}))},f.prototype.openedSource=function(p){this.currentSourceOffset=this.bytesWritten,this.currentFile=p.file.name;var h=this.streamFiles&&!p.file.dir;if(h){var g=o(p,h,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:g.fileRecord,meta:{percent:0}})}else this.accumulate=!0},f.prototype.closedSource=function(p){this.accumulate=!1;var h=this.streamFiles&&!p.file.dir,g=o(p,h,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(g.dirRecord),h)this.push({data:(function(m){return c.DATA_DESCRIPTOR+r(m.crc32,4)+r(m.compressedSize,4)+r(m.uncompressedSize,4)})(p),meta:{percent:100}});else for(this.push({data:g.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},f.prototype.flush=function(){for(var p=this.bytesWritten,h=0;h<this.dirRecords.length;h++)this.push({data:this.dirRecords[h],meta:{percent:100}});var g=this.bytesWritten-p,m=(function(y,E,C,T,D){var A=i.transformTo("string",D(T));return c.CENTRAL_DIRECTORY_END+"\0\0\0\0"+r(y,2)+r(y,2)+r(E,4)+r(C,4)+r(A.length,2)+A})(this.dirRecords.length,g,p,this.zipComment,this.encodeFileName);this.push({data:m,meta:{percent:100}})},f.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},f.prototype.registerPrevious=function(p){this._sources.push(p);var h=this;return p.on("data",function(g){h.processChunk(g)}),p.on("end",function(){h.closedSource(h.previous.streamInfo),h._sources.length?h.prepareNextSource():h.end()}),p.on("error",function(g){h.error(g)}),this},f.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},f.prototype.error=function(p){var h=this._sources;if(!s.prototype.error.call(this,p))return!1;for(var g=0;g<h.length;g++)try{h[g].error(p)}catch{}return!0},f.prototype.lock=function(){s.prototype.lock.call(this);for(var p=this._sources,h=0;h<p.length;h++)p[h].lock()},t.exports=f},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,t,n){"use strict";var r=e("../compressions"),o=e("./ZipFileWorker");n.generateWorker=function(i,s,a){var l=new o(s.streamFiles,a,s.platform,s.encodeFileName),c=0;try{i.forEach(function(f,p){c++;var h=(function(E,C){var T=E||C,D=r[T];if(!D)throw new Error(T+" is not a valid compression method !");return D})(p.options.compression,s.compression),g=p.options.compressionOptions||s.compressionOptions||{},m=p.dir,y=p.date;p._compressWorker(h,g).withStreamInfo("file",{name:f,dir:m,date:y,comment:p.comment||"",unixPermissions:p.unixPermissions,dosPermissions:p.dosPermissions}).pipe(l)}),l.entriesCount=c}catch(f){l.error(f)}return l}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,t,n){"use strict";function r(){if(!(this instanceof r))return new r;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new r;for(var i in this)typeof this[i]!="function"&&(o[i]=this[i]);return o}}(r.prototype=e("./object")).loadAsync=e("./load"),r.support=e("./support"),r.defaults=e("./defaults"),r.version="3.10.1",r.loadAsync=function(o,i){return new r().loadAsync(o,i)},r.external=e("./external"),t.exports=r},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,t,n){"use strict";var r=e("./utils"),o=e("./external"),i=e("./utf8"),s=e("./zipEntries"),a=e("./stream/Crc32Probe"),l=e("./nodejsUtils");function c(f){return new o.Promise(function(p,h){var g=f.decompressed.getContentWorker().pipe(new a);g.on("error",function(m){h(m)}).on("end",function(){g.streamInfo.crc32!==f.decompressed.crc32?h(new Error("Corrupted zip : CRC32 mismatch")):p()}).resume()})}t.exports=function(f,p){var h=this;return p=r.extend(p||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:i.utf8decode}),l.isNode&&l.isStream(f)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):r.prepareContent("the loaded zip file",f,!0,p.optimizedBinaryString,p.base64).then(function(g){var m=new s(p);return m.load(g),m}).then(function(g){var m=[o.Promise.resolve(g)],y=g.files;if(p.checkCRC32)for(var E=0;E<y.length;E++)m.push(c(y[E]));return o.Promise.all(m)}).then(function(g){for(var m=g.shift(),y=m.files,E=0;E<y.length;E++){var C=y[E],T=C.fileNameStr,D=r.resolve(C.fileNameStr);h.file(D,C.decompressed,{binary:!0,optimizedBinaryString:!0,date:C.date,dir:C.dir,comment:C.fileCommentStr.length?C.fileCommentStr:null,unixPermissions:C.unixPermissions,dosPermissions:C.dosPermissions,createFolders:p.createFolders}),C.dir||(h.file(D).unsafeOriginalName=T)}return m.zipComment.length&&(h.comment=m.zipComment),h})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,t,n){"use strict";var r=e("../utils"),o=e("../stream/GenericWorker");function i(s,a){o.call(this,"Nodejs stream input adapter for "+s),this._upstreamEnded=!1,this._bindStream(a)}r.inherits(i,o),i.prototype._bindStream=function(s){var a=this;(this._stream=s).pause(),s.on("data",function(l){a.push({data:l,meta:{percent:0}})}).on("error",function(l){a.isPaused?this.generatedError=l:a.error(l)}).on("end",function(){a.isPaused?a._upstreamEnded=!0:a.end()})},i.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},i.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},t.exports=i},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,t,n){"use strict";var r=e("readable-stream").Readable;function o(i,s,a){r.call(this,s),this._helper=i;var l=this;i.on("data",function(c,f){l.push(c)||l._helper.pause(),a&&a(f)}).on("error",function(c){l.emit("error",c)}).on("end",function(){l.push(null)})}e("../utils").inherits(o,r),o.prototype._read=function(){this._helper.resume()},t.exports=o},{"../utils":32,"readable-stream":16}],14:[function(e,t,n){"use strict";t.exports={isNode:typeof Buffer<"u",newBufferFrom:function(r,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(r,o);if(typeof r=="number")throw new Error('The "data" argument must not be a number');return new Buffer(r,o)},allocBuffer:function(r){if(Buffer.alloc)return Buffer.alloc(r);var o=new Buffer(r);return o.fill(0),o},isBuffer:function(r){return Buffer.isBuffer(r)},isStream:function(r){return r&&typeof r.on=="function"&&typeof r.pause=="function"&&typeof r.resume=="function"}}},{}],15:[function(e,t,n){"use strict";function r(D,A,b){var O,R=i.getTypeOf(A),B=i.extend(b||{},l);B.date=B.date||new Date,B.compression!==null&&(B.compression=B.compression.toUpperCase()),typeof B.unixPermissions=="string"&&(B.unixPermissions=parseInt(B.unixPermissions,8)),B.unixPermissions&&16384&B.unixPermissions&&(B.dir=!0),B.dosPermissions&&16&B.dosPermissions&&(B.dir=!0),B.dir&&(D=y(D)),B.createFolders&&(O=m(D))&&E.call(this,O,!0);var G=R==="string"&&B.binary===!1&&B.base64===!1;b&&b.binary!==void 0||(B.binary=!G),(A instanceof c&&A.uncompressedSize===0||B.dir||!A||A.length===0)&&(B.base64=!1,B.binary=!0,A="",B.compression="STORE",R="string");var S=null;S=A instanceof c||A instanceof s?A:h.isNode&&h.isStream(A)?new g(D,A):i.prepareContent(D,A,B.binary,B.optimizedBinaryString,B.base64);var k=new f(D,S,B);this.files[D]=k}var o=e("./utf8"),i=e("./utils"),s=e("./stream/GenericWorker"),a=e("./stream/StreamHelper"),l=e("./defaults"),c=e("./compressedObject"),f=e("./zipObject"),p=e("./generate"),h=e("./nodejsUtils"),g=e("./nodejs/NodejsStreamInputAdapter"),m=function(D){D.slice(-1)==="/"&&(D=D.substring(0,D.length-1));var A=D.lastIndexOf("/");return 0<A?D.substring(0,A):""},y=function(D){return D.slice(-1)!=="/"&&(D+="/"),D},E=function(D,A){return A=A!==void 0?A:l.createFolders,D=y(D),this.files[D]||r.call(this,D,null,{dir:!0,createFolders:A}),this.files[D]};function C(D){return Object.prototype.toString.call(D)==="[object RegExp]"}var T={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(D){var A,b,O;for(A in this.files)O=this.files[A],(b=A.slice(this.root.length,A.length))&&A.slice(0,this.root.length)===this.root&&D(b,O)},filter:function(D){var A=[];return this.forEach(function(b,O){D(b,O)&&A.push(O)}),A},file:function(D,A,b){if(arguments.length!==1)return D=this.root+D,r.call(this,D,A,b),this;if(C(D)){var O=D;return this.filter(function(B,G){return!G.dir&&O.test(B)})}var R=this.files[this.root+D];return R&&!R.dir?R:null},folder:function(D){if(!D)return this;if(C(D))return this.filter(function(R,B){return B.dir&&D.test(R)});var A=this.root+D,b=E.call(this,A),O=this.clone();return O.root=b.name,O},remove:function(D){D=this.root+D;var A=this.files[D];if(A||(D.slice(-1)!=="/"&&(D+="/"),A=this.files[D]),A&&!A.dir)delete this.files[D];else for(var b=this.filter(function(R,B){return B.name.slice(0,D.length)===D}),O=0;O<b.length;O++)delete this.files[b[O].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(D){var A,b={};try{if((b=i.extend(D||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=b.type.toLowerCase(),b.compression=b.compression.toUpperCase(),b.type==="binarystring"&&(b.type="string"),!b.type)throw new Error("No output type specified.");i.checkSupport(b.type),b.platform!=="darwin"&&b.platform!=="freebsd"&&b.platform!=="linux"&&b.platform!=="sunos"||(b.platform="UNIX"),b.platform==="win32"&&(b.platform="DOS");var O=b.comment||this.comment||"";A=p.generateWorker(this,b,O)}catch(R){(A=new s("error")).error(R)}return new a(A,b.type||"string",b.mimeType)},generateAsync:function(D,A){return this.generateInternalStream(D).accumulate(A)},generateNodeStream:function(D,A){return(D=D||{}).type||(D.type="nodebuffer"),this.generateInternalStream(D).toNodejsStream(A)}};t.exports=T},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,t,n){"use strict";t.exports=e("stream")},{stream:void 0}],17:[function(e,t,n){"use strict";var r=e("./DataReader");function o(i){r.call(this,i);for(var s=0;s<this.data.length;s++)i[s]=255&i[s]}e("../utils").inherits(o,r),o.prototype.byteAt=function(i){return this.data[this.zero+i]},o.prototype.lastIndexOfSignature=function(i){for(var s=i.charCodeAt(0),a=i.charCodeAt(1),l=i.charCodeAt(2),c=i.charCodeAt(3),f=this.length-4;0<=f;--f)if(this.data[f]===s&&this.data[f+1]===a&&this.data[f+2]===l&&this.data[f+3]===c)return f-this.zero;return-1},o.prototype.readAndCheckSignature=function(i){var s=i.charCodeAt(0),a=i.charCodeAt(1),l=i.charCodeAt(2),c=i.charCodeAt(3),f=this.readData(4);return s===f[0]&&a===f[1]&&l===f[2]&&c===f[3]},o.prototype.readData=function(i){if(this.checkOffset(i),i===0)return[];var s=this.data.slice(this.zero+this.index,this.zero+this.index+i);return this.index+=i,s},t.exports=o},{"../utils":32,"./DataReader":18}],18:[function(e,t,n){"use strict";var r=e("../utils");function o(i){this.data=i,this.length=i.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(i){this.checkIndex(this.index+i)},checkIndex:function(i){if(this.length<this.zero+i||i<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+i+"). Corrupted zip ?")},setIndex:function(i){this.checkIndex(i),this.index=i},skip:function(i){this.setIndex(this.index+i)},byteAt:function(){},readInt:function(i){var s,a=0;for(this.checkOffset(i),s=this.index+i-1;s>=this.index;s--)a=(a<<8)+this.byteAt(s);return this.index+=i,a},readString:function(i){return r.transformTo("string",this.readData(i))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var i=this.readInt(4);return new Date(Date.UTC(1980+(i>>25&127),(i>>21&15)-1,i>>16&31,i>>11&31,i>>5&63,(31&i)<<1))}},t.exports=o},{"../utils":32}],19:[function(e,t,n){"use strict";var r=e("./Uint8ArrayReader");function o(i){r.call(this,i)}e("../utils").inherits(o,r),o.prototype.readData=function(i){this.checkOffset(i);var s=this.data.slice(this.zero+this.index,this.zero+this.index+i);return this.index+=i,s},t.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,t,n){"use strict";var r=e("./DataReader");function o(i){r.call(this,i)}e("../utils").inherits(o,r),o.prototype.byteAt=function(i){return this.data.charCodeAt(this.zero+i)},o.prototype.lastIndexOfSignature=function(i){return this.data.lastIndexOf(i)-this.zero},o.prototype.readAndCheckSignature=function(i){return i===this.readData(4)},o.prototype.readData=function(i){this.checkOffset(i);var s=this.data.slice(this.zero+this.index,this.zero+this.index+i);return this.index+=i,s},t.exports=o},{"../utils":32,"./DataReader":18}],21:[function(e,t,n){"use strict";var r=e("./ArrayReader");function o(i){r.call(this,i)}e("../utils").inherits(o,r),o.prototype.readData=function(i){if(this.checkOffset(i),i===0)return new Uint8Array(0);var s=this.data.subarray(this.zero+this.index,this.zero+this.index+i);return this.index+=i,s},t.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(e,t,n){"use strict";var r=e("../utils"),o=e("../support"),i=e("./ArrayReader"),s=e("./StringReader"),a=e("./NodeBufferReader"),l=e("./Uint8ArrayReader");t.exports=function(c){var f=r.getTypeOf(c);return r.checkSupport(f),f!=="string"||o.uint8array?f==="nodebuffer"?new a(c):o.uint8array?new l(r.transformTo("uint8array",c)):new i(r.transformTo("array",c)):new s(c)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,t,n){"use strict";n.LOCAL_FILE_HEADER="PK",n.CENTRAL_FILE_HEADER="PK",n.CENTRAL_DIRECTORY_END="PK",n.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",n.ZIP64_CENTRAL_DIRECTORY_END="PK",n.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(e,t,n){"use strict";var r=e("./GenericWorker"),o=e("../utils");function i(s){r.call(this,"ConvertWorker to "+s),this.destType=s}o.inherits(i,r),i.prototype.processChunk=function(s){this.push({data:o.transformTo(this.destType,s.data),meta:s.meta})},t.exports=i},{"../utils":32,"./GenericWorker":28}],25:[function(e,t,n){"use strict";var r=e("./GenericWorker"),o=e("../crc32");function i(){r.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(i,r),i.prototype.processChunk=function(s){this.streamInfo.crc32=o(s.data,this.streamInfo.crc32||0),this.push(s)},t.exports=i},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,t,n){"use strict";var r=e("../utils"),o=e("./GenericWorker");function i(s){o.call(this,"DataLengthProbe for "+s),this.propName=s,this.withStreamInfo(s,0)}r.inherits(i,o),i.prototype.processChunk=function(s){if(s){var a=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=a+s.data.length}o.prototype.processChunk.call(this,s)},t.exports=i},{"../utils":32,"./GenericWorker":28}],27:[function(e,t,n){"use strict";var r=e("../utils"),o=e("./GenericWorker");function i(s){o.call(this,"DataWorker");var a=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,s.then(function(l){a.dataIsReady=!0,a.data=l,a.max=l&&l.length||0,a.type=r.getTypeOf(l),a.isPaused||a._tickAndRepeat()},function(l){a.error(l)})}r.inherits(i,o),i.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},i.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,r.delay(this._tickAndRepeat,[],this)),!0)},i.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(r.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},i.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var s=null,a=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":s=this.data.substring(this.index,a);break;case"uint8array":s=this.data.subarray(this.index,a);break;case"array":case"nodebuffer":s=this.data.slice(this.index,a)}return this.index=a,this.push({data:s,meta:{percent:this.max?this.index/this.max*100:0}})},t.exports=i},{"../utils":32,"./GenericWorker":28}],28:[function(e,t,n){"use strict";function r(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}r.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,i){return this._listeners[o].push(i),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,i){if(this._listeners[o])for(var s=0;s<this._listeners[o].length;s++)this._listeners[o][s].call(this,i)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var i=this;return o.on("data",function(s){i.processChunk(s)}),o.on("end",function(){i.end()}),o.on("error",function(s){i.error(s)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,i){return this.extraStreamInfo[o]=i,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},t.exports=r},{}],29:[function(e,t,n){"use strict";var r=e("../utils"),o=e("./ConvertWorker"),i=e("./GenericWorker"),s=e("../base64"),a=e("../support"),l=e("../external"),c=null;if(a.nodestream)try{c=e("../nodejs/NodejsStreamOutputAdapter")}catch{}function f(h,g){return new l.Promise(function(m,y){var E=[],C=h._internalType,T=h._outputType,D=h._mimeType;h.on("data",function(A,b){E.push(A),g&&g(b)}).on("error",function(A){E=[],y(A)}).on("end",function(){try{var A=(function(b,O,R){switch(b){case"blob":return r.newBlob(r.transformTo("arraybuffer",O),R);case"base64":return s.encode(O);default:return r.transformTo(b,O)}})(T,(function(b,O){var R,B=0,G=null,S=0;for(R=0;R<O.length;R++)S+=O[R].length;switch(b){case"string":return O.join("");case"array":return Array.prototype.concat.apply([],O);case"uint8array":for(G=new Uint8Array(S),R=0;R<O.length;R++)G.set(O[R],B),B+=O[R].length;return G;case"nodebuffer":return Buffer.concat(O);default:throw new Error("concat : unsupported type '"+b+"'")}})(C,E),D);m(A)}catch(b){y(b)}E=[]}).resume()})}function p(h,g,m){var y=g;switch(g){case"blob":case"arraybuffer":y="uint8array";break;case"base64":y="string"}try{this._internalType=y,this._outputType=g,this._mimeType=m,r.checkSupport(y),this._worker=h.pipe(new o(y)),h.lock()}catch(E){this._worker=new i("error"),this._worker.error(E)}}p.prototype={accumulate:function(h){return f(this,h)},on:function(h,g){var m=this;return h==="data"?this._worker.on(h,function(y){g.call(m,y.data,y.meta)}):this._worker.on(h,function(){r.delay(g,arguments,m)}),this},resume:function(){return r.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(h){if(r.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new c(this,{objectMode:this._outputType!=="nodebuffer"},h)}},t.exports=p},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,t,n){"use strict";if(n.base64=!0,n.array=!0,n.string=!0,n.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",n.nodebuffer=typeof Buffer<"u",n.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")n.blob=!1;else{var r=new ArrayBuffer(0);try{n.blob=new Blob([r],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(r),n.blob=o.getBlob("application/zip").size===0}catch{n.blob=!1}}}try{n.nodestream=!!e("readable-stream").Readable}catch{n.nodestream=!1}},{"readable-stream":16}],31:[function(e,t,n){"use strict";for(var r=e("./utils"),o=e("./support"),i=e("./nodejsUtils"),s=e("./stream/GenericWorker"),a=new Array(256),l=0;l<256;l++)a[l]=252<=l?6:248<=l?5:240<=l?4:224<=l?3:192<=l?2:1;a[254]=a[254]=1;function c(){s.call(this,"utf-8 decode"),this.leftOver=null}function f(){s.call(this,"utf-8 encode")}n.utf8encode=function(p){return o.nodebuffer?i.newBufferFrom(p,"utf-8"):(function(h){var g,m,y,E,C,T=h.length,D=0;for(E=0;E<T;E++)(64512&(m=h.charCodeAt(E)))==55296&&E+1<T&&(64512&(y=h.charCodeAt(E+1)))==56320&&(m=65536+(m-55296<<10)+(y-56320),E++),D+=m<128?1:m<2048?2:m<65536?3:4;for(g=o.uint8array?new Uint8Array(D):new Array(D),E=C=0;C<D;E++)(64512&(m=h.charCodeAt(E)))==55296&&E+1<T&&(64512&(y=h.charCodeAt(E+1)))==56320&&(m=65536+(m-55296<<10)+(y-56320),E++),m<128?g[C++]=m:(m<2048?g[C++]=192|m>>>6:(m<65536?g[C++]=224|m>>>12:(g[C++]=240|m>>>18,g[C++]=128|m>>>12&63),g[C++]=128|m>>>6&63),g[C++]=128|63&m);return g})(p)},n.utf8decode=function(p){return o.nodebuffer?r.transformTo("nodebuffer",p).toString("utf-8"):(function(h){var g,m,y,E,C=h.length,T=new Array(2*C);for(g=m=0;g<C;)if((y=h[g++])<128)T[m++]=y;else if(4<(E=a[y]))T[m++]=65533,g+=E-1;else{for(y&=E===2?31:E===3?15:7;1<E&&g<C;)y=y<<6|63&h[g++],E--;1<E?T[m++]=65533:y<65536?T[m++]=y:(y-=65536,T[m++]=55296|y>>10&1023,T[m++]=56320|1023&y)}return T.length!==m&&(T.subarray?T=T.subarray(0,m):T.length=m),r.applyFromCharCode(T)})(p=r.transformTo(o.uint8array?"uint8array":"array",p))},r.inherits(c,s),c.prototype.processChunk=function(p){var h=r.transformTo(o.uint8array?"uint8array":"array",p.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var g=h;(h=new Uint8Array(g.length+this.leftOver.length)).set(this.leftOver,0),h.set(g,this.leftOver.length)}else h=this.leftOver.concat(h);this.leftOver=null}var m=(function(E,C){var T;for((C=C||E.length)>E.length&&(C=E.length),T=C-1;0<=T&&(192&E[T])==128;)T--;return T<0||T===0?C:T+a[E[T]]>C?T:C})(h),y=h;m!==h.length&&(o.uint8array?(y=h.subarray(0,m),this.leftOver=h.subarray(m,h.length)):(y=h.slice(0,m),this.leftOver=h.slice(m,h.length))),this.push({data:n.utf8decode(y),meta:p.meta})},c.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:n.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},n.Utf8DecodeWorker=c,r.inherits(f,s),f.prototype.processChunk=function(p){this.push({data:n.utf8encode(p.data),meta:p.meta})},n.Utf8EncodeWorker=f},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,t,n){"use strict";var r=e("./support"),o=e("./base64"),i=e("./nodejsUtils"),s=e("./external");function a(g){return g}function l(g,m){for(var y=0;y<g.length;++y)m[y]=255&g.charCodeAt(y);return m}e("setimmediate"),n.newBlob=function(g,m){n.checkSupport("blob");try{return new Blob([g],{type:m})}catch{try{var y=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return y.append(g),y.getBlob(m)}catch{throw new Error("Bug : can't construct the Blob.")}}};var c={stringifyByChunk:function(g,m,y){var E=[],C=0,T=g.length;if(T<=y)return String.fromCharCode.apply(null,g);for(;C<T;)m==="array"||m==="nodebuffer"?E.push(String.fromCharCode.apply(null,g.slice(C,Math.min(C+y,T)))):E.push(String.fromCharCode.apply(null,g.subarray(C,Math.min(C+y,T)))),C+=y;return E.join("")},stringifyByChar:function(g){for(var m="",y=0;y<g.length;y++)m+=String.fromCharCode(g[y]);return m},applyCanBeUsed:{uint8array:(function(){try{return r.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return r.nodebuffer&&String.fromCharCode.apply(null,i.allocBuffer(1)).length===1}catch{return!1}})()}};function f(g){var m=65536,y=n.getTypeOf(g),E=!0;if(y==="uint8array"?E=c.applyCanBeUsed.uint8array:y==="nodebuffer"&&(E=c.applyCanBeUsed.nodebuffer),E)for(;1<m;)try{return c.stringifyByChunk(g,y,m)}catch{m=Math.floor(m/2)}return c.stringifyByChar(g)}function p(g,m){for(var y=0;y<g.length;y++)m[y]=g[y];return m}n.applyFromCharCode=f;var h={};h.string={string:a,array:function(g){return l(g,new Array(g.length))},arraybuffer:function(g){return h.string.uint8array(g).buffer},uint8array:function(g){return l(g,new Uint8Array(g.length))},nodebuffer:function(g){return l(g,i.allocBuffer(g.length))}},h.array={string:f,array:a,arraybuffer:function(g){return new Uint8Array(g).buffer},uint8array:function(g){return new Uint8Array(g)},nodebuffer:function(g){return i.newBufferFrom(g)}},h.arraybuffer={string:function(g){return f(new Uint8Array(g))},array:function(g){return p(new Uint8Array(g),new Array(g.byteLength))},arraybuffer:a,uint8array:function(g){return new Uint8Array(g)},nodebuffer:function(g){return i.newBufferFrom(new Uint8Array(g))}},h.uint8array={string:f,array:function(g){return p(g,new Array(g.length))},arraybuffer:function(g){return g.buffer},uint8array:a,nodebuffer:function(g){return i.newBufferFrom(g)}},h.nodebuffer={string:f,array:function(g){return p(g,new Array(g.length))},arraybuffer:function(g){return h.nodebuffer.uint8array(g).buffer},uint8array:function(g){return p(g,new Uint8Array(g.length))},nodebuffer:a},n.transformTo=function(g,m){if(m=m||"",!g)return m;n.checkSupport(g);var y=n.getTypeOf(m);return h[y][g](m)},n.resolve=function(g){for(var m=g.split("/"),y=[],E=0;E<m.length;E++){var C=m[E];C==="."||C===""&&E!==0&&E!==m.length-1||(C===".."?y.pop():y.push(C))}return y.join("/")},n.getTypeOf=function(g){return typeof g=="string"?"string":Object.prototype.toString.call(g)==="[object Array]"?"array":r.nodebuffer&&i.isBuffer(g)?"nodebuffer":r.uint8array&&g instanceof Uint8Array?"uint8array":r.arraybuffer&&g instanceof ArrayBuffer?"arraybuffer":void 0},n.checkSupport=function(g){if(!r[g.toLowerCase()])throw new Error(g+" is not supported by this platform")},n.MAX_VALUE_16BITS=65535,n.MAX_VALUE_32BITS=-1,n.pretty=function(g){var m,y,E="";for(y=0;y<(g||"").length;y++)E+="\\x"+((m=g.charCodeAt(y))<16?"0":"")+m.toString(16).toUpperCase();return E},n.delay=function(g,m,y){setImmediate(function(){g.apply(y||null,m||[])})},n.inherits=function(g,m){function y(){}y.prototype=m.prototype,g.prototype=new y},n.extend=function(){var g,m,y={};for(g=0;g<arguments.length;g++)for(m in arguments[g])Object.prototype.hasOwnProperty.call(arguments[g],m)&&y[m]===void 0&&(y[m]=arguments[g][m]);return y},n.prepareContent=function(g,m,y,E,C){return s.Promise.resolve(m).then(function(T){return r.blob&&(T instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(T))!==-1)&&typeof FileReader<"u"?new s.Promise(function(D,A){var b=new FileReader;b.onload=function(O){D(O.target.result)},b.onerror=function(O){A(O.target.error)},b.readAsArrayBuffer(T)}):T}).then(function(T){var D=n.getTypeOf(T);return D?(D==="arraybuffer"?T=n.transformTo("uint8array",T):D==="string"&&(C?T=o.decode(T):y&&E!==!0&&(T=(function(A){return l(A,r.uint8array?new Uint8Array(A.length):new Array(A.length))})(T))),T):s.Promise.reject(new Error("Can't read the data of '"+g+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(e,t,n){"use strict";var r=e("./reader/readerFor"),o=e("./utils"),i=e("./signature"),s=e("./zipEntry"),a=e("./support");function l(c){this.files=[],this.loadOptions=c}l.prototype={checkSignature:function(c){if(!this.reader.readAndCheckSignature(c)){this.reader.index-=4;var f=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(f)+", expected "+o.pretty(c)+")")}},isSignature:function(c,f){var p=this.reader.index;this.reader.setIndex(c);var h=this.reader.readString(4)===f;return this.reader.setIndex(p),h},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var c=this.reader.readData(this.zipCommentLength),f=a.uint8array?"uint8array":"array",p=o.transformTo(f,c);this.zipComment=this.loadOptions.decodeFileName(p)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var c,f,p,h=this.zip64EndOfCentralSize-44;0<h;)c=this.reader.readInt(2),f=this.reader.readInt(4),p=this.reader.readData(f),this.zip64ExtensibleData[c]={id:c,length:f,value:p}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var c,f;for(c=0;c<this.files.length;c++)f=this.files[c],this.reader.setIndex(f.localHeaderOffset),this.checkSignature(i.LOCAL_FILE_HEADER),f.readLocalPart(this.reader),f.handleUTF8(),f.processAttributes()},readCentralDir:function(){var c;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(i.CENTRAL_FILE_HEADER);)(c=new s({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(c);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var c=this.reader.lastIndexOfSignature(i.CENTRAL_DIRECTORY_END);if(c<0)throw this.isSignature(0,i.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(c);var f=c;if(this.checkSignature(i.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(c=this.reader.lastIndexOfSignature(i.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(c),this.checkSignature(i.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,i.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(i.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(i.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var p=this.centralDirOffset+this.centralDirSize;this.zip64&&(p+=20,p+=12+this.zip64EndOfCentralSize);var h=f-p;if(0<h)this.isSignature(f,i.CENTRAL_FILE_HEADER)||(this.reader.zero=h);else if(h<0)throw new Error("Corrupted zip: missing "+Math.abs(h)+" bytes.")},prepareReader:function(c){this.reader=r(c)},load:function(c){this.prepareReader(c),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},t.exports=l},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(e,t,n){"use strict";var r=e("./reader/readerFor"),o=e("./utils"),i=e("./compressedObject"),s=e("./crc32"),a=e("./utf8"),l=e("./compressions"),c=e("./support");function f(p,h){this.options=p,this.loadOptions=h}f.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(p){var h,g;if(p.skip(22),this.fileNameLength=p.readInt(2),g=p.readInt(2),this.fileName=p.readData(this.fileNameLength),p.skip(g),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((h=(function(m){for(var y in l)if(Object.prototype.hasOwnProperty.call(l,y)&&l[y].magic===m)return l[y];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new i(this.compressedSize,this.uncompressedSize,this.crc32,h,p.readData(this.compressedSize))},readCentralPart:function(p){this.versionMadeBy=p.readInt(2),p.skip(2),this.bitFlag=p.readInt(2),this.compressionMethod=p.readString(2),this.date=p.readDate(),this.crc32=p.readInt(4),this.compressedSize=p.readInt(4),this.uncompressedSize=p.readInt(4);var h=p.readInt(2);if(this.extraFieldsLength=p.readInt(2),this.fileCommentLength=p.readInt(2),this.diskNumberStart=p.readInt(2),this.internalFileAttributes=p.readInt(2),this.externalFileAttributes=p.readInt(4),this.localHeaderOffset=p.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");p.skip(h),this.readExtraFields(p),this.parseZIP64ExtraField(p),this.fileComment=p.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var p=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),p==0&&(this.dosPermissions=63&this.externalFileAttributes),p==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var p=r(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=p.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=p.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=p.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=p.readInt(4))}},readExtraFields:function(p){var h,g,m,y=p.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});p.index+4<y;)h=p.readInt(2),g=p.readInt(2),m=p.readData(g),this.extraFields[h]={id:h,length:g,value:m};p.setIndex(y)},handleUTF8:function(){var p=c.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=a.utf8decode(this.fileName),this.fileCommentStr=a.utf8decode(this.fileComment);else{var h=this.findExtraFieldUnicodePath();if(h!==null)this.fileNameStr=h;else{var g=o.transformTo(p,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(g)}var m=this.findExtraFieldUnicodeComment();if(m!==null)this.fileCommentStr=m;else{var y=o.transformTo(p,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(y)}}},findExtraFieldUnicodePath:function(){var p=this.extraFields[28789];if(p){var h=r(p.value);return h.readInt(1)!==1||s(this.fileName)!==h.readInt(4)?null:a.utf8decode(h.readData(p.length-5))}return null},findExtraFieldUnicodeComment:function(){var p=this.extraFields[25461];if(p){var h=r(p.value);return h.readInt(1)!==1||s(this.fileComment)!==h.readInt(4)?null:a.utf8decode(h.readData(p.length-5))}return null}},t.exports=f},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,t,n){"use strict";function r(h,g,m){this.name=h,this.dir=m.dir,this.date=m.date,this.comment=m.comment,this.unixPermissions=m.unixPermissions,this.dosPermissions=m.dosPermissions,this._data=g,this._dataBinary=m.binary,this.options={compression:m.compression,compressionOptions:m.compressionOptions}}var o=e("./stream/StreamHelper"),i=e("./stream/DataWorker"),s=e("./utf8"),a=e("./compressedObject"),l=e("./stream/GenericWorker");r.prototype={internalStream:function(h){var g=null,m="string";try{if(!h)throw new Error("No output type specified.");var y=(m=h.toLowerCase())==="string"||m==="text";m!=="binarystring"&&m!=="text"||(m="string"),g=this._decompressWorker();var E=!this._dataBinary;E&&!y&&(g=g.pipe(new s.Utf8EncodeWorker)),!E&&y&&(g=g.pipe(new s.Utf8DecodeWorker))}catch(C){(g=new l("error")).error(C)}return new o(g,m,"")},async:function(h,g){return this.internalStream(h).accumulate(g)},nodeStream:function(h,g){return this.internalStream(h||"nodebuffer").toNodejsStream(g)},_compressWorker:function(h,g){if(this._data instanceof a&&this._data.compression.magic===h.magic)return this._data.getCompressedWorker();var m=this._decompressWorker();return this._dataBinary||(m=m.pipe(new s.Utf8EncodeWorker)),a.createWorkerFrom(m,h,g)},_decompressWorker:function(){return this._data instanceof a?this._data.getContentWorker():this._data instanceof l?this._data:new i(this._data)}};for(var c=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],f=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},p=0;p<c.length;p++)r.prototype[c[p]]=f;t.exports=r},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,t,n){(function(r){"use strict";var o,i,s=r.MutationObserver||r.WebKitMutationObserver;if(s){var a=0,l=new s(h),c=r.document.createTextNode("");l.observe(c,{characterData:!0}),o=function(){c.data=a=++a%2}}else if(r.setImmediate||r.MessageChannel===void 0)o="document"in r&&"onreadystatechange"in r.document.createElement("script")?function(){var g=r.document.createElement("script");g.onreadystatechange=function(){h(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},r.document.documentElement.appendChild(g)}:function(){setTimeout(h,0)};else{var f=new r.MessageChannel;f.port1.onmessage=h,o=function(){f.port2.postMessage(0)}}var p=[];function h(){var g,m;i=!0;for(var y=p.length;y;){for(m=p,p=[],g=-1;++g<y;)m[g]();y=p.length}i=!1}t.exports=function(g){p.push(g)!==1||i||o()}}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(e,t,n){"use strict";var r=e("immediate");function o(){}var i={},s=["REJECTED"],a=["FULFILLED"],l=["PENDING"];function c(y){if(typeof y!="function")throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,y!==o&&g(this,y)}function f(y,E,C){this.promise=y,typeof E=="function"&&(this.onFulfilled=E,this.callFulfilled=this.otherCallFulfilled),typeof C=="function"&&(this.onRejected=C,this.callRejected=this.otherCallRejected)}function p(y,E,C){r(function(){var T;try{T=E(C)}catch(D){return i.reject(y,D)}T===y?i.reject(y,new TypeError("Cannot resolve promise with itself")):i.resolve(y,T)})}function h(y){var E=y&&y.then;if(y&&(typeof y=="object"||typeof y=="function")&&typeof E=="function")return function(){E.apply(y,arguments)}}function g(y,E){var C=!1;function T(b){C||(C=!0,i.reject(y,b))}function D(b){C||(C=!0,i.resolve(y,b))}var A=m(function(){E(D,T)});A.status==="error"&&T(A.value)}function m(y,E){var C={};try{C.value=y(E),C.status="success"}catch(T){C.status="error",C.value=T}return C}(t.exports=c).prototype.finally=function(y){if(typeof y!="function")return this;var E=this.constructor;return this.then(function(C){return E.resolve(y()).then(function(){return C})},function(C){return E.resolve(y()).then(function(){throw C})})},c.prototype.catch=function(y){return this.then(null,y)},c.prototype.then=function(y,E){if(typeof y!="function"&&this.state===a||typeof E!="function"&&this.state===s)return this;var C=new this.constructor(o);return this.state!==l?p(C,this.state===a?y:E,this.outcome):this.queue.push(new f(C,y,E)),C},f.prototype.callFulfilled=function(y){i.resolve(this.promise,y)},f.prototype.otherCallFulfilled=function(y){p(this.promise,this.onFulfilled,y)},f.prototype.callRejected=function(y){i.reject(this.promise,y)},f.prototype.otherCallRejected=function(y){p(this.promise,this.onRejected,y)},i.resolve=function(y,E){var C=m(h,E);if(C.status==="error")return i.reject(y,C.value);var T=C.value;if(T)g(y,T);else{y.state=a,y.outcome=E;for(var D=-1,A=y.queue.length;++D<A;)y.queue[D].callFulfilled(E)}return y},i.reject=function(y,E){y.state=s,y.outcome=E;for(var C=-1,T=y.queue.length;++C<T;)y.queue[C].callRejected(E);return y},c.resolve=function(y){return y instanceof this?y:i.resolve(new this(o),y)},c.reject=function(y){var E=new this(o);return i.reject(E,y)},c.all=function(y){var E=this;if(Object.prototype.toString.call(y)!=="[object Array]")return this.reject(new TypeError("must be an array"));var C=y.length,T=!1;if(!C)return this.resolve([]);for(var D=new Array(C),A=0,b=-1,O=new this(o);++b<C;)R(y[b],b);return O;function R(B,G){E.resolve(B).then(function(S){D[G]=S,++A!==C||T||(T=!0,i.resolve(O,D))},function(S){T||(T=!0,i.reject(O,S))})}},c.race=function(y){var E=this;if(Object.prototype.toString.call(y)!=="[object Array]")return this.reject(new TypeError("must be an array"));var C=y.length,T=!1;if(!C)return this.resolve([]);for(var D=-1,A=new this(o);++D<C;)b=y[D],E.resolve(b).then(function(O){T||(T=!0,i.resolve(A,O))},function(O){T||(T=!0,i.reject(A,O))});var b;return A}},{immediate:36}],38:[function(e,t,n){"use strict";var r={};(0,e("./lib/utils/common").assign)(r,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),t.exports=r},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,t,n){"use strict";var r=e("./zlib/deflate"),o=e("./utils/common"),i=e("./utils/strings"),s=e("./zlib/messages"),a=e("./zlib/zstream"),l=Object.prototype.toString,c=0,f=-1,p=0,h=8;function g(y){if(!(this instanceof g))return new g(y);this.options=o.assign({level:f,method:h,chunkSize:16384,windowBits:15,memLevel:8,strategy:p,to:""},y||{});var E=this.options;E.raw&&0<E.windowBits?E.windowBits=-E.windowBits:E.gzip&&0<E.windowBits&&E.windowBits<16&&(E.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;var C=r.deflateInit2(this.strm,E.level,E.method,E.windowBits,E.memLevel,E.strategy);if(C!==c)throw new Error(s[C]);if(E.header&&r.deflateSetHeader(this.strm,E.header),E.dictionary){var T;if(T=typeof E.dictionary=="string"?i.string2buf(E.dictionary):l.call(E.dictionary)==="[object ArrayBuffer]"?new Uint8Array(E.dictionary):E.dictionary,(C=r.deflateSetDictionary(this.strm,T))!==c)throw new Error(s[C]);this._dict_set=!0}}function m(y,E){var C=new g(E);if(C.push(y,!0),C.err)throw C.msg||s[C.err];return C.result}g.prototype.push=function(y,E){var C,T,D=this.strm,A=this.options.chunkSize;if(this.ended)return!1;T=E===~~E?E:E===!0?4:0,typeof y=="string"?D.input=i.string2buf(y):l.call(y)==="[object ArrayBuffer]"?D.input=new Uint8Array(y):D.input=y,D.next_in=0,D.avail_in=D.input.length;do{if(D.avail_out===0&&(D.output=new o.Buf8(A),D.next_out=0,D.avail_out=A),(C=r.deflate(D,T))!==1&&C!==c)return this.onEnd(C),!(this.ended=!0);D.avail_out!==0&&(D.avail_in!==0||T!==4&&T!==2)||(this.options.to==="string"?this.onData(i.buf2binstring(o.shrinkBuf(D.output,D.next_out))):this.onData(o.shrinkBuf(D.output,D.next_out)))}while((0<D.avail_in||D.avail_out===0)&&C!==1);return T===4?(C=r.deflateEnd(this.strm),this.onEnd(C),this.ended=!0,C===c):T!==2||(this.onEnd(c),!(D.avail_out=0))},g.prototype.onData=function(y){this.chunks.push(y)},g.prototype.onEnd=function(y){y===c&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=y,this.msg=this.strm.msg},n.Deflate=g,n.deflate=m,n.deflateRaw=function(y,E){return(E=E||{}).raw=!0,m(y,E)},n.gzip=function(y,E){return(E=E||{}).gzip=!0,m(y,E)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,t,n){"use strict";var r=e("./zlib/inflate"),o=e("./utils/common"),i=e("./utils/strings"),s=e("./zlib/constants"),a=e("./zlib/messages"),l=e("./zlib/zstream"),c=e("./zlib/gzheader"),f=Object.prototype.toString;function p(g){if(!(this instanceof p))return new p(g);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},g||{});var m=this.options;m.raw&&0<=m.windowBits&&m.windowBits<16&&(m.windowBits=-m.windowBits,m.windowBits===0&&(m.windowBits=-15)),!(0<=m.windowBits&&m.windowBits<16)||g&&g.windowBits||(m.windowBits+=32),15<m.windowBits&&m.windowBits<48&&(15&m.windowBits)==0&&(m.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var y=r.inflateInit2(this.strm,m.windowBits);if(y!==s.Z_OK)throw new Error(a[y]);this.header=new c,r.inflateGetHeader(this.strm,this.header)}function h(g,m){var y=new p(m);if(y.push(g,!0),y.err)throw y.msg||a[y.err];return y.result}p.prototype.push=function(g,m){var y,E,C,T,D,A,b=this.strm,O=this.options.chunkSize,R=this.options.dictionary,B=!1;if(this.ended)return!1;E=m===~~m?m:m===!0?s.Z_FINISH:s.Z_NO_FLUSH,typeof g=="string"?b.input=i.binstring2buf(g):f.call(g)==="[object ArrayBuffer]"?b.input=new Uint8Array(g):b.input=g,b.next_in=0,b.avail_in=b.input.length;do{if(b.avail_out===0&&(b.output=new o.Buf8(O),b.next_out=0,b.avail_out=O),(y=r.inflate(b,s.Z_NO_FLUSH))===s.Z_NEED_DICT&&R&&(A=typeof R=="string"?i.string2buf(R):f.call(R)==="[object ArrayBuffer]"?new Uint8Array(R):R,y=r.inflateSetDictionary(this.strm,A)),y===s.Z_BUF_ERROR&&B===!0&&(y=s.Z_OK,B=!1),y!==s.Z_STREAM_END&&y!==s.Z_OK)return this.onEnd(y),!(this.ended=!0);b.next_out&&(b.avail_out!==0&&y!==s.Z_STREAM_END&&(b.avail_in!==0||E!==s.Z_FINISH&&E!==s.Z_SYNC_FLUSH)||(this.options.to==="string"?(C=i.utf8border(b.output,b.next_out),T=b.next_out-C,D=i.buf2string(b.output,C),b.next_out=T,b.avail_out=O-T,T&&o.arraySet(b.output,b.output,C,T,0),this.onData(D)):this.onData(o.shrinkBuf(b.output,b.next_out)))),b.avail_in===0&&b.avail_out===0&&(B=!0)}while((0<b.avail_in||b.avail_out===0)&&y!==s.Z_STREAM_END);return y===s.Z_STREAM_END&&(E=s.Z_FINISH),E===s.Z_FINISH?(y=r.inflateEnd(this.strm),this.onEnd(y),this.ended=!0,y===s.Z_OK):E!==s.Z_SYNC_FLUSH||(this.onEnd(s.Z_OK),!(b.avail_out=0))},p.prototype.onData=function(g){this.chunks.push(g)},p.prototype.onEnd=function(g){g===s.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=g,this.msg=this.strm.msg},n.Inflate=p,n.inflate=h,n.inflateRaw=function(g,m){return(m=m||{}).raw=!0,h(g,m)},n.ungzip=h},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,t,n){"use strict";var r=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";n.assign=function(s){for(var a=Array.prototype.slice.call(arguments,1);a.length;){var l=a.shift();if(l){if(typeof l!="object")throw new TypeError(l+"must be non-object");for(var c in l)l.hasOwnProperty(c)&&(s[c]=l[c])}}return s},n.shrinkBuf=function(s,a){return s.length===a?s:s.subarray?s.subarray(0,a):(s.length=a,s)};var o={arraySet:function(s,a,l,c,f){if(a.subarray&&s.subarray)s.set(a.subarray(l,l+c),f);else for(var p=0;p<c;p++)s[f+p]=a[l+p]},flattenChunks:function(s){var a,l,c,f,p,h;for(a=c=0,l=s.length;a<l;a++)c+=s[a].length;for(h=new Uint8Array(c),a=f=0,l=s.length;a<l;a++)p=s[a],h.set(p,f),f+=p.length;return h}},i={arraySet:function(s,a,l,c,f){for(var p=0;p<c;p++)s[f+p]=a[l+p]},flattenChunks:function(s){return[].concat.apply([],s)}};n.setTyped=function(s){s?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,o)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,i))},n.setTyped(r)},{}],42:[function(e,t,n){"use strict";var r=e("./common"),o=!0,i=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{i=!1}for(var s=new r.Buf8(256),a=0;a<256;a++)s[a]=252<=a?6:248<=a?5:240<=a?4:224<=a?3:192<=a?2:1;function l(c,f){if(f<65537&&(c.subarray&&i||!c.subarray&&o))return String.fromCharCode.apply(null,r.shrinkBuf(c,f));for(var p="",h=0;h<f;h++)p+=String.fromCharCode(c[h]);return p}s[254]=s[254]=1,n.string2buf=function(c){var f,p,h,g,m,y=c.length,E=0;for(g=0;g<y;g++)(64512&(p=c.charCodeAt(g)))==55296&&g+1<y&&(64512&(h=c.charCodeAt(g+1)))==56320&&(p=65536+(p-55296<<10)+(h-56320),g++),E+=p<128?1:p<2048?2:p<65536?3:4;for(f=new r.Buf8(E),g=m=0;m<E;g++)(64512&(p=c.charCodeAt(g)))==55296&&g+1<y&&(64512&(h=c.charCodeAt(g+1)))==56320&&(p=65536+(p-55296<<10)+(h-56320),g++),p<128?f[m++]=p:(p<2048?f[m++]=192|p>>>6:(p<65536?f[m++]=224|p>>>12:(f[m++]=240|p>>>18,f[m++]=128|p>>>12&63),f[m++]=128|p>>>6&63),f[m++]=128|63&p);return f},n.buf2binstring=function(c){return l(c,c.length)},n.binstring2buf=function(c){for(var f=new r.Buf8(c.length),p=0,h=f.length;p<h;p++)f[p]=c.charCodeAt(p);return f},n.buf2string=function(c,f){var p,h,g,m,y=f||c.length,E=new Array(2*y);for(p=h=0;p<y;)if((g=c[p++])<128)E[h++]=g;else if(4<(m=s[g]))E[h++]=65533,p+=m-1;else{for(g&=m===2?31:m===3?15:7;1<m&&p<y;)g=g<<6|63&c[p++],m--;1<m?E[h++]=65533:g<65536?E[h++]=g:(g-=65536,E[h++]=55296|g>>10&1023,E[h++]=56320|1023&g)}return l(E,h)},n.utf8border=function(c,f){var p;for((f=f||c.length)>c.length&&(f=c.length),p=f-1;0<=p&&(192&c[p])==128;)p--;return p<0||p===0?f:p+s[c[p]]>f?p:f}},{"./common":41}],43:[function(e,t,n){"use strict";t.exports=function(r,o,i,s){for(var a=65535&r|0,l=r>>>16&65535|0,c=0;i!==0;){for(i-=c=2e3<i?2e3:i;l=l+(a=a+o[s++]|0)|0,--c;);a%=65521,l%=65521}return a|l<<16|0}},{}],44:[function(e,t,n){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,t,n){"use strict";var r=(function(){for(var o,i=[],s=0;s<256;s++){o=s;for(var a=0;a<8;a++)o=1&o?3988292384^o>>>1:o>>>1;i[s]=o}return i})();t.exports=function(o,i,s,a){var l=r,c=a+s;o^=-1;for(var f=a;f<c;f++)o=o>>>8^l[255&(o^i[f])];return-1^o}},{}],46:[function(e,t,n){"use strict";var r,o=e("../utils/common"),i=e("./trees"),s=e("./adler32"),a=e("./crc32"),l=e("./messages"),c=0,f=4,p=0,h=-2,g=-1,m=4,y=2,E=8,C=9,T=286,D=30,A=19,b=2*T+1,O=15,R=3,B=258,G=B+R+1,S=42,k=113,_=1,L=2,ee=3,H=4;function ge(v,U){return v.msg=l[U],U}function q(v){return(v<<1)-(4<v?9:0)}function ne(v){for(var U=v.length;0<=--U;)v[U]=0}function P(v){var U=v.state,F=U.pending;F>v.avail_out&&(F=v.avail_out),F!==0&&(o.arraySet(v.output,U.pending_buf,U.pending_out,F,v.next_out),v.next_out+=F,U.pending_out+=F,v.total_out+=F,v.avail_out-=F,U.pending-=F,U.pending===0&&(U.pending_out=0))}function x(v,U){i._tr_flush_block(v,0<=v.block_start?v.block_start:-1,v.strstart-v.block_start,U),v.block_start=v.strstart,P(v.strm)}function le(v,U){v.pending_buf[v.pending++]=U}function K(v,U){v.pending_buf[v.pending++]=U>>>8&255,v.pending_buf[v.pending++]=255&U}function J(v,U){var F,w,I=v.max_chain_length,M=v.strstart,V=v.prev_length,$=v.nice_match,N=v.strstart>v.w_size-G?v.strstart-(v.w_size-G):0,j=v.window,Q=v.w_mask,W=v.prev,oe=v.strstart+B,Oe=j[M+V-1],_e=j[M+V];v.prev_length>=v.good_match&&(I>>=2),$>v.lookahead&&($=v.lookahead);do if(j[(F=U)+V]===_e&&j[F+V-1]===Oe&&j[F]===j[M]&&j[++F]===j[M+1]){M+=2,F++;do;while(j[++M]===j[++F]&&j[++M]===j[++F]&&j[++M]===j[++F]&&j[++M]===j[++F]&&j[++M]===j[++F]&&j[++M]===j[++F]&&j[++M]===j[++F]&&j[++M]===j[++F]&&M<oe);if(w=B-(oe-M),M=oe-B,V<w){if(v.match_start=U,$<=(V=w))break;Oe=j[M+V-1],_e=j[M+V]}}while((U=W[U&Q])>N&&--I!=0);return V<=v.lookahead?V:v.lookahead}function Be(v){var U,F,w,I,M,V,$,N,j,Q,W=v.w_size;do{if(I=v.window_size-v.lookahead-v.strstart,v.strstart>=W+(W-G)){for(o.arraySet(v.window,v.window,W,W,0),v.match_start-=W,v.strstart-=W,v.block_start-=W,U=F=v.hash_size;w=v.head[--U],v.head[U]=W<=w?w-W:0,--F;);for(U=F=W;w=v.prev[--U],v.prev[U]=W<=w?w-W:0,--F;);I+=W}if(v.strm.avail_in===0)break;if(V=v.strm,$=v.window,N=v.strstart+v.lookahead,j=I,Q=void 0,Q=V.avail_in,j<Q&&(Q=j),F=Q===0?0:(V.avail_in-=Q,o.arraySet($,V.input,V.next_in,Q,N),V.state.wrap===1?V.adler=s(V.adler,$,Q,N):V.state.wrap===2&&(V.adler=a(V.adler,$,Q,N)),V.next_in+=Q,V.total_in+=Q,Q),v.lookahead+=F,v.lookahead+v.insert>=R)for(M=v.strstart-v.insert,v.ins_h=v.window[M],v.ins_h=(v.ins_h<<v.hash_shift^v.window[M+1])&v.hash_mask;v.insert&&(v.ins_h=(v.ins_h<<v.hash_shift^v.window[M+R-1])&v.hash_mask,v.prev[M&v.w_mask]=v.head[v.ins_h],v.head[v.ins_h]=M,M++,v.insert--,!(v.lookahead+v.insert<R)););}while(v.lookahead<G&&v.strm.avail_in!==0)}function lt(v,U){for(var F,w;;){if(v.lookahead<G){if(Be(v),v.lookahead<G&&U===c)return _;if(v.lookahead===0)break}if(F=0,v.lookahead>=R&&(v.ins_h=(v.ins_h<<v.hash_shift^v.window[v.strstart+R-1])&v.hash_mask,F=v.prev[v.strstart&v.w_mask]=v.head[v.ins_h],v.head[v.ins_h]=v.strstart),F!==0&&v.strstart-F<=v.w_size-G&&(v.match_length=J(v,F)),v.match_length>=R)if(w=i._tr_tally(v,v.strstart-v.match_start,v.match_length-R),v.lookahead-=v.match_length,v.match_length<=v.max_lazy_match&&v.lookahead>=R){for(v.match_length--;v.strstart++,v.ins_h=(v.ins_h<<v.hash_shift^v.window[v.strstart+R-1])&v.hash_mask,F=v.prev[v.strstart&v.w_mask]=v.head[v.ins_h],v.head[v.ins_h]=v.strstart,--v.match_length!=0;);v.strstart++}else v.strstart+=v.match_length,v.match_length=0,v.ins_h=v.window[v.strstart],v.ins_h=(v.ins_h<<v.hash_shift^v.window[v.strstart+1])&v.hash_mask;else w=i._tr_tally(v,0,v.window[v.strstart]),v.lookahead--,v.strstart++;if(w&&(x(v,!1),v.strm.avail_out===0))return _}return v.insert=v.strstart<R-1?v.strstart:R-1,U===f?(x(v,!0),v.strm.avail_out===0?ee:H):v.last_lit&&(x(v,!1),v.strm.avail_out===0)?_:L}function Ee(v,U){for(var F,w,I;;){if(v.lookahead<G){if(Be(v),v.lookahead<G&&U===c)return _;if(v.lookahead===0)break}if(F=0,v.lookahead>=R&&(v.ins_h=(v.ins_h<<v.hash_shift^v.window[v.strstart+R-1])&v.hash_mask,F=v.prev[v.strstart&v.w_mask]=v.head[v.ins_h],v.head[v.ins_h]=v.strstart),v.prev_length=v.match_length,v.prev_match=v.match_start,v.match_length=R-1,F!==0&&v.prev_length<v.max_lazy_match&&v.strstart-F<=v.w_size-G&&(v.match_length=J(v,F),v.match_length<=5&&(v.strategy===1||v.match_length===R&&4096<v.strstart-v.match_start)&&(v.match_length=R-1)),v.prev_length>=R&&v.match_length<=v.prev_length){for(I=v.strstart+v.lookahead-R,w=i._tr_tally(v,v.strstart-1-v.prev_match,v.prev_length-R),v.lookahead-=v.prev_length-1,v.prev_length-=2;++v.strstart<=I&&(v.ins_h=(v.ins_h<<v.hash_shift^v.window[v.strstart+R-1])&v.hash_mask,F=v.prev[v.strstart&v.w_mask]=v.head[v.ins_h],v.head[v.ins_h]=v.strstart),--v.prev_length!=0;);if(v.match_available=0,v.match_length=R-1,v.strstart++,w&&(x(v,!1),v.strm.avail_out===0))return _}else if(v.match_available){if((w=i._tr_tally(v,0,v.window[v.strstart-1]))&&x(v,!1),v.strstart++,v.lookahead--,v.strm.avail_out===0)return _}else v.match_available=1,v.strstart++,v.lookahead--}return v.match_available&&(w=i._tr_tally(v,0,v.window[v.strstart-1]),v.match_available=0),v.insert=v.strstart<R-1?v.strstart:R-1,U===f?(x(v,!0),v.strm.avail_out===0?ee:H):v.last_lit&&(x(v,!1),v.strm.avail_out===0)?_:L}function be(v,U,F,w,I){this.good_length=v,this.max_lazy=U,this.nice_length=F,this.max_chain=w,this.func=I}function Ze(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=E,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*b),this.dyn_dtree=new o.Buf16(2*(2*D+1)),this.bl_tree=new o.Buf16(2*(2*A+1)),ne(this.dyn_ltree),ne(this.dyn_dtree),ne(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(O+1),this.heap=new o.Buf16(2*T+1),ne(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*T+1),ne(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Ve(v){var U;return v&&v.state?(v.total_in=v.total_out=0,v.data_type=y,(U=v.state).pending=0,U.pending_out=0,U.wrap<0&&(U.wrap=-U.wrap),U.status=U.wrap?S:k,v.adler=U.wrap===2?0:1,U.last_flush=c,i._tr_init(U),p):ge(v,h)}function En(v){var U=Ve(v);return U===p&&(function(F){F.window_size=2*F.w_size,ne(F.head),F.max_lazy_match=r[F.level].max_lazy,F.good_match=r[F.level].good_length,F.nice_match=r[F.level].nice_length,F.max_chain_length=r[F.level].max_chain,F.strstart=0,F.block_start=0,F.lookahead=0,F.insert=0,F.match_length=F.prev_length=R-1,F.match_available=0,F.ins_h=0})(v.state),U}function Yt(v,U,F,w,I,M){if(!v)return h;var V=1;if(U===g&&(U=6),w<0?(V=0,w=-w):15<w&&(V=2,w-=16),I<1||C<I||F!==E||w<8||15<w||U<0||9<U||M<0||m<M)return ge(v,h);w===8&&(w=9);var $=new Ze;return(v.state=$).strm=v,$.wrap=V,$.gzhead=null,$.w_bits=w,$.w_size=1<<$.w_bits,$.w_mask=$.w_size-1,$.hash_bits=I+7,$.hash_size=1<<$.hash_bits,$.hash_mask=$.hash_size-1,$.hash_shift=~~(($.hash_bits+R-1)/R),$.window=new o.Buf8(2*$.w_size),$.head=new o.Buf16($.hash_size),$.prev=new o.Buf16($.w_size),$.lit_bufsize=1<<I+6,$.pending_buf_size=4*$.lit_bufsize,$.pending_buf=new o.Buf8($.pending_buf_size),$.d_buf=1*$.lit_bufsize,$.l_buf=3*$.lit_bufsize,$.level=U,$.strategy=M,$.method=F,En(v)}r=[new be(0,0,0,0,function(v,U){var F=65535;for(F>v.pending_buf_size-5&&(F=v.pending_buf_size-5);;){if(v.lookahead<=1){if(Be(v),v.lookahead===0&&U===c)return _;if(v.lookahead===0)break}v.strstart+=v.lookahead,v.lookahead=0;var w=v.block_start+F;if((v.strstart===0||v.strstart>=w)&&(v.lookahead=v.strstart-w,v.strstart=w,x(v,!1),v.strm.avail_out===0)||v.strstart-v.block_start>=v.w_size-G&&(x(v,!1),v.strm.avail_out===0))return _}return v.insert=0,U===f?(x(v,!0),v.strm.avail_out===0?ee:H):(v.strstart>v.block_start&&(x(v,!1),v.strm.avail_out),_)}),new be(4,4,8,4,lt),new be(4,5,16,8,lt),new be(4,6,32,32,lt),new be(4,4,16,16,Ee),new be(8,16,32,32,Ee),new be(8,16,128,128,Ee),new be(8,32,128,256,Ee),new be(32,128,258,1024,Ee),new be(32,258,258,4096,Ee)],n.deflateInit=function(v,U){return Yt(v,U,E,15,8,0)},n.deflateInit2=Yt,n.deflateReset=En,n.deflateResetKeep=Ve,n.deflateSetHeader=function(v,U){return v&&v.state?v.state.wrap!==2?h:(v.state.gzhead=U,p):h},n.deflate=function(v,U){var F,w,I,M;if(!v||!v.state||5<U||U<0)return v?ge(v,h):h;if(w=v.state,!v.output||!v.input&&v.avail_in!==0||w.status===666&&U!==f)return ge(v,v.avail_out===0?-5:h);if(w.strm=v,F=w.last_flush,w.last_flush=U,w.status===S)if(w.wrap===2)v.adler=0,le(w,31),le(w,139),le(w,8),w.gzhead?(le(w,(w.gzhead.text?1:0)+(w.gzhead.hcrc?2:0)+(w.gzhead.extra?4:0)+(w.gzhead.name?8:0)+(w.gzhead.comment?16:0)),le(w,255&w.gzhead.time),le(w,w.gzhead.time>>8&255),le(w,w.gzhead.time>>16&255),le(w,w.gzhead.time>>24&255),le(w,w.level===9?2:2<=w.strategy||w.level<2?4:0),le(w,255&w.gzhead.os),w.gzhead.extra&&w.gzhead.extra.length&&(le(w,255&w.gzhead.extra.length),le(w,w.gzhead.extra.length>>8&255)),w.gzhead.hcrc&&(v.adler=a(v.adler,w.pending_buf,w.pending,0)),w.gzindex=0,w.status=69):(le(w,0),le(w,0),le(w,0),le(w,0),le(w,0),le(w,w.level===9?2:2<=w.strategy||w.level<2?4:0),le(w,3),w.status=k);else{var V=E+(w.w_bits-8<<4)<<8;V|=(2<=w.strategy||w.level<2?0:w.level<6?1:w.level===6?2:3)<<6,w.strstart!==0&&(V|=32),V+=31-V%31,w.status=k,K(w,V),w.strstart!==0&&(K(w,v.adler>>>16),K(w,65535&v.adler)),v.adler=1}if(w.status===69)if(w.gzhead.extra){for(I=w.pending;w.gzindex<(65535&w.gzhead.extra.length)&&(w.pending!==w.pending_buf_size||(w.gzhead.hcrc&&w.pending>I&&(v.adler=a(v.adler,w.pending_buf,w.pending-I,I)),P(v),I=w.pending,w.pending!==w.pending_buf_size));)le(w,255&w.gzhead.extra[w.gzindex]),w.gzindex++;w.gzhead.hcrc&&w.pending>I&&(v.adler=a(v.adler,w.pending_buf,w.pending-I,I)),w.gzindex===w.gzhead.extra.length&&(w.gzindex=0,w.status=73)}else w.status=73;if(w.status===73)if(w.gzhead.name){I=w.pending;do{if(w.pending===w.pending_buf_size&&(w.gzhead.hcrc&&w.pending>I&&(v.adler=a(v.adler,w.pending_buf,w.pending-I,I)),P(v),I=w.pending,w.pending===w.pending_buf_size)){M=1;break}M=w.gzindex<w.gzhead.name.length?255&w.gzhead.name.charCodeAt(w.gzindex++):0,le(w,M)}while(M!==0);w.gzhead.hcrc&&w.pending>I&&(v.adler=a(v.adler,w.pending_buf,w.pending-I,I)),M===0&&(w.gzindex=0,w.status=91)}else w.status=91;if(w.status===91)if(w.gzhead.comment){I=w.pending;do{if(w.pending===w.pending_buf_size&&(w.gzhead.hcrc&&w.pending>I&&(v.adler=a(v.adler,w.pending_buf,w.pending-I,I)),P(v),I=w.pending,w.pending===w.pending_buf_size)){M=1;break}M=w.gzindex<w.gzhead.comment.length?255&w.gzhead.comment.charCodeAt(w.gzindex++):0,le(w,M)}while(M!==0);w.gzhead.hcrc&&w.pending>I&&(v.adler=a(v.adler,w.pending_buf,w.pending-I,I)),M===0&&(w.status=103)}else w.status=103;if(w.status===103&&(w.gzhead.hcrc?(w.pending+2>w.pending_buf_size&&P(v),w.pending+2<=w.pending_buf_size&&(le(w,255&v.adler),le(w,v.adler>>8&255),v.adler=0,w.status=k)):w.status=k),w.pending!==0){if(P(v),v.avail_out===0)return w.last_flush=-1,p}else if(v.avail_in===0&&q(U)<=q(F)&&U!==f)return ge(v,-5);if(w.status===666&&v.avail_in!==0)return ge(v,-5);if(v.avail_in!==0||w.lookahead!==0||U!==c&&w.status!==666){var $=w.strategy===2?(function(N,j){for(var Q;;){if(N.lookahead===0&&(Be(N),N.lookahead===0)){if(j===c)return _;break}if(N.match_length=0,Q=i._tr_tally(N,0,N.window[N.strstart]),N.lookahead--,N.strstart++,Q&&(x(N,!1),N.strm.avail_out===0))return _}return N.insert=0,j===f?(x(N,!0),N.strm.avail_out===0?ee:H):N.last_lit&&(x(N,!1),N.strm.avail_out===0)?_:L})(w,U):w.strategy===3?(function(N,j){for(var Q,W,oe,Oe,_e=N.window;;){if(N.lookahead<=B){if(Be(N),N.lookahead<=B&&j===c)return _;if(N.lookahead===0)break}if(N.match_length=0,N.lookahead>=R&&0<N.strstart&&(W=_e[oe=N.strstart-1])===_e[++oe]&&W===_e[++oe]&&W===_e[++oe]){Oe=N.strstart+B;do;while(W===_e[++oe]&&W===_e[++oe]&&W===_e[++oe]&&W===_e[++oe]&&W===_e[++oe]&&W===_e[++oe]&&W===_e[++oe]&&W===_e[++oe]&&oe<Oe);N.match_length=B-(Oe-oe),N.match_length>N.lookahead&&(N.match_length=N.lookahead)}if(N.match_length>=R?(Q=i._tr_tally(N,1,N.match_length-R),N.lookahead-=N.match_length,N.strstart+=N.match_length,N.match_length=0):(Q=i._tr_tally(N,0,N.window[N.strstart]),N.lookahead--,N.strstart++),Q&&(x(N,!1),N.strm.avail_out===0))return _}return N.insert=0,j===f?(x(N,!0),N.strm.avail_out===0?ee:H):N.last_lit&&(x(N,!1),N.strm.avail_out===0)?_:L})(w,U):r[w.level].func(w,U);if($!==ee&&$!==H||(w.status=666),$===_||$===ee)return v.avail_out===0&&(w.last_flush=-1),p;if($===L&&(U===1?i._tr_align(w):U!==5&&(i._tr_stored_block(w,0,0,!1),U===3&&(ne(w.head),w.lookahead===0&&(w.strstart=0,w.block_start=0,w.insert=0))),P(v),v.avail_out===0))return w.last_flush=-1,p}return U!==f?p:w.wrap<=0?1:(w.wrap===2?(le(w,255&v.adler),le(w,v.adler>>8&255),le(w,v.adler>>16&255),le(w,v.adler>>24&255),le(w,255&v.total_in),le(w,v.total_in>>8&255),le(w,v.total_in>>16&255),le(w,v.total_in>>24&255)):(K(w,v.adler>>>16),K(w,65535&v.adler)),P(v),0<w.wrap&&(w.wrap=-w.wrap),w.pending!==0?p:1)},n.deflateEnd=function(v){var U;return v&&v.state?(U=v.state.status)!==S&&U!==69&&U!==73&&U!==91&&U!==103&&U!==k&&U!==666?ge(v,h):(v.state=null,U===k?ge(v,-3):p):h},n.deflateSetDictionary=function(v,U){var F,w,I,M,V,$,N,j,Q=U.length;if(!v||!v.state||(M=(F=v.state).wrap)===2||M===1&&F.status!==S||F.lookahead)return h;for(M===1&&(v.adler=s(v.adler,U,Q,0)),F.wrap=0,Q>=F.w_size&&(M===0&&(ne(F.head),F.strstart=0,F.block_start=0,F.insert=0),j=new o.Buf8(F.w_size),o.arraySet(j,U,Q-F.w_size,F.w_size,0),U=j,Q=F.w_size),V=v.avail_in,$=v.next_in,N=v.input,v.avail_in=Q,v.next_in=0,v.input=U,Be(F);F.lookahead>=R;){for(w=F.strstart,I=F.lookahead-(R-1);F.ins_h=(F.ins_h<<F.hash_shift^F.window[w+R-1])&F.hash_mask,F.prev[w&F.w_mask]=F.head[F.ins_h],F.head[F.ins_h]=w,w++,--I;);F.strstart=w,F.lookahead=R-1,Be(F)}return F.strstart+=F.lookahead,F.block_start=F.strstart,F.insert=F.lookahead,F.lookahead=0,F.match_length=F.prev_length=R-1,F.match_available=0,v.next_in=$,v.input=N,v.avail_in=V,F.wrap=M,p},n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,t,n){"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,t,n){"use strict";t.exports=function(r,o){var i,s,a,l,c,f,p,h,g,m,y,E,C,T,D,A,b,O,R,B,G,S,k,_,L;i=r.state,s=r.next_in,_=r.input,a=s+(r.avail_in-5),l=r.next_out,L=r.output,c=l-(o-r.avail_out),f=l+(r.avail_out-257),p=i.dmax,h=i.wsize,g=i.whave,m=i.wnext,y=i.window,E=i.hold,C=i.bits,T=i.lencode,D=i.distcode,A=(1<<i.lenbits)-1,b=(1<<i.distbits)-1;e:do{C<15&&(E+=_[s++]<<C,C+=8,E+=_[s++]<<C,C+=8),O=T[E&A];t:for(;;){if(E>>>=R=O>>>24,C-=R,(R=O>>>16&255)===0)L[l++]=65535&O;else{if(!(16&R)){if((64&R)==0){O=T[(65535&O)+(E&(1<<R)-1)];continue t}if(32&R){i.mode=12;break e}r.msg="invalid literal/length code",i.mode=30;break e}B=65535&O,(R&=15)&&(C<R&&(E+=_[s++]<<C,C+=8),B+=E&(1<<R)-1,E>>>=R,C-=R),C<15&&(E+=_[s++]<<C,C+=8,E+=_[s++]<<C,C+=8),O=D[E&b];n:for(;;){if(E>>>=R=O>>>24,C-=R,!(16&(R=O>>>16&255))){if((64&R)==0){O=D[(65535&O)+(E&(1<<R)-1)];continue n}r.msg="invalid distance code",i.mode=30;break e}if(G=65535&O,C<(R&=15)&&(E+=_[s++]<<C,(C+=8)<R&&(E+=_[s++]<<C,C+=8)),p<(G+=E&(1<<R)-1)){r.msg="invalid distance too far back",i.mode=30;break e}if(E>>>=R,C-=R,(R=l-c)<G){if(g<(R=G-R)&&i.sane){r.msg="invalid distance too far back",i.mode=30;break e}if(k=y,(S=0)===m){if(S+=h-R,R<B){for(B-=R;L[l++]=y[S++],--R;);S=l-G,k=L}}else if(m<R){if(S+=h+m-R,(R-=m)<B){for(B-=R;L[l++]=y[S++],--R;);if(S=0,m<B){for(B-=R=m;L[l++]=y[S++],--R;);S=l-G,k=L}}}else if(S+=m-R,R<B){for(B-=R;L[l++]=y[S++],--R;);S=l-G,k=L}for(;2<B;)L[l++]=k[S++],L[l++]=k[S++],L[l++]=k[S++],B-=3;B&&(L[l++]=k[S++],1<B&&(L[l++]=k[S++]))}else{for(S=l-G;L[l++]=L[S++],L[l++]=L[S++],L[l++]=L[S++],2<(B-=3););B&&(L[l++]=L[S++],1<B&&(L[l++]=L[S++]))}break}}break}}while(s<a&&l<f);s-=B=C>>3,E&=(1<<(C-=B<<3))-1,r.next_in=s,r.next_out=l,r.avail_in=s<a?a-s+5:5-(s-a),r.avail_out=l<f?f-l+257:257-(l-f),i.hold=E,i.bits=C}},{}],49:[function(e,t,n){"use strict";var r=e("../utils/common"),o=e("./adler32"),i=e("./crc32"),s=e("./inffast"),a=e("./inftrees"),l=1,c=2,f=0,p=-2,h=1,g=852,m=592;function y(S){return(S>>>24&255)+(S>>>8&65280)+((65280&S)<<8)+((255&S)<<24)}function E(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function C(S){var k;return S&&S.state?(k=S.state,S.total_in=S.total_out=k.total=0,S.msg="",k.wrap&&(S.adler=1&k.wrap),k.mode=h,k.last=0,k.havedict=0,k.dmax=32768,k.head=null,k.hold=0,k.bits=0,k.lencode=k.lendyn=new r.Buf32(g),k.distcode=k.distdyn=new r.Buf32(m),k.sane=1,k.back=-1,f):p}function T(S){var k;return S&&S.state?((k=S.state).wsize=0,k.whave=0,k.wnext=0,C(S)):p}function D(S,k){var _,L;return S&&S.state?(L=S.state,k<0?(_=0,k=-k):(_=1+(k>>4),k<48&&(k&=15)),k&&(k<8||15<k)?p:(L.window!==null&&L.wbits!==k&&(L.window=null),L.wrap=_,L.wbits=k,T(S))):p}function A(S,k){var _,L;return S?(L=new E,(S.state=L).window=null,(_=D(S,k))!==f&&(S.state=null),_):p}var b,O,R=!0;function B(S){if(R){var k;for(b=new r.Buf32(512),O=new r.Buf32(32),k=0;k<144;)S.lens[k++]=8;for(;k<256;)S.lens[k++]=9;for(;k<280;)S.lens[k++]=7;for(;k<288;)S.lens[k++]=8;for(a(l,S.lens,0,288,b,0,S.work,{bits:9}),k=0;k<32;)S.lens[k++]=5;a(c,S.lens,0,32,O,0,S.work,{bits:5}),R=!1}S.lencode=b,S.lenbits=9,S.distcode=O,S.distbits=5}function G(S,k,_,L){var ee,H=S.state;return H.window===null&&(H.wsize=1<<H.wbits,H.wnext=0,H.whave=0,H.window=new r.Buf8(H.wsize)),L>=H.wsize?(r.arraySet(H.window,k,_-H.wsize,H.wsize,0),H.wnext=0,H.whave=H.wsize):(L<(ee=H.wsize-H.wnext)&&(ee=L),r.arraySet(H.window,k,_-L,ee,H.wnext),(L-=ee)?(r.arraySet(H.window,k,_-L,L,0),H.wnext=L,H.whave=H.wsize):(H.wnext+=ee,H.wnext===H.wsize&&(H.wnext=0),H.whave<H.wsize&&(H.whave+=ee))),0}n.inflateReset=T,n.inflateReset2=D,n.inflateResetKeep=C,n.inflateInit=function(S){return A(S,15)},n.inflateInit2=A,n.inflate=function(S,k){var _,L,ee,H,ge,q,ne,P,x,le,K,J,Be,lt,Ee,be,Ze,Ve,En,Yt,v,U,F,w,I=0,M=new r.Buf8(4),V=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!S||!S.state||!S.output||!S.input&&S.avail_in!==0)return p;(_=S.state).mode===12&&(_.mode=13),ge=S.next_out,ee=S.output,ne=S.avail_out,H=S.next_in,L=S.input,q=S.avail_in,P=_.hold,x=_.bits,le=q,K=ne,U=f;e:for(;;)switch(_.mode){case h:if(_.wrap===0){_.mode=13;break}for(;x<16;){if(q===0)break e;q--,P+=L[H++]<<x,x+=8}if(2&_.wrap&&P===35615){M[_.check=0]=255&P,M[1]=P>>>8&255,_.check=i(_.check,M,2,0),x=P=0,_.mode=2;break}if(_.flags=0,_.head&&(_.head.done=!1),!(1&_.wrap)||(((255&P)<<8)+(P>>8))%31){S.msg="incorrect header check",_.mode=30;break}if((15&P)!=8){S.msg="unknown compression method",_.mode=30;break}if(x-=4,v=8+(15&(P>>>=4)),_.wbits===0)_.wbits=v;else if(v>_.wbits){S.msg="invalid window size",_.mode=30;break}_.dmax=1<<v,S.adler=_.check=1,_.mode=512&P?10:12,x=P=0;break;case 2:for(;x<16;){if(q===0)break e;q--,P+=L[H++]<<x,x+=8}if(_.flags=P,(255&_.flags)!=8){S.msg="unknown compression method",_.mode=30;break}if(57344&_.flags){S.msg="unknown header flags set",_.mode=30;break}_.head&&(_.head.text=P>>8&1),512&_.flags&&(M[0]=255&P,M[1]=P>>>8&255,_.check=i(_.check,M,2,0)),x=P=0,_.mode=3;case 3:for(;x<32;){if(q===0)break e;q--,P+=L[H++]<<x,x+=8}_.head&&(_.head.time=P),512&_.flags&&(M[0]=255&P,M[1]=P>>>8&255,M[2]=P>>>16&255,M[3]=P>>>24&255,_.check=i(_.check,M,4,0)),x=P=0,_.mode=4;case 4:for(;x<16;){if(q===0)break e;q--,P+=L[H++]<<x,x+=8}_.head&&(_.head.xflags=255&P,_.head.os=P>>8),512&_.flags&&(M[0]=255&P,M[1]=P>>>8&255,_.check=i(_.check,M,2,0)),x=P=0,_.mode=5;case 5:if(1024&_.flags){for(;x<16;){if(q===0)break e;q--,P+=L[H++]<<x,x+=8}_.length=P,_.head&&(_.head.extra_len=P),512&_.flags&&(M[0]=255&P,M[1]=P>>>8&255,_.check=i(_.check,M,2,0)),x=P=0}else _.head&&(_.head.extra=null);_.mode=6;case 6:if(1024&_.flags&&(q<(J=_.length)&&(J=q),J&&(_.head&&(v=_.head.extra_len-_.length,_.head.extra||(_.head.extra=new Array(_.head.extra_len)),r.arraySet(_.head.extra,L,H,J,v)),512&_.flags&&(_.check=i(_.check,L,J,H)),q-=J,H+=J,_.length-=J),_.length))break e;_.length=0,_.mode=7;case 7:if(2048&_.flags){if(q===0)break e;for(J=0;v=L[H+J++],_.head&&v&&_.length<65536&&(_.head.name+=String.fromCharCode(v)),v&&J<q;);if(512&_.flags&&(_.check=i(_.check,L,J,H)),q-=J,H+=J,v)break e}else _.head&&(_.head.name=null);_.length=0,_.mode=8;case 8:if(4096&_.flags){if(q===0)break e;for(J=0;v=L[H+J++],_.head&&v&&_.length<65536&&(_.head.comment+=String.fromCharCode(v)),v&&J<q;);if(512&_.flags&&(_.check=i(_.check,L,J,H)),q-=J,H+=J,v)break e}else _.head&&(_.head.comment=null);_.mode=9;case 9:if(512&_.flags){for(;x<16;){if(q===0)break e;q--,P+=L[H++]<<x,x+=8}if(P!==(65535&_.check)){S.msg="header crc mismatch",_.mode=30;break}x=P=0}_.head&&(_.head.hcrc=_.flags>>9&1,_.head.done=!0),S.adler=_.check=0,_.mode=12;break;case 10:for(;x<32;){if(q===0)break e;q--,P+=L[H++]<<x,x+=8}S.adler=_.check=y(P),x=P=0,_.mode=11;case 11:if(_.havedict===0)return S.next_out=ge,S.avail_out=ne,S.next_in=H,S.avail_in=q,_.hold=P,_.bits=x,2;S.adler=_.check=1,_.mode=12;case 12:if(k===5||k===6)break e;case 13:if(_.last){P>>>=7&x,x-=7&x,_.mode=27;break}for(;x<3;){if(q===0)break e;q--,P+=L[H++]<<x,x+=8}switch(_.last=1&P,x-=1,3&(P>>>=1)){case 0:_.mode=14;break;case 1:if(B(_),_.mode=20,k!==6)break;P>>>=2,x-=2;break e;case 2:_.mode=17;break;case 3:S.msg="invalid block type",_.mode=30}P>>>=2,x-=2;break;case 14:for(P>>>=7&x,x-=7&x;x<32;){if(q===0)break e;q--,P+=L[H++]<<x,x+=8}if((65535&P)!=(P>>>16^65535)){S.msg="invalid stored block lengths",_.mode=30;break}if(_.length=65535&P,x=P=0,_.mode=15,k===6)break e;case 15:_.mode=16;case 16:if(J=_.length){if(q<J&&(J=q),ne<J&&(J=ne),J===0)break e;r.arraySet(ee,L,H,J,ge),q-=J,H+=J,ne-=J,ge+=J,_.length-=J;break}_.mode=12;break;case 17:for(;x<14;){if(q===0)break e;q--,P+=L[H++]<<x,x+=8}if(_.nlen=257+(31&P),P>>>=5,x-=5,_.ndist=1+(31&P),P>>>=5,x-=5,_.ncode=4+(15&P),P>>>=4,x-=4,286<_.nlen||30<_.ndist){S.msg="too many length or distance symbols",_.mode=30;break}_.have=0,_.mode=18;case 18:for(;_.have<_.ncode;){for(;x<3;){if(q===0)break e;q--,P+=L[H++]<<x,x+=8}_.lens[V[_.have++]]=7&P,P>>>=3,x-=3}for(;_.have<19;)_.lens[V[_.have++]]=0;if(_.lencode=_.lendyn,_.lenbits=7,F={bits:_.lenbits},U=a(0,_.lens,0,19,_.lencode,0,_.work,F),_.lenbits=F.bits,U){S.msg="invalid code lengths set",_.mode=30;break}_.have=0,_.mode=19;case 19:for(;_.have<_.nlen+_.ndist;){for(;be=(I=_.lencode[P&(1<<_.lenbits)-1])>>>16&255,Ze=65535&I,!((Ee=I>>>24)<=x);){if(q===0)break e;q--,P+=L[H++]<<x,x+=8}if(Ze<16)P>>>=Ee,x-=Ee,_.lens[_.have++]=Ze;else{if(Ze===16){for(w=Ee+2;x<w;){if(q===0)break e;q--,P+=L[H++]<<x,x+=8}if(P>>>=Ee,x-=Ee,_.have===0){S.msg="invalid bit length repeat",_.mode=30;break}v=_.lens[_.have-1],J=3+(3&P),P>>>=2,x-=2}else if(Ze===17){for(w=Ee+3;x<w;){if(q===0)break e;q--,P+=L[H++]<<x,x+=8}x-=Ee,v=0,J=3+(7&(P>>>=Ee)),P>>>=3,x-=3}else{for(w=Ee+7;x<w;){if(q===0)break e;q--,P+=L[H++]<<x,x+=8}x-=Ee,v=0,J=11+(127&(P>>>=Ee)),P>>>=7,x-=7}if(_.have+J>_.nlen+_.ndist){S.msg="invalid bit length repeat",_.mode=30;break}for(;J--;)_.lens[_.have++]=v}}if(_.mode===30)break;if(_.lens[256]===0){S.msg="invalid code -- missing end-of-block",_.mode=30;break}if(_.lenbits=9,F={bits:_.lenbits},U=a(l,_.lens,0,_.nlen,_.lencode,0,_.work,F),_.lenbits=F.bits,U){S.msg="invalid literal/lengths set",_.mode=30;break}if(_.distbits=6,_.distcode=_.distdyn,F={bits:_.distbits},U=a(c,_.lens,_.nlen,_.ndist,_.distcode,0,_.work,F),_.distbits=F.bits,U){S.msg="invalid distances set",_.mode=30;break}if(_.mode=20,k===6)break e;case 20:_.mode=21;case 21:if(6<=q&&258<=ne){S.next_out=ge,S.avail_out=ne,S.next_in=H,S.avail_in=q,_.hold=P,_.bits=x,s(S,K),ge=S.next_out,ee=S.output,ne=S.avail_out,H=S.next_in,L=S.input,q=S.avail_in,P=_.hold,x=_.bits,_.mode===12&&(_.back=-1);break}for(_.back=0;be=(I=_.lencode[P&(1<<_.lenbits)-1])>>>16&255,Ze=65535&I,!((Ee=I>>>24)<=x);){if(q===0)break e;q--,P+=L[H++]<<x,x+=8}if(be&&(240&be)==0){for(Ve=Ee,En=be,Yt=Ze;be=(I=_.lencode[Yt+((P&(1<<Ve+En)-1)>>Ve)])>>>16&255,Ze=65535&I,!(Ve+(Ee=I>>>24)<=x);){if(q===0)break e;q--,P+=L[H++]<<x,x+=8}P>>>=Ve,x-=Ve,_.back+=Ve}if(P>>>=Ee,x-=Ee,_.back+=Ee,_.length=Ze,be===0){_.mode=26;break}if(32&be){_.back=-1,_.mode=12;break}if(64&be){S.msg="invalid literal/length code",_.mode=30;break}_.extra=15&be,_.mode=22;case 22:if(_.extra){for(w=_.extra;x<w;){if(q===0)break e;q--,P+=L[H++]<<x,x+=8}_.length+=P&(1<<_.extra)-1,P>>>=_.extra,x-=_.extra,_.back+=_.extra}_.was=_.length,_.mode=23;case 23:for(;be=(I=_.distcode[P&(1<<_.distbits)-1])>>>16&255,Ze=65535&I,!((Ee=I>>>24)<=x);){if(q===0)break e;q--,P+=L[H++]<<x,x+=8}if((240&be)==0){for(Ve=Ee,En=be,Yt=Ze;be=(I=_.distcode[Yt+((P&(1<<Ve+En)-1)>>Ve)])>>>16&255,Ze=65535&I,!(Ve+(Ee=I>>>24)<=x);){if(q===0)break e;q--,P+=L[H++]<<x,x+=8}P>>>=Ve,x-=Ve,_.back+=Ve}if(P>>>=Ee,x-=Ee,_.back+=Ee,64&be){S.msg="invalid distance code",_.mode=30;break}_.offset=Ze,_.extra=15&be,_.mode=24;case 24:if(_.extra){for(w=_.extra;x<w;){if(q===0)break e;q--,P+=L[H++]<<x,x+=8}_.offset+=P&(1<<_.extra)-1,P>>>=_.extra,x-=_.extra,_.back+=_.extra}if(_.offset>_.dmax){S.msg="invalid distance too far back",_.mode=30;break}_.mode=25;case 25:if(ne===0)break e;if(J=K-ne,_.offset>J){if((J=_.offset-J)>_.whave&&_.sane){S.msg="invalid distance too far back",_.mode=30;break}Be=J>_.wnext?(J-=_.wnext,_.wsize-J):_.wnext-J,J>_.length&&(J=_.length),lt=_.window}else lt=ee,Be=ge-_.offset,J=_.length;for(ne<J&&(J=ne),ne-=J,_.length-=J;ee[ge++]=lt[Be++],--J;);_.length===0&&(_.mode=21);break;case 26:if(ne===0)break e;ee[ge++]=_.length,ne--,_.mode=21;break;case 27:if(_.wrap){for(;x<32;){if(q===0)break e;q--,P|=L[H++]<<x,x+=8}if(K-=ne,S.total_out+=K,_.total+=K,K&&(S.adler=_.check=_.flags?i(_.check,ee,K,ge-K):o(_.check,ee,K,ge-K)),K=ne,(_.flags?P:y(P))!==_.check){S.msg="incorrect data check",_.mode=30;break}x=P=0}_.mode=28;case 28:if(_.wrap&&_.flags){for(;x<32;){if(q===0)break e;q--,P+=L[H++]<<x,x+=8}if(P!==(4294967295&_.total)){S.msg="incorrect length check",_.mode=30;break}x=P=0}_.mode=29;case 29:U=1;break e;case 30:U=-3;break e;case 31:return-4;default:return p}return S.next_out=ge,S.avail_out=ne,S.next_in=H,S.avail_in=q,_.hold=P,_.bits=x,(_.wsize||K!==S.avail_out&&_.mode<30&&(_.mode<27||k!==4))&&G(S,S.output,S.next_out,K-S.avail_out)?(_.mode=31,-4):(le-=S.avail_in,K-=S.avail_out,S.total_in+=le,S.total_out+=K,_.total+=K,_.wrap&&K&&(S.adler=_.check=_.flags?i(_.check,ee,K,S.next_out-K):o(_.check,ee,K,S.next_out-K)),S.data_type=_.bits+(_.last?64:0)+(_.mode===12?128:0)+(_.mode===20||_.mode===15?256:0),(le==0&&K===0||k===4)&&U===f&&(U=-5),U)},n.inflateEnd=function(S){if(!S||!S.state)return p;var k=S.state;return k.window&&(k.window=null),S.state=null,f},n.inflateGetHeader=function(S,k){var _;return S&&S.state?(2&(_=S.state).wrap)==0?p:((_.head=k).done=!1,f):p},n.inflateSetDictionary=function(S,k){var _,L=k.length;return S&&S.state?(_=S.state).wrap!==0&&_.mode!==11?p:_.mode===11&&o(1,k,L,0)!==_.check?-3:G(S,k,L,L)?(_.mode=31,-4):(_.havedict=1,f):p},n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,t,n){"use strict";var r=e("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],i=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],a=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(l,c,f,p,h,g,m,y){var E,C,T,D,A,b,O,R,B,G=y.bits,S=0,k=0,_=0,L=0,ee=0,H=0,ge=0,q=0,ne=0,P=0,x=null,le=0,K=new r.Buf16(16),J=new r.Buf16(16),Be=null,lt=0;for(S=0;S<=15;S++)K[S]=0;for(k=0;k<p;k++)K[c[f+k]]++;for(ee=G,L=15;1<=L&&K[L]===0;L--);if(L<ee&&(ee=L),L===0)return h[g++]=20971520,h[g++]=20971520,y.bits=1,0;for(_=1;_<L&&K[_]===0;_++);for(ee<_&&(ee=_),S=q=1;S<=15;S++)if(q<<=1,(q-=K[S])<0)return-1;if(0<q&&(l===0||L!==1))return-1;for(J[1]=0,S=1;S<15;S++)J[S+1]=J[S]+K[S];for(k=0;k<p;k++)c[f+k]!==0&&(m[J[c[f+k]]++]=k);if(b=l===0?(x=Be=m,19):l===1?(x=o,le-=257,Be=i,lt-=257,256):(x=s,Be=a,-1),S=_,A=g,ge=k=P=0,T=-1,D=(ne=1<<(H=ee))-1,l===1&&852<ne||l===2&&592<ne)return 1;for(;;){for(O=S-ge,B=m[k]<b?(R=0,m[k]):m[k]>b?(R=Be[lt+m[k]],x[le+m[k]]):(R=96,0),E=1<<S-ge,_=C=1<<H;h[A+(P>>ge)+(C-=E)]=O<<24|R<<16|B|0,C!==0;);for(E=1<<S-1;P&E;)E>>=1;if(E!==0?(P&=E-1,P+=E):P=0,k++,--K[S]==0){if(S===L)break;S=c[f+m[k]]}if(ee<S&&(P&D)!==T){for(ge===0&&(ge=ee),A+=_,q=1<<(H=S-ge);H+ge<L&&!((q-=K[H+ge])<=0);)H++,q<<=1;if(ne+=1<<H,l===1&&852<ne||l===2&&592<ne)return 1;h[T=P&D]=ee<<24|H<<16|A-g|0}}return P!==0&&(h[A+P]=S-ge<<24|64<<16|0),y.bits=ee,0}},{"../utils/common":41}],51:[function(e,t,n){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,t,n){"use strict";var r=e("../utils/common"),o=0,i=1;function s(I){for(var M=I.length;0<=--M;)I[M]=0}var a=0,l=29,c=256,f=c+1+l,p=30,h=19,g=2*f+1,m=15,y=16,E=7,C=256,T=16,D=17,A=18,b=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],O=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],R=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],B=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],G=new Array(2*(f+2));s(G);var S=new Array(2*p);s(S);var k=new Array(512);s(k);var _=new Array(256);s(_);var L=new Array(l);s(L);var ee,H,ge,q=new Array(p);function ne(I,M,V,$,N){this.static_tree=I,this.extra_bits=M,this.extra_base=V,this.elems=$,this.max_length=N,this.has_stree=I&&I.length}function P(I,M){this.dyn_tree=I,this.max_code=0,this.stat_desc=M}function x(I){return I<256?k[I]:k[256+(I>>>7)]}function le(I,M){I.pending_buf[I.pending++]=255&M,I.pending_buf[I.pending++]=M>>>8&255}function K(I,M,V){I.bi_valid>y-V?(I.bi_buf|=M<<I.bi_valid&65535,le(I,I.bi_buf),I.bi_buf=M>>y-I.bi_valid,I.bi_valid+=V-y):(I.bi_buf|=M<<I.bi_valid&65535,I.bi_valid+=V)}function J(I,M,V){K(I,V[2*M],V[2*M+1])}function Be(I,M){for(var V=0;V|=1&I,I>>>=1,V<<=1,0<--M;);return V>>>1}function lt(I,M,V){var $,N,j=new Array(m+1),Q=0;for($=1;$<=m;$++)j[$]=Q=Q+V[$-1]<<1;for(N=0;N<=M;N++){var W=I[2*N+1];W!==0&&(I[2*N]=Be(j[W]++,W))}}function Ee(I){var M;for(M=0;M<f;M++)I.dyn_ltree[2*M]=0;for(M=0;M<p;M++)I.dyn_dtree[2*M]=0;for(M=0;M<h;M++)I.bl_tree[2*M]=0;I.dyn_ltree[2*C]=1,I.opt_len=I.static_len=0,I.last_lit=I.matches=0}function be(I){8<I.bi_valid?le(I,I.bi_buf):0<I.bi_valid&&(I.pending_buf[I.pending++]=I.bi_buf),I.bi_buf=0,I.bi_valid=0}function Ze(I,M,V,$){var N=2*M,j=2*V;return I[N]<I[j]||I[N]===I[j]&&$[M]<=$[V]}function Ve(I,M,V){for(var $=I.heap[V],N=V<<1;N<=I.heap_len&&(N<I.heap_len&&Ze(M,I.heap[N+1],I.heap[N],I.depth)&&N++,!Ze(M,$,I.heap[N],I.depth));)I.heap[V]=I.heap[N],V=N,N<<=1;I.heap[V]=$}function En(I,M,V){var $,N,j,Q,W=0;if(I.last_lit!==0)for(;$=I.pending_buf[I.d_buf+2*W]<<8|I.pending_buf[I.d_buf+2*W+1],N=I.pending_buf[I.l_buf+W],W++,$===0?J(I,N,M):(J(I,(j=_[N])+c+1,M),(Q=b[j])!==0&&K(I,N-=L[j],Q),J(I,j=x(--$),V),(Q=O[j])!==0&&K(I,$-=q[j],Q)),W<I.last_lit;);J(I,C,M)}function Yt(I,M){var V,$,N,j=M.dyn_tree,Q=M.stat_desc.static_tree,W=M.stat_desc.has_stree,oe=M.stat_desc.elems,Oe=-1;for(I.heap_len=0,I.heap_max=g,V=0;V<oe;V++)j[2*V]!==0?(I.heap[++I.heap_len]=Oe=V,I.depth[V]=0):j[2*V+1]=0;for(;I.heap_len<2;)j[2*(N=I.heap[++I.heap_len]=Oe<2?++Oe:0)]=1,I.depth[N]=0,I.opt_len--,W&&(I.static_len-=Q[2*N+1]);for(M.max_code=Oe,V=I.heap_len>>1;1<=V;V--)Ve(I,j,V);for(N=oe;V=I.heap[1],I.heap[1]=I.heap[I.heap_len--],Ve(I,j,1),$=I.heap[1],I.heap[--I.heap_max]=V,I.heap[--I.heap_max]=$,j[2*N]=j[2*V]+j[2*$],I.depth[N]=(I.depth[V]>=I.depth[$]?I.depth[V]:I.depth[$])+1,j[2*V+1]=j[2*$+1]=N,I.heap[1]=N++,Ve(I,j,1),2<=I.heap_len;);I.heap[--I.heap_max]=I.heap[1],(function(_e,Lt){var ii,_n,si,He,Ls,nc,xn=Lt.dyn_tree,Kh=Lt.max_code,jC=Lt.stat_desc.static_tree,WC=Lt.stat_desc.has_stree,JC=Lt.stat_desc.extra_bits,Qh=Lt.stat_desc.extra_base,ai=Lt.stat_desc.max_length,Us=0;for(He=0;He<=m;He++)_e.bl_count[He]=0;for(xn[2*_e.heap[_e.heap_max]+1]=0,ii=_e.heap_max+1;ii<g;ii++)ai<(He=xn[2*xn[2*(_n=_e.heap[ii])+1]+1]+1)&&(He=ai,Us++),xn[2*_n+1]=He,Kh<_n||(_e.bl_count[He]++,Ls=0,Qh<=_n&&(Ls=JC[_n-Qh]),nc=xn[2*_n],_e.opt_len+=nc*(He+Ls),WC&&(_e.static_len+=nc*(jC[2*_n+1]+Ls)));if(Us!==0){do{for(He=ai-1;_e.bl_count[He]===0;)He--;_e.bl_count[He]--,_e.bl_count[He+1]+=2,_e.bl_count[ai]--,Us-=2}while(0<Us);for(He=ai;He!==0;He--)for(_n=_e.bl_count[He];_n!==0;)Kh<(si=_e.heap[--ii])||(xn[2*si+1]!==He&&(_e.opt_len+=(He-xn[2*si+1])*xn[2*si],xn[2*si+1]=He),_n--)}})(I,M),lt(j,Oe,I.bl_count)}function v(I,M,V){var $,N,j=-1,Q=M[1],W=0,oe=7,Oe=4;for(Q===0&&(oe=138,Oe=3),M[2*(V+1)+1]=65535,$=0;$<=V;$++)N=Q,Q=M[2*($+1)+1],++W<oe&&N===Q||(W<Oe?I.bl_tree[2*N]+=W:N!==0?(N!==j&&I.bl_tree[2*N]++,I.bl_tree[2*T]++):W<=10?I.bl_tree[2*D]++:I.bl_tree[2*A]++,j=N,Oe=(W=0)===Q?(oe=138,3):N===Q?(oe=6,3):(oe=7,4))}function U(I,M,V){var $,N,j=-1,Q=M[1],W=0,oe=7,Oe=4;for(Q===0&&(oe=138,Oe=3),$=0;$<=V;$++)if(N=Q,Q=M[2*($+1)+1],!(++W<oe&&N===Q)){if(W<Oe)for(;J(I,N,I.bl_tree),--W!=0;);else N!==0?(N!==j&&(J(I,N,I.bl_tree),W--),J(I,T,I.bl_tree),K(I,W-3,2)):W<=10?(J(I,D,I.bl_tree),K(I,W-3,3)):(J(I,A,I.bl_tree),K(I,W-11,7));j=N,Oe=(W=0)===Q?(oe=138,3):N===Q?(oe=6,3):(oe=7,4)}}s(q);var F=!1;function w(I,M,V,$){K(I,(a<<1)+($?1:0),3),(function(N,j,Q,W){be(N),W&&(le(N,Q),le(N,~Q)),r.arraySet(N.pending_buf,N.window,j,Q,N.pending),N.pending+=Q})(I,M,V,!0)}n._tr_init=function(I){F||((function(){var M,V,$,N,j,Q=new Array(m+1);for(N=$=0;N<l-1;N++)for(L[N]=$,M=0;M<1<<b[N];M++)_[$++]=N;for(_[$-1]=N,N=j=0;N<16;N++)for(q[N]=j,M=0;M<1<<O[N];M++)k[j++]=N;for(j>>=7;N<p;N++)for(q[N]=j<<7,M=0;M<1<<O[N]-7;M++)k[256+j++]=N;for(V=0;V<=m;V++)Q[V]=0;for(M=0;M<=143;)G[2*M+1]=8,M++,Q[8]++;for(;M<=255;)G[2*M+1]=9,M++,Q[9]++;for(;M<=279;)G[2*M+1]=7,M++,Q[7]++;for(;M<=287;)G[2*M+1]=8,M++,Q[8]++;for(lt(G,f+1,Q),M=0;M<p;M++)S[2*M+1]=5,S[2*M]=Be(M,5);ee=new ne(G,b,c+1,f,m),H=new ne(S,O,0,p,m),ge=new ne(new Array(0),R,0,h,E)})(),F=!0),I.l_desc=new P(I.dyn_ltree,ee),I.d_desc=new P(I.dyn_dtree,H),I.bl_desc=new P(I.bl_tree,ge),I.bi_buf=0,I.bi_valid=0,Ee(I)},n._tr_stored_block=w,n._tr_flush_block=function(I,M,V,$){var N,j,Q=0;0<I.level?(I.strm.data_type===2&&(I.strm.data_type=(function(W){var oe,Oe=4093624447;for(oe=0;oe<=31;oe++,Oe>>>=1)if(1&Oe&&W.dyn_ltree[2*oe]!==0)return o;if(W.dyn_ltree[18]!==0||W.dyn_ltree[20]!==0||W.dyn_ltree[26]!==0)return i;for(oe=32;oe<c;oe++)if(W.dyn_ltree[2*oe]!==0)return i;return o})(I)),Yt(I,I.l_desc),Yt(I,I.d_desc),Q=(function(W){var oe;for(v(W,W.dyn_ltree,W.l_desc.max_code),v(W,W.dyn_dtree,W.d_desc.max_code),Yt(W,W.bl_desc),oe=h-1;3<=oe&&W.bl_tree[2*B[oe]+1]===0;oe--);return W.opt_len+=3*(oe+1)+5+5+4,oe})(I),N=I.opt_len+3+7>>>3,(j=I.static_len+3+7>>>3)<=N&&(N=j)):N=j=V+5,V+4<=N&&M!==-1?w(I,M,V,$):I.strategy===4||j===N?(K(I,2+($?1:0),3),En(I,G,S)):(K(I,4+($?1:0),3),(function(W,oe,Oe,_e){var Lt;for(K(W,oe-257,5),K(W,Oe-1,5),K(W,_e-4,4),Lt=0;Lt<_e;Lt++)K(W,W.bl_tree[2*B[Lt]+1],3);U(W,W.dyn_ltree,oe-1),U(W,W.dyn_dtree,Oe-1)})(I,I.l_desc.max_code+1,I.d_desc.max_code+1,Q+1),En(I,I.dyn_ltree,I.dyn_dtree)),Ee(I),$&&be(I)},n._tr_tally=function(I,M,V){return I.pending_buf[I.d_buf+2*I.last_lit]=M>>>8&255,I.pending_buf[I.d_buf+2*I.last_lit+1]=255&M,I.pending_buf[I.l_buf+I.last_lit]=255&V,I.last_lit++,M===0?I.dyn_ltree[2*V]++:(I.matches++,M--,I.dyn_ltree[2*(_[V]+c+1)]++,I.dyn_dtree[2*x(M)]++),I.last_lit===I.lit_bufsize-1},n._tr_align=function(I){K(I,2,3),J(I,C,G),(function(M){M.bi_valid===16?(le(M,M.bi_buf),M.bi_buf=0,M.bi_valid=0):8<=M.bi_valid&&(M.pending_buf[M.pending++]=255&M.bi_buf,M.bi_buf>>=8,M.bi_valid-=8)})(I)}},{"../utils/common":41}],53:[function(e,t,n){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,t,n){(function(r){(function(o,i){"use strict";if(!o.setImmediate){var s,a,l,c,f=1,p={},h=!1,g=o.document,m=Object.getPrototypeOf&&Object.getPrototypeOf(o);m=m&&m.setTimeout?m:o,s={}.toString.call(o.process)==="[object process]"?function(T){process.nextTick(function(){E(T)})}:(function(){if(o.postMessage&&!o.importScripts){var T=!0,D=o.onmessage;return o.onmessage=function(){T=!1},o.postMessage("","*"),o.onmessage=D,T}})()?(c="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",C,!1):o.attachEvent("onmessage",C),function(T){o.postMessage(c+T,"*")}):o.MessageChannel?((l=new MessageChannel).port1.onmessage=function(T){E(T.data)},function(T){l.port2.postMessage(T)}):g&&"onreadystatechange"in g.createElement("script")?(a=g.documentElement,function(T){var D=g.createElement("script");D.onreadystatechange=function(){E(T),D.onreadystatechange=null,a.removeChild(D),D=null},a.appendChild(D)}):function(T){setTimeout(E,0,T)},m.setImmediate=function(T){typeof T!="function"&&(T=new Function(""+T));for(var D=new Array(arguments.length-1),A=0;A<D.length;A++)D[A]=arguments[A+1];var b={callback:T,args:D};return p[f]=b,s(f),f++},m.clearImmediate=y}function y(T){delete p[T]}function E(T){if(h)setTimeout(E,0,T);else{var D=p[T];if(D){h=!0;try{(function(A){var b=A.callback,O=A.args;switch(O.length){case 0:b();break;case 1:b(O[0]);break;case 2:b(O[0],O[1]);break;case 3:b(O[0],O[1],O[2]);break;default:b.apply(i,O)}})(D)}finally{y(T),h=!1}}}}function C(T){T.source===o&&typeof T.data=="string"&&T.data.indexOf(c)===0&&E(+T.data.slice(c.length))}})(typeof self>"u"?r===void 0?this:r:self)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})});var k_=ng((Vp,Hp)=>{"use strict";(function(e,t){typeof define=="function"&&define.amd?define([],t):typeof Vp<"u"?t():(t(),e.FileSaver={})})(Vp,function(){"use strict";function e(a,l){return typeof l>"u"?l={autoBom:!1}:typeof l!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),l={autoBom:!l}),l.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}function t(a,l,c){var f=new XMLHttpRequest;f.open("GET",a),f.responseType="blob",f.onload=function(){s(f.response,l,c)},f.onerror=function(){console.error("could not download file")},f.send()}function n(a){var l=new XMLHttpRequest;l.open("HEAD",a,!1);try{l.send()}catch{}return 200<=l.status&&299>=l.status}function r(a){try{a.dispatchEvent(new MouseEvent("click"))}catch{var l=document.createEvent("MouseEvents");l.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),a.dispatchEvent(l)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof global=="object"&&global.global===global?global:void 0,i=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),s=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!i?function(a,l,c){var f=o.URL||o.webkitURL,p=document.createElement("a");l=l||a.name||"download",p.download=l,p.rel="noopener",typeof a=="string"?(p.href=a,p.origin===location.origin?r(p):n(p.href)?t(a,l,c):r(p,p.target="_blank")):(p.href=f.createObjectURL(a),setTimeout(function(){f.revokeObjectURL(p.href)},4e4),setTimeout(function(){r(p)},0))}:"msSaveOrOpenBlob"in navigator?function(a,l,c){if(l=l||a.name||"download",typeof a!="string")navigator.msSaveOrOpenBlob(e(a,c),l);else if(n(a))t(a,l,c);else{var f=document.createElement("a");f.href=a,f.target="_blank",setTimeout(function(){r(f)})}}:function(a,l,c,f){if(f=f||open("","_blank"),f&&(f.document.title=f.document.body.innerText="downloading..."),typeof a=="string")return t(a,l,c);var p=a.type==="application/octet-stream",h=/constructor/i.test(o.HTMLElement)||o.safari,g=/CriOS\/[\d]+/.test(navigator.userAgent);if((g||p&&h||i)&&typeof FileReader<"u"){var m=new FileReader;m.onloadend=function(){var C=m.result;C=g?C:C.replace(/^data:[^;]*;/,"data:attachment/file;"),f?f.location.href=C:location=C,f=null},m.readAsDataURL(a)}else{var y=o.URL||o.webkitURL,E=y.createObjectURL(a);f?f.location=E:location.href=E,f=null,setTimeout(function(){y.revokeObjectURL(E)},4e4)}});o.saveAs=s.saveAs=s,typeof Hp<"u"&&(Hp.exports=s)})});var ut=null,Bs=!1,ac=1,rI=null,Tt=Symbol("SIGNAL");function ie(e){let t=ut;return ut=e,t}function Hs(){return ut}var ui={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function ci(e){if(Bs)throw new Error("");if(ut===null)return;ut.consumerOnSignalRead(e);let t=ut.producersTail;if(t!==void 0&&t.producer===e)return;let n,r=ut.recomputing;if(r&&(n=t!==void 0?t.nextProducer:ut.producers,n!==void 0&&n.producer===e)){ut.producersTail=n,n.lastReadVersion=e.version;return}let o=e.consumersTail;if(o!==void 0&&o.consumer===ut&&(!r||iI(o,ut)))return;let i=co(ut),s={producer:e,consumer:ut,nextProducer:n,prevConsumer:o,lastReadVersion:e.version,nextConsumer:void 0};ut.producersTail=s,t!==void 0?t.nextProducer=s:ut.producers=s,i&&ag(e,s)}function og(){ac++}function lc(e){if(!(co(e)&&!e.dirty)&&!(!e.dirty&&e.lastCleanEpoch===ac)){if(!e.producerMustRecompute(e)&&!Gs(e)){sc(e);return}e.producerRecomputeValue(e),sc(e)}}function uc(e){if(e.consumers===void 0)return;let t=Bs;Bs=!0;try{for(let n=e.consumers;n!==void 0;n=n.nextConsumer){let r=n.consumer;r.dirty||oI(r)}}finally{Bs=t}}function cc(){return ut?.consumerAllowSignalWrites!==!1}function oI(e){e.dirty=!0,uc(e),e.consumerMarkedDirty?.(e)}function sc(e){e.dirty=!1,e.lastCleanEpoch=ac}function di(e){return e&&ig(e),ie(e)}function ig(e){e.producersTail=void 0,e.recomputing=!0}function $s(e,t){ie(t),e&&sg(e)}function sg(e){e.recomputing=!1;let t=e.producersTail,n=t!==void 0?t.nextProducer:e.producers;if(n!==void 0){if(co(e))do n=dc(n);while(n!==void 0);t!==void 0?t.nextProducer=void 0:e.producers=void 0}}function Gs(e){for(let t=e.producers;t!==void 0;t=t.nextProducer){let n=t.producer,r=t.lastReadVersion;if(r!==n.version||(lc(n),r!==n.version))return!0}return!1}function fi(e){if(co(e)){let t=e.producers;for(;t!==void 0;)t=dc(t)}e.producers=void 0,e.producersTail=void 0,e.consumers=void 0,e.consumersTail=void 0}function ag(e,t){let n=e.consumersTail,r=co(e);if(n!==void 0?(t.nextConsumer=n.nextConsumer,n.nextConsumer=t):(t.nextConsumer=void 0,e.consumers=t),t.prevConsumer=n,e.consumersTail=t,!r)for(let o=e.producers;o!==void 0;o=o.nextProducer)ag(o.producer,o)}function dc(e){let t=e.producer,n=e.nextProducer,r=e.nextConsumer,o=e.prevConsumer;if(e.nextConsumer=void 0,e.prevConsumer=void 0,r!==void 0?r.prevConsumer=o:t.consumersTail=o,o!==void 0)o.nextConsumer=r;else if(t.consumers=r,!co(t)){let i=t.producers;for(;i!==void 0;)i=dc(i)}return n}function co(e){return e.consumerIsAlwaysLive||e.consumers!==void 0}function fc(e){rI?.(e)}function iI(e,t){let n=t.producersTail;if(n!==void 0){let r=t.producers;do{if(r===e)return!0;if(r===n)break;r=r.nextProducer}while(r!==void 0)}return!1}function pc(e,t){return Object.is(e,t)}function zs(e,t){let n=Object.create(sI);n.computation=e,t!==void 0&&(n.equal=t);let r=()=>{if(lc(n),ci(n),n.value===Vs)throw n.error;return n.value};return r[Tt]=n,fc(n),r}var oc=Symbol("UNSET"),ic=Symbol("COMPUTING"),Vs=Symbol("ERRORED"),sI=ke(X({},ui),{value:oc,dirty:!0,error:null,equal:pc,kind:"computed",producerMustRecompute(e){return e.value===oc||e.value===ic},producerRecomputeValue(e){if(e.value===ic)throw new Error("");let t=e.value;e.value=ic;let n=di(e),r,o=!1;try{r=e.computation(),ie(null),o=t!==oc&&t!==Vs&&r!==Vs&&e.equal(t,r)}catch(i){r=Vs,e.error=i}finally{$s(e,n)}if(o){e.value=t;return}e.value=r,e.version++}});function aI(){throw new Error}var lg=aI;function ug(e){lg(e)}function hc(e){lg=e}var lI=null;function gc(e,t){let n=Object.create(qs);n.value=e,t!==void 0&&(n.equal=t);let r=()=>cg(n);return r[Tt]=n,fc(n),[r,s=>pi(n,s),s=>dg(n,s)]}function cg(e){return ci(e),e.value}function pi(e,t){cc()||ug(e),e.equal(e.value,t)||(e.value=t,uI(e))}function dg(e,t){cc()||ug(e),pi(e,t(e.value))}var qs=ke(X({},ui),{equal:pc,value:void 0,kind:"signal"});function uI(e){e.version++,og(),uc(e),lI?.(e)}function mc(e){let t=ie(null);try{return e()}finally{ie(t)}}function pe(e){return typeof e=="function"}function fo(e){let n=e(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var js=fo(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,o)=>`${o+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function hi(e,t){if(e){let n=e.indexOf(t);0<=n&&e.splice(n,1)}}var rt=class e{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let i of n)i.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(pe(r))try{r()}catch(i){t=i instanceof js?i.errors:[i]}let{_finalizers:o}=this;if(o){this._finalizers=null;for(let i of o)try{fg(i)}catch(s){t=t??[],s instanceof js?t=[...t,...s.errors]:t.push(s)}}if(t)throw new js(t)}}add(t){var n;if(t&&t!==this)if(this.closed)fg(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}}_hasParent(t){let{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){let{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&hi(n,t)}remove(t){let{_finalizers:n}=this;n&&hi(n,t),t instanceof e&&t._removeParent(this)}};rt.EMPTY=(()=>{let e=new rt;return e.closed=!0,e})();var yc=rt.EMPTY;function Ws(e){return e instanceof rt||e&&"closed"in e&&pe(e.remove)&&pe(e.add)&&pe(e.unsubscribe)}function fg(e){pe(e)?e():e.unsubscribe()}var Zt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var po={setTimeout(e,t,...n){let{delegate:r}=po;return r?.setTimeout?r.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){let{delegate:t}=po;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function Js(e){po.setTimeout(()=>{let{onUnhandledError:t}=Zt;if(t)t(e);else throw e})}function gi(){}var pg=vc("C",void 0,void 0);function hg(e){return vc("E",void 0,e)}function gg(e){return vc("N",e,void 0)}function vc(e,t,n){return{kind:e,value:t,error:n}}var _r=null;function ho(e){if(Zt.useDeprecatedSynchronousErrorHandling){let t=!_r;if(t&&(_r={errorThrown:!1,error:null}),e(),t){let{errorThrown:n,error:r}=_r;if(_r=null,n)throw r}}else e()}function mg(e){Zt.useDeprecatedSynchronousErrorHandling&&_r&&(_r.errorThrown=!0,_r.error=e)}var Cr=class extends rt{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,Ws(t)&&t.add(this)):this.destination=fI}static create(t,n,r){return new or(t,n,r)}next(t){this.isStopped?_c(gg(t),this):this._next(t)}error(t){this.isStopped?_c(hg(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?_c(pg,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},cI=Function.prototype.bind;function Ec(e,t){return cI.call(e,t)}var Cc=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(r){Ys(r)}}error(t){let{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(r){Ys(r)}else Ys(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){Ys(n)}}},or=class extends Cr{constructor(t,n,r){super();let o;if(pe(t)||!t)o={next:t??void 0,error:n??void 0,complete:r??void 0};else{let i;this&&Zt.useDeprecatedNextContext?(i=Object.create(t),i.unsubscribe=()=>this.unsubscribe(),o={next:t.next&&Ec(t.next,i),error:t.error&&Ec(t.error,i),complete:t.complete&&Ec(t.complete,i)}):o=t}this.destination=new Cc(o)}};function Ys(e){Zt.useDeprecatedSynchronousErrorHandling?mg(e):Js(e)}function dI(e){throw e}function _c(e,t){let{onStoppedNotification:n}=Zt;n&&po.setTimeout(()=>n(e,t))}var fI={closed:!0,next:gi,error:dI,complete:gi};var go=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Kt(e){return e}function Ic(...e){return Tc(e)}function Tc(e){return e.length===0?Kt:e.length===1?e[0]:function(n){return e.reduce((r,o)=>o(r),n)}}var Ce=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new e;return r.source=this,r.operator=n,r}subscribe(n,r,o){let i=hI(n)?n:new or(n,r,o);return ho(()=>{let{operator:s,source:a}=this;i.add(s?s.call(i,a):a?this._subscribe(i):this._trySubscribe(i))}),i}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=yg(r),new r((o,i)=>{let s=new or({next:a=>{try{n(a)}catch(l){i(l),s.unsubscribe()}},error:i,complete:o});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[go](){return this}pipe(...n){return Tc(n)(this)}toPromise(n){return n=yg(n),new n((r,o)=>{let i;this.subscribe(s=>i=s,s=>o(s),()=>r(i))})}}return e.create=t=>new e(t),e})();function yg(e){var t;return(t=e??Zt.Promise)!==null&&t!==void 0?t:Promise}function pI(e){return e&&pe(e.next)&&pe(e.error)&&pe(e.complete)}function hI(e){return e&&e instanceof Cr||pI(e)&&Ws(e)}function gI(e){return pe(e?.lift)}function Ae(e){return t=>{if(gI(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ne(e,t,n,r,o){return new wc(e,t,n,r,o)}var wc=class extends Cr{constructor(t,n,r,o,i,s){super(t),this.onFinalize=i,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(l){t.error(l)}}:super._next,this._error=o?function(a){try{o(a)}catch(l){t.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};var vg=fo(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ct=(()=>{class e extends Ce{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Zs(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new vg}next(n){ho(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){ho(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){ho(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:o,observers:i}=this;return r||o?yc:(this.currentObservers=null,i.push(n),new rt(()=>{this.currentObservers=null,hi(i,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:o,isStopped:i}=this;r?n.error(o):i&&n.complete()}asObservable(){let n=new Ce;return n.source=this,n}}return e.create=(t,n)=>new Zs(t,n),e})(),Zs=class extends ct{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,t)}error(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,t)}complete(){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||n===void 0||n.call(t)}_subscribe(t){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(t))!==null&&r!==void 0?r:yc}};var ot=class extends ct{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){let{hasError:t,thrownError:n,_value:r}=this;if(t)throw n;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}};var it=new Ce(e=>e.complete());function Eg(e){return e&&pe(e.schedule)}function _g(e){return e[e.length-1]}function Cg(e){return pe(_g(e))?e.pop():void 0}function ir(e){return Eg(_g(e))?e.pop():void 0}function Tg(e,t,n,r){function o(i){return i instanceof n?i:new n(function(s){s(i)})}return new(n||(n=Promise))(function(i,s){function a(f){try{c(r.next(f))}catch(p){s(p)}}function l(f){try{c(r.throw(f))}catch(p){s(p)}}function c(f){f.done?i(f.value):o(f.value).then(a,l)}c((r=r.apply(e,t||[])).next())})}function Ig(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ir(e){return this instanceof Ir?(this.v=e,this):new Ir(e)}function wg(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),o,i=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),o[Symbol.asyncIterator]=function(){return this},o;function s(g){return function(m){return Promise.resolve(m).then(g,p)}}function a(g,m){r[g]&&(o[g]=function(y){return new Promise(function(E,C){i.push([g,y,E,C])>1||l(g,y)})},m&&(o[g]=m(o[g])))}function l(g,m){try{c(r[g](m))}catch(y){h(i[0][3],y)}}function c(g){g.value instanceof Ir?Promise.resolve(g.value.v).then(f,p):h(i[0][2],g)}function f(g){l("next",g)}function p(g){l("throw",g)}function h(g,m){g(m),i.shift(),i.length&&l(i[0][0],i[0][1])}}function Dg(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Ig=="function"?Ig(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=e[i]&&function(s){return new Promise(function(a,l){s=e[i](s),o(a,l,s.done,s.value)})}}function o(i,s,a,l){Promise.resolve(l).then(function(c){i({value:c,done:a})},s)}}var Ks=e=>e&&typeof e.length=="number"&&typeof e!="function";function Qs(e){return pe(e?.then)}function Xs(e){return pe(e[go])}function ea(e){return Symbol.asyncIterator&&pe(e?.[Symbol.asyncIterator])}function ta(e){return new TypeError(`You provided ${e!==null&&typeof e=="object"?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function mI(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var na=mI();function ra(e){return pe(e?.[na])}function oa(e){return wg(this,arguments,function*(){let n=e.getReader();try{for(;;){let{value:r,done:o}=yield Ir(n.read());if(o)return yield Ir(void 0);yield yield Ir(r)}}finally{n.releaseLock()}})}function ia(e){return pe(e?.getReader)}function Ke(e){if(e instanceof Ce)return e;if(e!=null){if(Xs(e))return yI(e);if(Ks(e))return vI(e);if(Qs(e))return EI(e);if(ea(e))return Sg(e);if(ra(e))return _I(e);if(ia(e))return CI(e)}throw ta(e)}function yI(e){return new Ce(t=>{let n=e[go]();if(pe(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function vI(e){return new Ce(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function EI(e){return new Ce(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,Js)})}function _I(e){return new Ce(t=>{for(let n of e)if(t.next(n),t.closed)return;t.complete()})}function Sg(e){return new Ce(t=>{II(e,t).catch(n=>t.error(n))})}function CI(e){return Sg(oa(e))}function II(e,t){var n,r,o,i;return Tg(this,void 0,void 0,function*(){try{for(n=Dg(e);r=yield n.next(),!r.done;){let s=r.value;if(t.next(s),t.closed)return}}catch(s){o={error:s}}finally{try{r&&!r.done&&(i=n.return)&&(yield i.call(n))}finally{if(o)throw o.error}}t.complete()})}function wt(e,t,n,r=0,o=!1){let i=t.schedule(function(){n(),o?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(i),!o)return i}function sa(e,t=0){return Ae((n,r)=>{n.subscribe(Ne(r,o=>wt(r,e,()=>r.next(o),t),()=>wt(r,e,()=>r.complete(),t),o=>wt(r,e,()=>r.error(o),t)))})}function aa(e,t=0){return Ae((n,r)=>{r.add(e.schedule(()=>n.subscribe(r),t))})}function bg(e,t){return Ke(e).pipe(aa(t),sa(t))}function Ag(e,t){return Ke(e).pipe(aa(t),sa(t))}function Mg(e,t){return new Ce(n=>{let r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}function Rg(e,t){return new Ce(n=>{let r;return wt(n,t,()=>{r=e[na](),wt(n,t,()=>{let o,i;try{({value:o,done:i}=r.next())}catch(s){n.error(s);return}i?n.complete():n.next(o)},0,!0)}),()=>pe(r?.return)&&r.return()})}function la(e,t){if(!e)throw new Error("Iterable cannot be null");return new Ce(n=>{wt(n,t,()=>{let r=e[Symbol.asyncIterator]();wt(n,t,()=>{r.next().then(o=>{o.done?n.complete():n.next(o.value)})},0,!0)})})}function Ng(e,t){return la(oa(e),t)}function xg(e,t){if(e!=null){if(Xs(e))return bg(e,t);if(Ks(e))return Mg(e,t);if(Qs(e))return Ag(e,t);if(ea(e))return la(e,t);if(ra(e))return Rg(e,t);if(ia(e))return Ng(e,t)}throw ta(e)}function Qe(e,t){return t?xg(e,t):Ke(e)}function ve(...e){let t=ir(e);return Qe(e,t)}function Dc(e,t){let n=pe(e)?e:()=>e,r=o=>o.error(n());return new Ce(t?o=>t.schedule(r,0,o):r)}function ua(e){return!!e&&(e instanceof Ce||pe(e.lift)&&pe(e.subscribe))}var Pn=fo(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function Sc(e,t){let n=typeof t=="object";return new Promise((r,o)=>{let i=new or({next:s=>{r(s),i.unsubscribe()},error:o,complete:()=>{n?r(t.defaultValue):o(new Pn)}});e.subscribe(i)})}function Me(e,t){return Ae((n,r)=>{let o=0;n.subscribe(Ne(r,i=>{r.next(e.call(t,i,o++))}))})}var{isArray:TI}=Array;function wI(e,t){return TI(t)?e(...t):e(t)}function Pg(e){return Me(t=>wI(e,t))}var{isArray:DI}=Array,{getPrototypeOf:SI,prototype:bI,keys:AI}=Object;function kg(e){if(e.length===1){let t=e[0];if(DI(t))return{args:t,keys:null};if(MI(t)){let n=AI(t);return{args:n.map(r=>t[r]),keys:n}}}return{args:e,keys:null}}function MI(e){return e&&typeof e=="object"&&SI(e)===bI}function Og(e,t){return e.reduce((n,r,o)=>(n[r]=t[o],n),{})}function bc(...e){let t=ir(e),n=Cg(e),{args:r,keys:o}=kg(e);if(r.length===0)return Qe([],t);let i=new Ce(RI(r,t,o?s=>Og(o,s):Kt));return n?i.pipe(Pg(n)):i}function RI(e,t,n=Kt){return r=>{Fg(t,()=>{let{length:o}=e,i=new Array(o),s=o,a=o;for(let l=0;l<o;l++)Fg(t,()=>{let c=Qe(e[l],t),f=!1;c.subscribe(Ne(r,p=>{i[l]=p,f||(f=!0,a--),a||r.next(n(i.slice()))},()=>{--s||r.complete()}))},r)},r)}}function Fg(e,t,n){e?wt(n,e,t):t()}function Lg(e,t,n,r,o,i,s,a){let l=[],c=0,f=0,p=!1,h=()=>{p&&!l.length&&!c&&t.complete()},g=y=>c<r?m(y):l.push(y),m=y=>{i&&t.next(y),c++;let E=!1;Ke(n(y,f++)).subscribe(Ne(t,C=>{o?.(C),i?g(C):t.next(C)},()=>{E=!0},void 0,()=>{if(E)try{for(c--;l.length&&c<r;){let C=l.shift();s?wt(t,s,()=>m(C)):m(C)}h()}catch(C){t.error(C)}}))};return e.subscribe(Ne(t,g,()=>{p=!0,h()})),()=>{a?.()}}function yt(e,t,n=1/0){return pe(t)?yt((r,o)=>Me((i,s)=>t(r,i,o,s))(Ke(e(r,o))),n):(typeof t=="number"&&(n=t),Ae((r,o)=>Lg(r,o,e,n)))}function Ug(e=1/0){return yt(Kt,e)}function Bg(){return Ug(1)}function mo(...e){return Bg()(Qe(e,ir(e)))}function mi(e){return new Ce(t=>{Ke(e()).subscribe(t)})}function Qt(e,t){return Ae((n,r)=>{let o=0;n.subscribe(Ne(r,i=>e.call(t,i,o++)&&r.next(i)))})}function yi(e){return Ae((t,n)=>{let r=null,o=!1,i;r=t.subscribe(Ne(n,void 0,void 0,s=>{i=Ke(e(s,yi(e)(t))),r?(r.unsubscribe(),r=null,i.subscribe(n)):o=!0})),o&&(r.unsubscribe(),r=null,i.subscribe(n))})}function yo(e,t){return pe(t)?yt(e,t,1):yt(e,1)}function Vg(e){return Ae((t,n)=>{let r=!1;t.subscribe(Ne(n,o=>{r=!0,n.next(o)},()=>{r||n.next(e),n.complete()}))})}function kn(e){return e<=0?()=>it:Ae((t,n)=>{let r=0;t.subscribe(Ne(n,o=>{++r<=e&&(n.next(o),e<=r&&n.complete())}))})}function Hg(e=NI){return Ae((t,n)=>{let r=!1;t.subscribe(Ne(n,o=>{r=!0,n.next(o)},()=>r?n.complete():n.error(e())))})}function NI(){return new Pn}function vi(e){return Ae((t,n)=>{try{t.subscribe(n)}finally{n.add(e)}})}function On(e,t){let n=arguments.length>=2;return r=>r.pipe(e?Qt((o,i)=>e(o,i,r)):Kt,kn(1),n?Vg(t):Hg(()=>new Pn))}function ca(e){return e<=0?()=>it:Ae((t,n)=>{let r=[];t.subscribe(Ne(n,o=>{r.push(o),e<r.length&&r.shift()},()=>{for(let o of r)n.next(o);n.complete()},void 0,()=>{r=null}))})}function Ac(...e){let t=ir(e);return Ae((n,r)=>{(t?mo(e,n,t):mo(e,n)).subscribe(r)})}function Xt(e,t){return Ae((n,r)=>{let o=null,i=0,s=!1,a=()=>s&&!o&&r.complete();n.subscribe(Ne(r,l=>{o?.unsubscribe();let c=0,f=i++;Ke(e(l,f)).subscribe(o=Ne(r,p=>r.next(t?t(l,p,f,c++):p),()=>{o=null,a()}))},()=>{s=!0,a()}))})}function Ei(e){return Ae((t,n)=>{Ke(e).subscribe(Ne(n,()=>n.complete(),gi)),!n.closed&&t.subscribe(n)})}function Cn(e,t,n){let r=pe(e)||t||n?{next:e,error:t,complete:n}:e;return r?Ae((o,i)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;o.subscribe(Ne(i,l=>{var c;(c=r.next)===null||c===void 0||c.call(r,l),i.next(l)},()=>{var l;a=!1,(l=r.complete)===null||l===void 0||l.call(r),i.complete()},l=>{var c;a=!1,(c=r.error)===null||c===void 0||c.call(r,l),i.error(l)},()=>{var l,c;a&&((l=r.unsubscribe)===null||l===void 0||l.call(r)),(c=r.finalize)===null||c===void 0||c.call(r)}))}):Kt}var Mc;function da(){return Mc}function In(e){let t=Mc;return Mc=e,t}var $g=Symbol("NotFound");function vo(e){return e===$g||e?.name==="\u0275NotFound"}var ma="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",Z=class extends Error{code;constructor(t,n){super(Un(t,n)),this.code=t}};function kI(e){return`NG0${Math.abs(e)}`}function Un(e,t){return`${kI(e)}${t?": "+t:""}`}var Mr=globalThis;function Re(e){for(let t in e)if(e[t]===Re)return t;throw Error("")}function Ln(e){if(typeof e=="string")return e;if(Array.isArray(e))return`[${e.map(Ln).join(", ")}]`;if(e==null)return""+e;let t=e.overriddenName||e.name;if(t)return`${t}`;let n=e.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function zc(e,t){return e?t?`${e} ${t}`:e:t||""}var OI=Re({__forward_ref__:Re});function ya(e){return e.__forward_ref__=ya,e.toString=function(){return Ln(this())},e}function st(e){return qc(e)?e():e}function qc(e){return typeof e=="function"&&e.hasOwnProperty(OI)&&e.__forward_ref__===ya}function te(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function Rr(e){return{providers:e.providers||[],imports:e.imports||[]}}function Di(e){return FI(e,va)}function jc(e){return Di(e)!==null}function FI(e,t){return e.hasOwnProperty(t)&&e[t]||null}function LI(e){let t=e?.[va]??null;return t||null}function Nc(e){return e&&e.hasOwnProperty(pa)?e[pa]:null}var va=Re({\u0275prov:Re}),pa=Re({\u0275inj:Re}),re=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(t,n){this._desc=t,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=te({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Wc(e){return e&&!!e.\u0275providers}var Jc=Re({\u0275cmp:Re}),Yc=Re({\u0275dir:Re}),Zc=Re({\u0275pipe:Re}),Kc=Re({\u0275mod:Re}),Ci=Re({\u0275fac:Re}),Nr=Re({__NG_ELEMENT_ID__:Re}),Gg=Re({__NG_ENV_ID__:Re});function Qc(e){return Ea(e,"@NgModule"),e[Kc]||null}function ar(e){return Ea(e,"@Component"),e[Jc]||null}function Xc(e){return Ea(e,"@Directive"),e[Yc]||null}function Wg(e){return Ea(e,"@Pipe"),e[Zc]||null}function Ea(e,t){if(e==null)throw new Z(-919,!1)}function _o(e){return typeof e=="string"?e:e==null?"":String(e)}var Jg=Re({ngErrorCode:Re}),UI=Re({ngErrorMessage:Re}),BI=Re({ngTokenPath:Re});function ed(e,t){return Yg("",-200,t)}function _a(e,t){throw new Z(-201,!1)}function Yg(e,t,n){let r=new Z(t,e);return r[Jg]=t,r[UI]=e,n&&(r[BI]=n),r}function VI(e){return e[Jg]}var xc;function Zg(){return xc}function Nt(e){let t=xc;return xc=e,t}function td(e,t,n){let r=Di(e);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&8)return null;if(t!==void 0)return t;_a(e,"")}var HI={},Tr=HI,$I="__NG_DI_FLAG__",Pc=class{injector;constructor(t){this.injector=t}retrieve(t,n){let r=wr(n)||0;try{return this.injector.get(t,r&8?null:Tr,r)}catch(o){if(vo(o))return o;throw o}}};function GI(e,t=0){let n=da();if(n===void 0)throw new Z(-203,!1);if(n===null)return td(e,void 0,t);{let r=zI(t),o=n.retrieve(e,r);if(vo(o)){if(r.optional)return null;throw o}return o}}function ue(e,t=0){return(Zg()||GI)(st(e),t)}function z(e,t){return ue(e,wr(t))}function wr(e){return typeof e>"u"||typeof e=="number"?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function zI(e){return{optional:!!(e&8),host:!!(e&1),self:!!(e&2),skipSelf:!!(e&4)}}function kc(e){let t=[];for(let n=0;n<e.length;n++){let r=st(e[n]);if(Array.isArray(r)){if(r.length===0)throw new Z(900,!1);let o,i=0;for(let s=0;s<r.length;s++){let a=r[s],l=qI(a);typeof l=="number"?l===-1?o=a.token:i|=l:o=a}t.push(ue(o,i))}else t.push(ue(r))}return t}function qI(e){return e[$I]}function Dr(e,t){let n=e.hasOwnProperty(Ci);return n?e[Ci]:null}function Ca(e,t){e.forEach(n=>Array.isArray(n)?Ca(n,t):t(n))}function nd(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function Si(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function Kg(e,t,n,r){let o=e.length;if(o==t)e.push(n,r);else if(o===1)e.push(r,e[0]),e[0]=n;else{for(o--,e.push(e[o-1],e[o]);o>t;){let i=o-2;e[o]=e[i],o--}e[t]=n,e[t+1]=r}}function Qg(e,t,n){let r=Co(e,t);return r>=0?e[r|1]=n:(r=~r,Kg(e,r,t,n)),r}function Ia(e,t){let n=Co(e,t);if(n>=0)return e[n|1]}function Co(e,t){return jI(e,t,1)}function jI(e,t,n){let r=0,o=e.length>>n;for(;o!==r;){let i=r+(o-r>>1),s=e[i<<n];if(t===s)return i<<n;s>t?o=i:r=i+1}return~(o<<n)}var xr={},Ut=[],Pr=new re(""),rd=new re("",-1),od=new re(""),Ii=class{get(t,n=Tr){if(n===Tr){let o=Yg("",-201);throw o.name="\u0275NotFound",o}return n}};function kr(e){return{\u0275providers:e}}function Xg(e){return kr([{provide:Pr,multi:!0,useValue:e}])}function em(...e){return{\u0275providers:id(!0,e),\u0275fromNgModule:!0}}function id(e,...t){let n=[],r=new Set,o,i=s=>{n.push(s)};return Ca(t,s=>{let a=s;ha(a,i,[],r)&&(o||=[],o.push(a))}),o!==void 0&&tm(o,i),n}function tm(e,t){for(let n=0;n<e.length;n++){let{ngModule:r,providers:o}=e[n];sd(o,i=>{t(i,r)})}}function ha(e,t,n,r){if(e=st(e),!e)return!1;let o=null,i=Nc(e),s=!i&&ar(e);if(!i&&!s){let l=e.ngModule;if(i=Nc(l),i)o=l;else return!1}else{if(s&&!s.standalone)return!1;o=e}let a=r.has(o);if(s){if(a)return!1;if(r.add(o),s.dependencies){let l=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let c of l)ha(c,t,n,r)}}else if(i){if(i.imports!=null&&!a){r.add(o);let c;Ca(i.imports,f=>{ha(f,t,n,r)&&(c||=[],c.push(f))}),c!==void 0&&tm(c,t)}if(!a){let c=Dr(o)||(()=>new o);t({provide:o,useFactory:c,deps:Ut},o),t({provide:od,useValue:o,multi:!0},o),t({provide:Pr,useValue:()=>ue(o),multi:!0},o)}let l=i.providers;if(l!=null&&!a){let c=e;sd(l,f=>{t(f,c)})}}else return!1;return o!==e&&e.providers!==void 0}function sd(e,t){for(let n of e)Wc(n)&&(n=n.\u0275providers),Array.isArray(n)?sd(n,t):t(n)}var WI=Re({provide:String,useValue:Re});function nm(e){return e!==null&&typeof e=="object"&&WI in e}function JI(e){return!!(e&&e.useExisting)}function YI(e){return!!(e&&e.useFactory)}function Sr(e){return typeof e=="function"}function rm(e){return!!e.useClass}var bi=new re(""),fa={},zg={},Rc;function Ai(){return Rc===void 0&&(Rc=new Ii),Rc}var Ue=class{},br=class extends Ue{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(t,n,r,o){super(),this.parent=n,this.source=r,this.scopes=o,Fc(t,s=>this.processProvider(s)),this.records.set(rd,Eo(void 0,this)),o.has("environment")&&this.records.set(Ue,Eo(void 0,this));let i=this.records.get(bi);i!=null&&typeof i.value=="string"&&this.scopes.add(i.value),this.injectorDefTypes=new Set(this.get(od,Ut,{self:!0}))}retrieve(t,n){let r=wr(n)||0;try{return this.get(t,Tr,r)}catch(o){if(vo(o))return o;throw o}}destroy(){_i(this),this._destroyed=!0;let t=ie(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ie(t)}}onDestroy(t){return _i(this),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){_i(this);let n=In(this),r=Nt(void 0),o;try{return t()}finally{In(n),Nt(r)}}get(t,n=Tr,r){if(_i(this),t.hasOwnProperty(Gg))return t[Gg](this);let o=wr(r),i,s=In(this),a=Nt(void 0);try{if(!(o&4)){let c=this.records.get(t);if(c===void 0){let f=eT(t)&&Di(t);f&&this.injectableDefInScope(f)?c=Eo(Oc(t),fa):c=null,this.records.set(t,c)}if(c!=null)return this.hydrate(t,c,o)}let l=o&2?Ai():this.parent;return n=o&8&&n===Tr?null:n,l.get(t,n)}catch(l){let c=VI(l);throw c===-200||c===-201?new Z(c,null):l}finally{Nt(a),In(s)}}resolveInjectorInitializers(){let t=ie(null),n=In(this),r=Nt(void 0),o;try{let i=this.get(Pr,Ut,{self:!0});for(let s of i)s()}finally{In(n),Nt(r),ie(t)}}toString(){let t=[],n=this.records;for(let r of n.keys())t.push(Ln(r));return`R3Injector[${t.join(", ")}]`}processProvider(t){t=st(t);let n=Sr(t)?t:st(t&&t.provide),r=KI(t);if(!Sr(t)&&t.multi===!0){let o=this.records.get(n);o||(o=Eo(void 0,fa,!0),o.factory=()=>kc(o.multi),this.records.set(n,o)),n=t,o.multi.push(t)}this.records.set(n,r)}hydrate(t,n,r){let o=ie(null);try{if(n.value===zg)throw ed(Ln(t));return n.value===fa&&(n.value=zg,n.value=n.factory(void 0,r)),typeof n.value=="object"&&n.value&&XI(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{ie(o)}}injectableDefInScope(t){if(!t.providedIn)return!1;let n=st(t.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(t){let n=this._onDestroyHooks.indexOf(t);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Oc(e){let t=Di(e),n=t!==null?t.factory:Dr(e);if(n!==null)return n;if(e instanceof re)throw new Z(204,!1);if(e instanceof Function)return ZI(e);throw new Z(204,!1)}function ZI(e){if(e.length>0)throw new Z(204,!1);let n=LI(e);return n!==null?()=>n.factory(e):()=>new e}function KI(e){if(nm(e))return Eo(void 0,e.useValue);{let t=ad(e);return Eo(t,fa)}}function ad(e,t,n){let r;if(Sr(e)){let o=st(e);return Dr(o)||Oc(o)}else if(nm(e))r=()=>st(e.useValue);else if(YI(e))r=()=>e.useFactory(...kc(e.deps||[]));else if(JI(e))r=(o,i)=>ue(st(e.useExisting),i!==void 0&&i&8?8:void 0);else{let o=st(e&&(e.useClass||e.provide));if(QI(e))r=()=>new o(...kc(e.deps));else return Dr(o)||Oc(o)}return r}function _i(e){if(e.destroyed)throw new Z(205,!1)}function Eo(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function QI(e){return!!e.deps}function XI(e){return e!==null&&typeof e=="object"&&typeof e.ngOnDestroy=="function"}function eT(e){return typeof e=="function"||typeof e=="object"&&e.ngMetadataName==="InjectionToken"}function Fc(e,t){for(let n of e)Array.isArray(n)?Fc(n,t):n&&Wc(n)?Fc(n.\u0275providers,t):t(n)}function et(e,t){let n;e instanceof br?(_i(e),n=e):n=new Pc(e);let r,o=In(n),i=Nt(void 0);try{return t()}finally{In(o),Nt(i)}}function om(){return Zg()!==void 0||da()!=null}var nn=0,ce=1,he=2,Xe=3,Bt=4,Vt=5,Io=6,To=7,$e=8,Bn=9,Tn=10,Ge=11,wo=12,ld=13,Or=14,xt=15,Fr=16,Lr=17,Ur=18,Vn=19,ud=20,Fn=21,Ta=22,Mi=23,Pt=24,wa=25,Br=26,tt=27,im=1,cd=6,lr=7,Ri=8,Ni=9,ze=10;function Hn(e){return Array.isArray(e)&&typeof e[im]=="object"}function rn(e){return Array.isArray(e)&&e[im]===!0}function dd(e){return(e.flags&4)!==0}function ur(e){return e.componentOffset>-1}function Da(e){return(e.flags&1)===1}function cr(e){return!!e.template}function Do(e){return(e[he]&512)!==0}function Vr(e){return(e[he]&256)===256}var fd="svg",sm="math";function Ht(e){for(;Array.isArray(e);)e=e[nn];return e}function pd(e,t){return Ht(t[e])}function wn(e,t){return Ht(t[e.index])}function xi(e,t){return e.data[t]}function am(e,t){return e[t]}function on(e,t){let n=t[e];return Hn(n)?n:n[nn]}function Sa(e){return(e[he]&128)===128}function lm(e){return rn(e[Xe])}function Dn(e,t){return t==null?null:e[t]}function hd(e){e[Lr]=0}function gd(e){e[he]&1024||(e[he]|=1024,Sa(e)&&ki(e))}function um(e,t){for(;e>0;)t=t[Or],e--;return t}function Pi(e){return!!(e[he]&9216||e[Pt]?.dirty)}function ba(e){e[Tn].changeDetectionScheduler?.notify(8),e[he]&64&&(e[he]|=1024),Pi(e)&&ki(e)}function ki(e){e[Tn].changeDetectionScheduler?.notify(0);let t=sr(e);for(;t!==null&&!(t[he]&8192||(t[he]|=8192,!Sa(t)));)t=sr(t)}function md(e,t){if(Vr(e))throw new Z(911,!1);e[Fn]===null&&(e[Fn]=[]),e[Fn].push(t)}function cm(e,t){if(e[Fn]===null)return;let n=e[Fn].indexOf(t);n!==-1&&e[Fn].splice(n,1)}function sr(e){let t=e[Xe];return rn(t)?t[Xe]:t}function dm(e){return e[To]??=[]}function fm(e){return e.cleanup??=[]}var me={lFrame:bm(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Lc=!1;function pm(){return me.lFrame.elementDepthCount}function hm(){me.lFrame.elementDepthCount++}function yd(){me.lFrame.elementDepthCount--}function gm(){return me.bindingsEnabled}function mm(){return me.skipHydrationRootTNode!==null}function vd(e){return me.skipHydrationRootTNode===e}function Ed(){me.skipHydrationRootTNode=null}function Ie(){return me.lFrame.lView}function St(){return me.lFrame.tView}function dt(e){return me.lFrame.contextLView=e,e[$e]}function ft(e){return me.lFrame.contextLView=null,e}function $t(){let e=_d();for(;e!==null&&e.type===64;)e=e.parent;return e}function _d(){return me.lFrame.currentTNode}function ym(){let e=me.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}function So(e,t){let n=me.lFrame;n.currentTNode=e,n.isParent=t}function Cd(){return me.lFrame.isParent}function vm(){me.lFrame.isParent=!1}function Em(){return me.lFrame.contextLView}function Id(){return Lc}function Td(e){let t=Lc;return Lc=e,t}function _m(){return me.lFrame.bindingIndex}function Cm(e){return me.lFrame.bindingIndex=e}function Hr(){return me.lFrame.bindingIndex++}function wd(e){let t=me.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function Im(){return me.lFrame.inI18n}function Tm(e,t){let n=me.lFrame;n.bindingIndex=n.bindingRootIndex=e,Aa(t)}function wm(){return me.lFrame.currentDirectiveIndex}function Aa(e){me.lFrame.currentDirectiveIndex=e}function Dm(e){let t=me.lFrame.currentDirectiveIndex;return t===-1?null:e[t]}function Dd(e){me.lFrame.currentQueryIndex=e}function tT(e){let t=e[ce];return t.type===2?t.declTNode:t.type===1?e[Vt]:null}function Sd(e,t,n){if(n&4){let o=t,i=e;for(;o=o.parent,o===null&&!(n&1);)if(o=tT(i),o===null||(i=i[Or],o.type&10))break;if(o===null)return!1;t=o,e=i}let r=me.lFrame=Sm();return r.currentTNode=t,r.lView=e,!0}function Ma(e){let t=Sm(),n=e[ce];me.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function Sm(){let e=me.lFrame,t=e===null?null:e.child;return t===null?bm(e):t}function bm(e){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return e!==null&&(e.child=t),t}function Am(){let e=me.lFrame;return me.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}var bd=Am;function Ra(){let e=Am();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function Mm(e){return(me.lFrame.contextLView=um(e,me.lFrame.contextLView))[$e]}function $n(){return me.lFrame.selectedIndex}function dr(e){me.lFrame.selectedIndex=e}function Ad(){let e=me.lFrame;return xi(e.tView,e.selectedIndex)}function Gn(){me.lFrame.currentNamespace=fd}function zn(){nT()}function nT(){me.lFrame.currentNamespace=null}function Rm(){return me.lFrame.currentNamespace}var Nm=!0;function Na(){return Nm}function xa(e){Nm=e}function Uc(e,t=null,n=null,r){let o=Md(e,t,n,r);return o.resolveInjectorInitializers(),o}function Md(e,t=null,n=null,r,o=new Set){let i=[n||Ut,em(e)];return r=r||(typeof e=="object"?void 0:Ln(e)),new br(i,t||Ai(),r||null,o)}var en=class e{static THROW_IF_NOT_FOUND=Tr;static NULL=new Ii;static create(t,n){if(Array.isArray(t))return Uc({name:""},n,t,"");{let r=t.name??"";return Uc({name:r},t.parent,t.providers,r)}}static \u0275prov=te({token:e,providedIn:"any",factory:()=>ue(rd)});static __NG_ELEMENT_ID__=-1},je=new re(""),sn=(()=>{class e{static __NG_ELEMENT_ID__=rT;static __NG_ENV_ID__=n=>n}return e})(),Bc=class extends sn{_lView;constructor(t){super(),this._lView=t}get destroyed(){return Vr(this._lView)}onDestroy(t){let n=this._lView;return md(n,t),()=>cm(n,t)}};function rT(){return new Bc(Ie())}var xm=!1,Pm=new re(""),qn=(()=>{class e{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new ot(!1);debugTaskTracker=z(Pm,{optional:!0});get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new Ce(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),this.debugTaskTracker?.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.debugTaskTracker?.remove(n),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=te({token:e,providedIn:"root",factory:()=>new e})}return e})(),Vc=class extends ct{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(t=!1){super(),this.__isAsync=t,om()&&(this.destroyRef=z(sn,{optional:!0})??void 0,this.pendingTasks=z(qn,{optional:!0})??void 0)}emit(t){let n=ie(null);try{super.next(t)}finally{ie(n)}}subscribe(t,n,r){let o=t,i=n||(()=>null),s=r;if(t&&typeof t=="object"){let l=t;o=l.next?.bind(l),i=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(i=this.wrapInTimeout(i),o&&(o=this.wrapInTimeout(o)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:o,error:i,complete:s});return t instanceof rt&&t.add(a),a}wrapInTimeout(t){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{t(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},vt=Vc;function ga(...e){}function Rd(e){let t,n;function r(){e=ga;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),t!==void 0&&clearTimeout(t)}catch{}}return t=setTimeout(()=>{e(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{e(),r()})),()=>r()}function km(e){return queueMicrotask(()=>e()),()=>{e=ga}}var Nd="isAngularZone",Ti=Nd+"_ID",oT=0,Dt=class e{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new vt(!1);onMicrotaskEmpty=new vt(!1);onStable=new vt(!1);onError=new vt(!1);constructor(t){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:o=!1,scheduleInRootZone:i=xm}=t;if(typeof Zone>"u")throw new Z(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!o&&r,s.shouldCoalesceRunChangeDetection=o,s.callbackScheduled=!1,s.scheduleInRootZone=i,aT(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Nd)===!0}static assertInAngularZone(){if(!e.isInAngularZone())throw new Z(909,!1)}static assertNotInAngularZone(){if(e.isInAngularZone())throw new Z(909,!1)}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,o){let i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+o,t,iT,ga,ga);try{return i.runTask(s,n,r)}finally{i.cancelTask(s)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}},iT={};function xd(e){if(e._nesting==0&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function sT(e){if(e.isCheckStableRunning||e.callbackScheduled)return;e.callbackScheduled=!0;function t(){Rd(()=>{e.callbackScheduled=!1,Hc(e),e.isCheckStableRunning=!0,xd(e),e.isCheckStableRunning=!1})}e.scheduleInRootZone?Zone.root.run(()=>{t()}):e._outer.run(()=>{t()}),Hc(e)}function aT(e){let t=()=>{sT(e)},n=oT++;e._inner=e._inner.fork({name:"angular",properties:{[Nd]:!0,[Ti]:n,[Ti+n]:!0},onInvokeTask:(r,o,i,s,a,l)=>{if(lT(l))return r.invokeTask(i,s,a,l);try{return qg(e),r.invokeTask(i,s,a,l)}finally{(e.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||e.shouldCoalesceRunChangeDetection)&&t(),jg(e)}},onInvoke:(r,o,i,s,a,l,c)=>{try{return qg(e),r.invoke(i,s,a,l,c)}finally{e.shouldCoalesceRunChangeDetection&&!e.callbackScheduled&&!uT(l)&&t(),jg(e)}},onHasTask:(r,o,i,s)=>{r.hasTask(i,s),o===i&&(s.change=="microTask"?(e._hasPendingMicrotasks=s.microTask,Hc(e),xd(e)):s.change=="macroTask"&&(e.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,o,i,s)=>(r.handleError(i,s),e.runOutsideAngular(()=>e.onError.emit(s)),!1)})}function Hc(e){e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&e.callbackScheduled===!0?e.hasPendingMicrotasks=!0:e.hasPendingMicrotasks=!1}function qg(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function jg(e){e._nesting--,xd(e)}var wi=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new vt;onMicrotaskEmpty=new vt;onStable=new vt;onError=new vt;run(t,n,r){return t.apply(n,r)}runGuarded(t,n,r){return t.apply(n,r)}runOutsideAngular(t){return t()}runTask(t,n,r,o){return t.apply(n,r)}};function lT(e){return Om(e,"__ignore_ng_zone__")}function uT(e){return Om(e,"__scheduler_tick__")}function Om(e,t){return!Array.isArray(e)||e.length!==1?!1:e[0]?.data?.[t]===!0}var tn=class{_console=console;handleError(t){this._console.error("ERROR",t)}},Gt=new re("",{factory:()=>{let e=z(Dt),t=z(Ue),n;return r=>{e.runOutsideAngular(()=>{t.destroyed&&!n?setTimeout(()=>{throw r}):(n??=t.get(tn),n.handleError(r))})}}}),Fm={provide:Pr,useValue:()=>{let e=z(tn,{optional:!0})},multi:!0},cT=new re("",{factory:()=>{let e=z(je).defaultView;if(!e)return;let t=z(Gt),n=i=>{t(i.reason),i.preventDefault()},r=i=>{i.error?t(i.error):t(new Error(i.message,{cause:i})),i.preventDefault()},o=()=>{e.addEventListener("unhandledrejection",n),e.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(o):o(),z(sn).onDestroy(()=>{e.removeEventListener("error",r),e.removeEventListener("unhandledrejection",n)})}});function Pd(){return kr([Xg(()=>{z(cT)})])}function Le(e,t){let[n,r,o]=gc(e,t?.equal),i=n,s=i[Tt];return i.set=r,i.update=o,i.asReadonly=kd.bind(i),i}function kd(){let e=this[Tt];if(e.readonlyFn===void 0){let t=()=>this();t[Tt]=e,e.readonlyFn=t}return e.readonlyFn}var Ar=class{},Oi=new re("",{factory:()=>!0});var Od=new re(""),Fi=(()=>{class e{internalPendingTasks=z(qn);scheduler=z(Ar);errorHandler=z(Gt);add(){let n=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(n)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(n))}}run(n){let r=this.add();n().catch(this.errorHandler).finally(r)}static \u0275prov=te({token:e,providedIn:"root",factory:()=>new e})}return e})(),Fd=(()=>{class e{static \u0275prov=te({token:e,providedIn:"root",factory:()=>new $c})}return e})(),$c=class{dirtyEffectCount=0;queues=new Map;add(t){this.enqueue(t),this.schedule(t)}schedule(t){t.dirty&&this.dirtyEffectCount++}remove(t){let n=t.zone,r=this.queues.get(n);r.has(t)&&(r.delete(t),t.dirty&&this.dirtyEffectCount--)}enqueue(t){let n=t.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(t)||r.add(t)}flush(){for(;this.dirtyEffectCount>0;){let t=!1;for(let[n,r]of this.queues)n===null?t||=this.flushQueue(r):t||=n.run(()=>this.flushQueue(r));t||(this.dirtyEffectCount=0)}}flushQueue(t){let n=!1;for(let r of t)r.dirty&&(this.dirtyEffectCount--,n=!0,r.run());return n}},Gc=class{[Tt];constructor(t){this[Tt]=t}destroy(){this[Tt].destroy()}};function an(e){return mc(e)}function qi(e){return{toString:e}.toString()}function vT(e){return typeof e=="function"}function fy(e,t,n,r){t!==null?t.applyValueToInputSignal(t,r):e[n]=r}var Ua=class{previousValue;currentValue;firstChange;constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}},tl=(()=>{let e=()=>py;return e.ngInherit=!0,e})();function py(e){return e.type.prototype.ngOnChanges&&(e.setInput=_T),ET}function ET(){let e=gy(this),t=e?.current;if(t){let n=e.previous;if(n===xr)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function _T(e,t,n,r,o){let i=this.declaredInputs[r],s=gy(e)||CT(e,{previous:xr,current:null}),a=s.current||(s.current={}),l=s.previous,c=l[i];a[i]=new Ua(c&&c.currentValue,n,l===xr),fy(e,t,o,n)}var hy="__ngSimpleChanges__";function gy(e){return e[hy]||null}function CT(e,t){return e[hy]=t}var Lm=[];var xe=function(e,t=null,n){for(let r=0;r<Lm.length;r++){let o=Lm[r];o(e,t,n)}},we=(function(e){return e[e.TemplateCreateStart=0]="TemplateCreateStart",e[e.TemplateCreateEnd=1]="TemplateCreateEnd",e[e.TemplateUpdateStart=2]="TemplateUpdateStart",e[e.TemplateUpdateEnd=3]="TemplateUpdateEnd",e[e.LifecycleHookStart=4]="LifecycleHookStart",e[e.LifecycleHookEnd=5]="LifecycleHookEnd",e[e.OutputStart=6]="OutputStart",e[e.OutputEnd=7]="OutputEnd",e[e.BootstrapApplicationStart=8]="BootstrapApplicationStart",e[e.BootstrapApplicationEnd=9]="BootstrapApplicationEnd",e[e.BootstrapComponentStart=10]="BootstrapComponentStart",e[e.BootstrapComponentEnd=11]="BootstrapComponentEnd",e[e.ChangeDetectionStart=12]="ChangeDetectionStart",e[e.ChangeDetectionEnd=13]="ChangeDetectionEnd",e[e.ChangeDetectionSyncStart=14]="ChangeDetectionSyncStart",e[e.ChangeDetectionSyncEnd=15]="ChangeDetectionSyncEnd",e[e.AfterRenderHooksStart=16]="AfterRenderHooksStart",e[e.AfterRenderHooksEnd=17]="AfterRenderHooksEnd",e[e.ComponentStart=18]="ComponentStart",e[e.ComponentEnd=19]="ComponentEnd",e[e.DeferBlockStateStart=20]="DeferBlockStateStart",e[e.DeferBlockStateEnd=21]="DeferBlockStateEnd",e[e.DynamicComponentStart=22]="DynamicComponentStart",e[e.DynamicComponentEnd=23]="DynamicComponentEnd",e[e.HostBindingsUpdateStart=24]="HostBindingsUpdateStart",e[e.HostBindingsUpdateEnd=25]="HostBindingsUpdateEnd",e})(we||{});function IT(e,t,n){let{ngOnChanges:r,ngOnInit:o,ngDoCheck:i}=t.type.prototype;if(r){let s=py(t);(n.preOrderHooks??=[]).push(e,s),(n.preOrderCheckHooks??=[]).push(e,s)}o&&(n.preOrderHooks??=[]).push(0-e,o),i&&((n.preOrderHooks??=[]).push(e,i),(n.preOrderCheckHooks??=[]).push(e,i))}function TT(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){let i=e.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:f}=i;s&&(e.contentHooks??=[]).push(-n,s),a&&((e.contentHooks??=[]).push(n,a),(e.contentCheckHooks??=[]).push(n,a)),l&&(e.viewHooks??=[]).push(-n,l),c&&((e.viewHooks??=[]).push(n,c),(e.viewCheckHooks??=[]).push(n,c)),f!=null&&(e.destroyHooks??=[]).push(n,f)}}function ka(e,t,n){my(e,t,3,n)}function Oa(e,t,n,r){(e[he]&3)===n&&my(e,t,n,r)}function Ld(e,t){let n=e[he];(n&3)===t&&(n&=16383,n+=1,e[he]=n)}function my(e,t,n,r){let o=r!==void 0?e[Lr]&65535:0,i=r??-1,s=t.length-1,a=0;for(let l=o;l<s;l++)if(typeof t[l+1]=="number"){if(a=t[l],r!=null&&a>=r)break}else t[l]<0&&(e[Lr]+=65536),(a<i||i==-1)&&(wT(e,n,t,l),e[Lr]=(e[Lr]&4294901760)+l+2),l++}function Um(e,t){xe(we.LifecycleHookStart,e,t);let n=ie(null);try{t.call(e)}finally{ie(n),xe(we.LifecycleHookEnd,e,t)}}function wT(e,t,n,r){let o=n[r]<0,i=n[r+1],s=o?-n[r]:n[r],a=e[s];o?e[he]>>14<e[Lr]>>16&&(e[he]&3)===t&&(e[he]+=16384,Um(a,i)):Um(a,i)}var Ao=-1,Gr=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(t,n,r,o){this.factory=t,this.name=o,this.canSeeViewProviders=n,this.injectImpl=r}};function DT(e){return(e.flags&8)!==0}function ST(e){return(e.flags&16)!==0}function bT(e,t,n){let r=0;for(;r<n.length;){let o=n[r];if(typeof o=="number"){if(o!==0)break;r++;let i=n[r++],s=n[r++],a=n[r++];e.setAttribute(t,s,a,i)}else{let i=o,s=n[++r];MT(i)?e.setProperty(t,i,s):e.setAttribute(t,i,s),r++}}return r}function AT(e){return e===3||e===4||e===6}function MT(e){return e.charCodeAt(0)===64}function nl(e,t){if(!(t===null||t.length===0))if(e===null||e.length===0)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){let o=t[r];typeof o=="number"?n=o:n===0||(n===-1||n===2?Bm(e,n,o,null,t[++r]):Bm(e,n,o,null,null))}}return e}function Bm(e,t,n,r,o){let i=0,s=e.length;if(t===-1)s=-1;else for(;i<e.length;){let a=e[i++];if(typeof a=="number"){if(a===t){s=-1;break}else if(a>t){s=i-1;break}}}for(;i<e.length;){let a=e[i];if(typeof a=="number")break;if(a===n){o!==null&&(e[i+1]=o);return}i++,o!==null&&i++}s!==-1&&(e.splice(s,0,t),i=s+1),e.splice(i++,0,n),o!==null&&e.splice(i++,0,o)}function yy(e){return e!==Ao}function Ba(e){return e&32767}function RT(e){return e>>16}function Va(e,t){let n=RT(e),r=t;for(;n>0;)r=r[Or],n--;return r}var Wd=!0;function Vm(e){let t=Wd;return Wd=e,t}var NT=256,vy=NT-1,Ey=5,xT=0,Sn={};function PT(e,t,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Nr)&&(r=n[Nr]),r==null&&(r=n[Nr]=xT++);let o=r&vy,i=1<<o;t.data[e+(o>>Ey)]|=i}function Ha(e,t){let n=_y(e,t);if(n!==-1)return n;let r=t[ce];r.firstCreatePass&&(e.injectorIndex=t.length,Ud(r.data,e),Ud(t,null),Ud(r.blueprint,null));let o=gf(e,t),i=e.injectorIndex;if(yy(o)){let s=Ba(o),a=Va(o,t),l=a[ce].data;for(let c=0;c<8;c++)t[i+c]=a[s+c]|l[s+c]}return t[i+8]=o,i}function Ud(e,t){e.push(0,0,0,0,0,0,0,0,t)}function _y(e,t){return e.injectorIndex===-1||e.parent&&e.parent.injectorIndex===e.injectorIndex||t[e.injectorIndex+8]===null?-1:e.injectorIndex}function gf(e,t){if(e.parent&&e.parent.injectorIndex!==-1)return e.parent.injectorIndex;let n=0,r=null,o=t;for(;o!==null;){if(r=Dy(o),r===null)return Ao;if(n++,o=o[Or],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Ao}function Jd(e,t,n){PT(e,t,n)}function Cy(e,t,n){if(n&8||e!==void 0)return e;_a(t,"NodeInjector")}function Iy(e,t,n,r){if(n&8&&r===void 0&&(r=null),(n&3)===0){let o=e[Bn],i=Nt(void 0);try{return o?o.get(t,r,n&8):td(t,r,n&8)}finally{Nt(i)}}return Cy(r,t,n)}function Ty(e,t,n,r=0,o){if(e!==null){if(t[he]&2048&&!(r&2)){let s=UT(e,t,n,r,Sn);if(s!==Sn)return s}let i=wy(e,t,n,r,Sn);if(i!==Sn)return i}return Iy(t,n,r,o)}function wy(e,t,n,r,o){let i=FT(n);if(typeof i=="function"){if(!Sd(t,e,r))return r&1?Cy(o,n,r):Iy(t,n,r,o);try{let s;if(s=i(r),s==null&&!(r&8))_a(n);else return s}finally{bd()}}else if(typeof i=="number"){let s=null,a=_y(e,t),l=Ao,c=r&1?t[xt][Vt]:null;for((a===-1||r&4)&&(l=a===-1?gf(e,t):t[a+8],l===Ao||!$m(r,!1)?a=-1:(s=t[ce],a=Ba(l),t=Va(l,t)));a!==-1;){let f=t[ce];if(Hm(i,a,f.data)){let p=kT(a,t,n,s,r,c);if(p!==Sn)return p}l=t[a+8],l!==Ao&&$m(r,t[ce].data[a+8]===c)&&Hm(i,a,t)?(s=f,a=Ba(l),t=Va(l,t)):a=-1}}return o}function kT(e,t,n,r,o,i){let s=t[ce],a=s.data[e+8],l=r==null?ur(a)&&Wd:r!=s&&(a.type&3)!==0,c=o&1&&i===a,f=OT(a,s,n,l,c);return f!==null?$a(t,s,f,a,o):Sn}function OT(e,t,n,r,o){let i=e.providerIndexes,s=t.data,a=i&1048575,l=e.directiveStart,c=e.directiveEnd,f=i>>20,p=r?a:a+f,h=o?a+f:c;for(let g=p;g<h;g++){let m=s[g];if(g<l&&n===m||g>=l&&m.type===n)return g}if(o){let g=s[l];if(g&&cr(g)&&g.type===n)return l}return null}function $a(e,t,n,r,o){let i=e[n],s=t.data;if(i instanceof Gr){let a=i;if(a.resolving)throw ed("");let l=Vm(a.canSeeViewProviders);a.resolving=!0;let c=s[n].type||s[n],f,p=a.injectImpl?Nt(a.injectImpl):null,h=Sd(e,r,0);try{i=e[n]=a.factory(void 0,o,s,e,r),t.firstCreatePass&&n>=r.directiveStart&&IT(n,s[n],t)}finally{p!==null&&Nt(p),Vm(l),a.resolving=!1,bd()}}return i}function FT(e){if(typeof e=="string")return e.charCodeAt(0)||0;let t=e.hasOwnProperty(Nr)?e[Nr]:void 0;return typeof t=="number"?t>=0?t&vy:LT:t}function Hm(e,t,n){let r=1<<e;return!!(n[t+(e>>Ey)]&r)}function $m(e,t){return!(e&2)&&!(e&1&&t)}var $r=class{_tNode;_lView;constructor(t,n){this._tNode=t,this._lView=n}get(t,n,r){return Ty(this._tNode,this._lView,t,wr(r),n)}};function LT(){return new $r($t(),Ie())}function rl(e){return qi(()=>{let t=e.prototype.constructor,n=t[Ci]||Yd(t),r=Object.prototype,o=Object.getPrototypeOf(e.prototype).constructor;for(;o&&o!==r;){let i=o[Ci]||Yd(o);if(i&&i!==n)return i;o=Object.getPrototypeOf(o)}return i=>new i})}function Yd(e){return qc(e)?()=>{let t=Yd(st(e));return t&&t()}:Dr(e)}function UT(e,t,n,r,o){let i=e,s=t;for(;i!==null&&s!==null&&s[he]&2048&&!Do(s);){let a=wy(i,s,n,r|2,Sn);if(a!==Sn)return a;let l=i.parent;if(!l){let c=s[ud];if(c){let f=c.get(n,Sn,r);if(f!==Sn)return f}l=Dy(s),s=s[Or]}i=l}return o}function Dy(e){let t=e[ce],n=t.type;return n===2?t.declTNode:n===1?e[Vt]:null}function BT(){return mf($t(),Ie())}function mf(e,t){return new yf(wn(e,t))}var yf=(()=>{class e{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=BT}return e})();function Sy(e){return(e.flags&128)===128}var vf=(function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e})(vf||{}),by=new Map,VT=0;function HT(){return VT++}function $T(e){by.set(e[Vn],e)}function Zd(e){by.delete(e[Vn])}var Gm="__ngContext__";function Mo(e,t){Hn(t)?(e[Gm]=t[Vn],$T(t)):e[Gm]=t}function Ay(e){return Ry(e[wo])}function My(e){return Ry(e[Bt])}function Ry(e){for(;e!==null&&!rn(e);)e=e[Bt];return e}var GT;function Ef(e){GT=e}var ol=new re("",{factory:()=>zT}),zT="ng";var il=new re(""),ji=new re("",{providedIn:"platform",factory:()=>"unknown"});var sl=new re("",{factory:()=>z(je).body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var Ny="r";var xy="di";var Py=!1,ky=new re("",{factory:()=>Py});var qT=(e,t,n,r)=>{};function jT(e,t,n,r){qT(e,t,n,r)}function _f(e){return(e.flags&32)===32}var WT=()=>null;function Oy(e,t,n=!1){return WT(e,t,n)}function Fy(e,t){let n=e.contentQueries;if(n!==null){let r=ie(null);try{for(let o=0;o<n.length;o+=2){let i=n[o],s=n[o+1];if(s!==-1){let a=e.data[s];Dd(i),a.contentQueries(2,t[s],s)}}}finally{ie(r)}}}function Kd(e,t,n){Dd(0);let r=ie(null);try{t(e,n)}finally{ie(r)}}function Ly(e,t,n){if(dd(t)){let r=ie(null);try{let o=t.directiveStart,i=t.directiveEnd;for(let s=o;s<i;s++){let a=e.data[s];if(a.contentQueries){let l=n[s];a.contentQueries(1,l,s)}}}finally{ie(r)}}}var un=(function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e[e.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",e})(un||{});var Ga=class{changingThisBreaksApplicationSecurity;constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ma})`}};function Cf(e){return e instanceof Ga?e.changingThisBreaksApplicationSecurity:e}function Uy(e,t){let n=By(e);if(n!=null&&n!==t){if(n==="ResourceURL"&&t==="URL")return!0;throw new Error(`Required a safe ${t}, got a ${n} (see ${ma})`)}return n===t}function By(e){return e instanceof Ga&&e.getTypeName()||null}var JT=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Vy(e){return e=String(e),e.match(JT)?e:"unsafe:"+e}function YT(e,t){return e.createText(t)}function ZT(e,t,n){e.setValue(t,n)}function Hy(e,t,n){return e.createElement(t,n)}function za(e,t,n,r,o){e.insertBefore(t,n,r,o)}function $y(e,t,n){e.appendChild(t,n)}function zm(e,t,n,r,o){r!==null?za(e,t,n,r,o):$y(e,t,n)}function Gy(e,t,n,r){e.removeChild(null,t,n,r)}function KT(e,t,n){e.setAttribute(t,"style",n)}function QT(e,t,n){n===""?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function zy(e,t,n){let{mergedAttrs:r,classes:o,styles:i}=n;r!==null&&bT(e,t,r),o!==null&&QT(e,t,o),i!==null&&KT(e,t,i)}var If=(function(e){return e[e.NONE=0]="NONE",e[e.HTML=1]="HTML",e[e.STYLE=2]="STYLE",e[e.SCRIPT=3]="SCRIPT",e[e.URL=4]="URL",e[e.RESOURCE_URL=5]="RESOURCE_URL",e})(If||{});function al(e){let t=XT();return t?t.sanitize(If.URL,e)||"":Uy(e,"URL")?Cf(e):Vy(_o(e))}function XT(){let e=Ie();return e&&e[Tn].sanitizer}function qy(e){return e instanceof Function?e():e}function ew(e,t,n){let r=e.length;for(;;){let o=e.indexOf(t,n);if(o===-1)return o;if(o===0||e.charCodeAt(o-1)<=32){let i=t.length;if(o+i===r||e.charCodeAt(o+i)<=32)return o}n=o+1}}var jy="ng-template";function tw(e,t,n,r){let o=0;if(r){for(;o<t.length&&typeof t[o]=="string";o+=2)if(t[o]==="class"&&ew(t[o+1].toLowerCase(),n,0)!==-1)return!0}else if(Tf(e))return!1;if(o=t.indexOf(1,o),o>-1){let i;for(;++o<t.length&&typeof(i=t[o])=="string";)if(i.toLowerCase()===n)return!0}return!1}function Tf(e){return e.type===4&&e.value!==jy}function nw(e,t,n){let r=e.type===4&&!n?jy:e.value;return t===r}function rw(e,t,n){let r=4,o=e.attrs,i=o!==null?sw(o):0,s=!1;for(let a=0;a<t.length;a++){let l=t[a];if(typeof l=="number"){if(!s&&!ln(r)&&!ln(l))return!1;if(s&&ln(l))continue;s=!1,r=l|r&1;continue}if(!s)if(r&4){if(r=2|r&1,l!==""&&!nw(e,l,n)||l===""&&t.length===1){if(ln(r))return!1;s=!0}}else if(r&8){if(o===null||!tw(e,o,l,n)){if(ln(r))return!1;s=!0}}else{let c=t[++a],f=ow(l,o,Tf(e),n);if(f===-1){if(ln(r))return!1;s=!0;continue}if(c!==""){let p;if(f>i?p="":p=o[f+1].toLowerCase(),r&2&&c!==p){if(ln(r))return!1;s=!0}}}}return ln(r)||s}function ln(e){return(e&1)===0}function ow(e,t,n,r){if(t===null)return-1;let o=0;if(r||!n){let i=!1;for(;o<t.length;){let s=t[o];if(s===e)return o;if(s===3||s===6)i=!0;else if(s===1||s===2){let a=t[++o];for(;typeof a=="string";)a=t[++o];continue}else{if(s===4)break;if(s===0){o+=4;continue}}o+=i?1:2}return-1}else return aw(t,e)}function iw(e,t,n=!1){for(let r=0;r<t.length;r++)if(rw(e,t[r],n))return!0;return!1}function sw(e){for(let t=0;t<e.length;t++){let n=e[t];if(AT(n))return t}return e.length}function aw(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){let r=e[n];if(typeof r=="number")return-1;if(r===t)return n;n++}return-1}function qm(e,t){return e?":not("+t.trim()+")":t}function lw(e){let t=e[0],n=1,r=2,o="",i=!1;for(;n<e.length;){let s=e[n];if(typeof s=="string")if(r&2){let a=e[++n];o+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?o+="."+s:r&4&&(o+=" "+s);else o!==""&&!ln(s)&&(t+=qm(i,o),o=""),r=s,i=i||!ln(r);n++}return o!==""&&(t+=qm(i,o)),t}function uw(e){return e.map(lw).join(",")}function cw(e){let t=[],n=[],r=1,o=2;for(;r<e.length;){let i=e[r];if(typeof i=="string")o===2?i!==""&&t.push(i,e[++r]):o===8&&n.push(i);else{if(!ln(o))break;o=i}r++}return n.length&&t.push(1,...n),t}var zt={};function wf(e,t,n,r,o,i,s,a,l,c,f){let p=tt+r,h=p+o,g=dw(p,h),m=typeof c=="function"?c():c;return g[ce]={type:e,blueprint:g,template:n,queries:null,viewQuery:a,declTNode:t,data:g.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof i=="function"?i():i,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:l,consts:m,incompleteFirstPass:!1,ssrId:f}}function dw(e,t){let n=[];for(let r=0;r<t;r++)n.push(r<e?null:zt);return n}function fw(e){let t=e.tView;return t===null||t.incompleteFirstPass?e.tView=wf(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):t}function Df(e,t,n,r,o,i,s,a,l,c,f){let p=t.blueprint.slice();return p[nn]=o,p[he]=r|4|128|8|64|1024,(c!==null||e&&e[he]&2048)&&(p[he]|=2048),hd(p),p[Xe]=p[Or]=e,p[$e]=n,p[Tn]=s||e&&e[Tn],p[Ge]=a||e&&e[Ge],p[Bn]=l||e&&e[Bn]||null,p[Vt]=i,p[Vn]=HT(),p[Io]=f,p[ud]=c,p[xt]=t.type==2?e[xt]:p,p}function pw(e,t,n){let r=wn(t,e),o=fw(n),i=e[Tn].rendererFactory,s=Sf(e,Df(e,o,null,Wy(n),r,t,null,i.createRenderer(r,n),null,null,null));return e[t.index]=s}function Wy(e){let t=16;return e.signals?t=4096:e.onPush&&(t=64),t}function Jy(e,t,n,r){if(n===0)return-1;let o=t.length;for(let i=0;i<n;i++)t.push(r),e.blueprint.push(r),e.data.push(null);return o}function Sf(e,t){return e[wo]?e[ld][Bt]=t:e[wo]=t,e[ld]=t,t}function ye(e=1){Yy(St(),Ie(),$n()+e,!1)}function Yy(e,t,n,r){if(!r)if((t[he]&3)===3){let i=e.preOrderCheckHooks;i!==null&&ka(t,i,n)}else{let i=e.preOrderHooks;i!==null&&Oa(t,i,0,n)}dr(n)}var ll=(function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e})(ll||{});function Qd(e,t,n,r){let o=ie(null);try{let[i,s,a]=e.inputs[n],l=null;(s&ll.SignalBased)!==0&&(l=t[i][Tt]),l!==null&&l.transformFn!==void 0?r=l.transformFn(r):a!==null&&(r=a.call(t,r)),e.setInput!==null?e.setInput(t,l,r,n,i):fy(t,l,i,r)}finally{ie(o)}}var bn=(function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e})(bn||{}),hw;function bf(e,t){return hw(e,t)}var zr=new Set,Af=(function(e){return e[e.CHANGE_DETECTION=0]="CHANGE_DETECTION",e[e.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",e})(Af||{}),Yr=new re(""),jm=new Set;function Zr(e){jm.has(e)||(jm.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}var Zy=(()=>{class e{impl=null;execute(){this.impl?.execute()}static \u0275prov=te({token:e,providedIn:"root",factory:()=>new e})}return e})();var Ky=new re("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null,injector:z(Ue)})});function Qy(e,t,n){let r=e.get(Ky);if(Array.isArray(t))for(let o of t)r.queue.add(o),n?.detachedLeaveAnimationFns?.push(o);else r.queue.add(t),n?.detachedLeaveAnimationFns?.push(t);r.scheduler&&r.scheduler(e)}function gw(e,t){let n=e.get(Ky);if(t.detachedLeaveAnimationFns){for(let r of t.detachedLeaveAnimationFns)n.queue.delete(r);t.detachedLeaveAnimationFns=void 0}}function mw(e,t){for(let[n,r]of t)Qy(e,r.animateFns)}function Wm(e,t,n,r){let o=e?.[Br]?.enter;t!==null&&o&&o.has(n.index)&&mw(r,o)}function bo(e,t,n,r,o,i,s,a){if(o!=null){let l,c=!1;rn(o)?l=o:Hn(o)&&(c=!0,o=o[nn]);let f=Ht(o);e===0&&r!==null?(Wm(a,r,i,n),s==null?$y(t,r,f):za(t,r,f,s||null,!0)):e===1&&r!==null?(Wm(a,r,i,n),za(t,r,f,s||null,!0)):e===2?Jm(a,i,n,p=>{Gy(t,f,c,p)}):e===3&&Jm(a,i,n,()=>{t.destroyNode(f)}),l!=null&&Mw(t,e,n,l,i,r,s)}}function yw(e,t){Xy(e,t),t[nn]=null,t[Vt]=null}function vw(e,t,n,r,o,i){r[nn]=o,r[Vt]=t,cl(e,r,n,1,o,i)}function Xy(e,t){t[Tn].changeDetectionScheduler?.notify(9),cl(e,t,t[Ge],2,null,null)}function Ew(e){let t=e[wo];if(!t)return Bd(e[ce],e);for(;t;){let n=null;if(Hn(t))n=t[wo];else{let r=t[ze];r&&(n=r)}if(!n){for(;t&&!t[Bt]&&t!==e;)Hn(t)&&Bd(t[ce],t),t=t[Xe];t===null&&(t=e),Hn(t)&&Bd(t[ce],t),n=t&&t[Bt]}t=n}}function Mf(e,t){let n=e[Ni],r=n.indexOf(t);n.splice(r,1)}function ul(e,t){if(Vr(t))return;let n=t[Ge];n.destroyNode&&cl(e,t,n,3,null,null),Ew(t)}function Bd(e,t){if(Vr(t))return;let n=ie(null);try{t[he]&=-129,t[he]|=256,t[Pt]&&fi(t[Pt]),Iw(e,t),Cw(e,t),t[ce].type===1&&t[Ge].destroy();let r=t[Fr];if(r!==null&&rn(t[Xe])){r!==t[Xe]&&Mf(r,t);let o=t[Ur];o!==null&&o.detachView(e)}Zd(t)}finally{ie(n)}}function Jm(e,t,n,r){let o=e?.[Br];if(o==null||o.leave==null||!o.leave.has(t.index))return r(!1);e&&zr.add(e[Vn]),Qy(n,()=>{if(o.leave&&o.leave.has(t.index)){let s=o.leave.get(t.index),a=[];if(s){for(let l=0;l<s.animateFns.length;l++){let c=s.animateFns[l],{promise:f}=c();a.push(f)}o.detachedLeaveAnimationFns=void 0}o.running=Promise.allSettled(a),_w(e,r)}else e&&zr.delete(e[Vn]),r(!1)},o)}function _w(e,t){let n=e[Br]?.running;if(n){n.then(()=>{e[Br].running=void 0,zr.delete(e[Vn]),t(!0)});return}t(!1)}function Cw(e,t){let n=e.cleanup,r=t[To];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let a=n[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[n[s+1]];n[s].call(a)}r!==null&&(t[To]=null);let o=t[Fn];if(o!==null){t[Fn]=null;for(let s=0;s<o.length;s++){let a=o[s];a()}}let i=t[Mi];if(i!==null){t[Mi]=null;for(let s of i)s.destroy()}}function Iw(e,t){let n;if(e!=null&&(n=e.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let o=t[n[r]];if(!(o instanceof Gr)){let i=n[r+1];if(Array.isArray(i))for(let s=0;s<i.length;s+=2){let a=o[i[s]],l=i[s+1];xe(we.LifecycleHookStart,a,l);try{l.call(a)}finally{xe(we.LifecycleHookEnd,a,l)}}else{xe(we.LifecycleHookStart,o,i);try{i.call(o)}finally{xe(we.LifecycleHookEnd,o,i)}}}}}function Tw(e,t,n){return ww(e,t.parent,n)}function ww(e,t,n){let r=t;for(;r!==null&&r.type&168;)t=r,r=t.parent;if(r===null)return n[nn];if(ur(r)){let{encapsulation:o}=e.data[r.directiveStart+r.componentOffset];if(o===un.None||o===un.Emulated)return null}return wn(r,n)}function Dw(e,t,n){return bw(e,t,n)}function Sw(e,t,n){return e.type&40?wn(e,n):null}var bw=Sw,Ym;function Rf(e,t,n,r){let o=Tw(e,r,t),i=t[Ge],s=r.parent||t[Vt],a=Dw(s,r,t);if(o!=null)if(Array.isArray(n))for(let l=0;l<n.length;l++)zm(i,o,n[l],a,!1);else zm(i,o,n,a,!1);Ym!==void 0&&Ym(i,r,t,n,o)}function Ui(e,t){if(t!==null){let n=t.type;if(n&3)return wn(t,e);if(n&4)return Xd(-1,e[t.index]);if(n&8){let r=t.child;if(r!==null)return Ui(e,r);{let o=e[t.index];return rn(o)?Xd(-1,o):Ht(o)}}else{if(n&128)return Ui(e,t.next);if(n&32)return bf(t,e)()||Ht(e[t.index]);{let r=ev(e,t);if(r!==null){if(Array.isArray(r))return r[0];let o=sr(e[xt]);return Ui(o,r)}else return Ui(e,t.next)}}}return null}function ev(e,t){if(t!==null){let r=e[xt][Vt],o=t.projection;return r.projection[o]}return null}function Xd(e,t){let n=ze+e+1;if(n<t.length){let r=t[n],o=r[ce].firstChild;if(o!==null)return Ui(r,o)}return t[lr]}function Nf(e,t,n,r,o,i,s){for(;n!=null;){let a=r[Bn];if(n.type===128){n=n.next;continue}let l=r[n.index],c=n.type;if(s&&t===0&&(l&&Mo(Ht(l),r),n.flags|=2),!_f(n))if(c&8)Nf(e,t,n.child,r,o,i,!1),bo(t,e,a,o,l,n,i,r);else if(c&32){let f=bf(n,r),p;for(;p=f();)bo(t,e,a,o,p,n,i,r);bo(t,e,a,o,l,n,i,r)}else c&16?Aw(e,t,r,n,o,i):bo(t,e,a,o,l,n,i,r);n=s?n.projectionNext:n.next}}function cl(e,t,n,r,o,i){Nf(n,r,e.firstChild,t,o,i,!1)}function Aw(e,t,n,r,o,i){let s=n[xt],l=s[Vt].projection[r.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++){let f=l[c];bo(t,e,n[Bn],o,f,r,i,n)}else{let c=l,f=s[Xe];Sy(r)&&(c.flags|=128),Nf(e,t,c,f,o,i,!0)}}function Mw(e,t,n,r,o,i,s){let a=r[lr],l=Ht(r);a!==l&&bo(t,e,n,i,a,o,s);for(let c=ze;c<r.length;c++){let f=r[c];cl(f[ce],f,e,t,i,a)}}function Rw(e,t,n,r,o){if(t)o?e.addClass(n,r):e.removeClass(n,r);else{let i=r.indexOf("-")===-1?void 0:bn.DashCase;o==null?e.removeStyle(n,r,i):(typeof o=="string"&&o.endsWith("!important")&&(o=o.slice(0,-10),i|=bn.Important),e.setStyle(n,r,o,i))}}function tv(e,t,n,r,o){let i=$n(),s=r&2;try{dr(-1),s&&t.length>tt&&Yy(e,t,tt,!1);let a=s?we.TemplateUpdateStart:we.TemplateCreateStart;xe(a,o,n),n(r,o)}finally{dr(i);let a=s?we.TemplateUpdateEnd:we.TemplateCreateEnd;xe(a,o,n)}}function nv(e,t,n){Lw(e,t,n),(n.flags&64)===64&&Uw(e,t,n)}function xf(e,t,n=wn){let r=t.localNames;if(r!==null){let o=t.index+1;for(let i=0;i<r.length;i+=2){let s=r[i+1],a=s===-1?n(t,e):e[s];e[o++]=a}}}function Nw(e,t,n,r){let i=r.get(ky,Py)||n===un.ShadowDom||n===un.ExperimentalIsolatedShadowDom,s=e.selectRootElement(t,i);return xw(s),s}function xw(e){Pw(e)}var Pw=()=>null;function kw(e){return e==="class"?"className":e==="for"?"htmlFor":e==="formaction"?"formAction":e==="innerHtml"?"innerHTML":e==="readonly"?"readOnly":e==="tabindex"?"tabIndex":e}function Ow(e,t,n,r,o,i){let s=t[ce];if(Pf(e,s,t,n,r)){ur(e)&&Fw(t,e.index);return}e.type&3&&(n=kw(n)),rv(e,t,n,r,o,i)}function rv(e,t,n,r,o,i){if(e.type&3){let s=wn(e,t);r=i!=null?i(r,e.value||"",n):r,o.setProperty(s,n,r)}else e.type&12}function Fw(e,t){let n=on(t,e);n[he]&16||(n[he]|=64)}function Lw(e,t,n){let r=n.directiveStart,o=n.directiveEnd;ur(n)&&pw(t,n,e.data[r+n.componentOffset]),e.firstCreatePass||Ha(n,t);let i=n.initialInputs;for(let s=r;s<o;s++){let a=e.data[s],l=$a(t,e,s,n);if(Mo(l,t),i!==null&&Hw(t,s-r,l,a,n,i),cr(a)){let c=on(n.index,t);c[$e]=$a(t,e,s,n)}}}function Uw(e,t,n){let r=n.directiveStart,o=n.directiveEnd,i=n.index,s=wm();try{dr(i);for(let a=r;a<o;a++){let l=e.data[a],c=t[a];Aa(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&Bw(l,c)}}finally{dr(-1),Aa(s)}}function Bw(e,t){e.hostBindings!==null&&e.hostBindings(1,t)}function Vw(e,t){let n=e.directiveRegistry,r=null;if(n)for(let o=0;o<n.length;o++){let i=n[o];iw(t,i.selectors,!1)&&(r??=[],cr(i)?r.unshift(i):r.push(i))}return r}function Hw(e,t,n,r,o,i){let s=i[t];if(s!==null)for(let a=0;a<s.length;a+=2){let l=s[a],c=s[a+1];Qd(r,n,l,c)}}function ov(e,t,n,r,o){let i=tt+n,s=t[ce],a=o(s,t,e,r,n);t[i]=a,So(e,!0);let l=e.type===2;return l?(zy(t[Ge],a,e),(pm()===0||Da(e))&&Mo(a,t),hm()):Mo(a,t),Na()&&(!l||!_f(e))&&Rf(s,t,a,e),e}function iv(e){let t=e;return Cd()?vm():(t=t.parent,So(t,!1)),t}function $w(e,t){let n=e[Bn];if(!n)return;let r;try{r=n.get(Gt,null)}catch{r=null}r?.(t)}function Pf(e,t,n,r,o){let i=e.inputs?.[r],s=e.hostDirectiveInputs?.[r],a=!1;if(s)for(let l=0;l<s.length;l+=2){let c=s[l],f=s[l+1],p=t.data[c];Qd(p,n[c],f,o),a=!0}if(i)for(let l of i){let c=n[l],f=t.data[l];Qd(f,c,r,o),a=!0}return a}function Gw(e,t){let n=on(t,e),r=n[ce];zw(r,n);let o=n[nn];o!==null&&n[Io]===null&&(n[Io]=Oy(o,n[Bn])),xe(we.ComponentStart);try{kf(r,n,n[$e])}finally{xe(we.ComponentEnd,n[$e])}}function zw(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}function kf(e,t,n){Ma(t);try{let r=e.viewQuery;r!==null&&Kd(1,r,n);let o=e.template;o!==null&&tv(e,t,o,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),t[Ur]?.finishViewCreation(e),e.staticContentQueries&&Fy(e,t),e.staticViewQueries&&Kd(2,e.viewQuery,n);let i=e.components;i!==null&&qw(t,i)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[he]&=-5,Ra()}}function qw(e,t){for(let n=0;n<t.length;n++)Gw(e,t[n])}function Of(e,t,n,r){let o=ie(null);try{let i=t.tView,a=e[he]&4096?4096:16,l=Df(e,i,n,a,null,t,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),c=e[t.index];l[Fr]=c;let f=e[Ur];return f!==null&&(l[Ur]=f.createEmbeddedView(i)),kf(i,l,n),l}finally{ie(o)}}function Vi(e,t){return!t||t.firstChild===null||Sy(e)}function Hi(e,t,n,r,o=!1){for(;n!==null;){if(n.type===128){n=o?n.projectionNext:n.next;continue}let i=t[n.index];i!==null&&r.push(Ht(i)),rn(i)&&sv(i,r);let s=n.type;if(s&8)Hi(e,t,n.child,r);else if(s&32){let a=bf(n,t),l;for(;l=a();)r.push(l)}else if(s&16){let a=ev(t,n);if(Array.isArray(a))r.push(...a);else{let l=sr(t[xt]);Hi(l[ce],l,a,r,!0)}}n=o?n.projectionNext:n.next}return r}function sv(e,t){for(let n=ze;n<e.length;n++){let r=e[n],o=r[ce].firstChild;o!==null&&Hi(r[ce],r,o,t)}e[lr]!==e[nn]&&t.push(e[lr])}function av(e){if(e[wa]!==null){for(let t of e[wa])t.impl.addSequence(t);e[wa].length=0}}var lv=[];function jw(e){return e[Pt]??Ww(e)}function Ww(e){let t=lv.pop()??Object.create(Yw);return t.lView=e,t}function Jw(e){e.lView[Pt]!==e&&(e.lView=null,lv.push(e))}var Yw=ke(X({},ui),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:e=>{ki(e.lView)},consumerOnSignalRead(){this.lView[Pt]=this}});function Zw(e){let t=e[Pt]??Object.create(Kw);return t.lView=e,t}var Kw=ke(X({},ui),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:e=>{let t=sr(e.lView);for(;t&&!uv(t[ce]);)t=sr(t);t&&gd(t)},consumerOnSignalRead(){this.lView[Pt]=this}});function uv(e){return e.type!==2}function cv(e){if(e[Mi]===null)return;let t=!0;for(;t;){let n=!1;for(let r of e[Mi])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));t=n&&!!(e[he]&8192)}}var Qw=100;function dv(e,t=0){let r=e[Tn].rendererFactory,o=!1;o||r.begin?.();try{Xw(e,t)}finally{o||r.end?.()}}function Xw(e,t){let n=Id();try{Td(!0),ef(e,t);let r=0;for(;Pi(e);){if(r===Qw)throw new Z(103,!1);r++,ef(e,1)}}finally{Td(n)}}function eD(e,t,n,r){if(Vr(t))return;let o=t[he],i=!1,s=!1;Ma(t);let a=!0,l=null,c=null;i||(uv(e)?(c=jw(t),l=di(c)):Hs()===null?(a=!1,c=Zw(t),l=di(c)):t[Pt]&&(fi(t[Pt]),t[Pt]=null));try{hd(t),Cm(e.bindingStartIndex),n!==null&&tv(e,t,n,2,r);let f=(o&3)===3;if(!i)if(f){let g=e.preOrderCheckHooks;g!==null&&ka(t,g,null)}else{let g=e.preOrderHooks;g!==null&&Oa(t,g,0,null),Ld(t,0)}if(s||tD(t),cv(t),fv(t,0),e.contentQueries!==null&&Fy(e,t),!i)if(f){let g=e.contentCheckHooks;g!==null&&ka(t,g)}else{let g=e.contentHooks;g!==null&&Oa(t,g,1),Ld(t,1)}rD(e,t);let p=e.components;p!==null&&hv(t,p,0);let h=e.viewQuery;if(h!==null&&Kd(2,h,r),!i)if(f){let g=e.viewCheckHooks;g!==null&&ka(t,g)}else{let g=e.viewHooks;g!==null&&Oa(t,g,2),Ld(t,2)}if(e.firstUpdatePass===!0&&(e.firstUpdatePass=!1),t[Ta]){for(let g of t[Ta])g();t[Ta]=null}i||(av(t),t[he]&=-73)}catch(f){throw i||ki(t),f}finally{c!==null&&($s(c,l),a&&Jw(c)),Ra()}}function fv(e,t){for(let n=Ay(e);n!==null;n=My(n))for(let r=ze;r<n.length;r++){let o=n[r];pv(o,t)}}function tD(e){for(let t=Ay(e);t!==null;t=My(t)){if(!(t[he]&2))continue;let n=t[Ni];for(let r=0;r<n.length;r++){let o=n[r];gd(o)}}}function nD(e,t,n){xe(we.ComponentStart);let r=on(t,e);try{pv(r,n)}finally{xe(we.ComponentEnd,r[$e])}}function pv(e,t){Sa(e)&&ef(e,t)}function ef(e,t){let r=e[ce],o=e[he],i=e[Pt],s=!!(t===0&&o&16);if(s||=!!(o&64&&t===0),s||=!!(o&1024),s||=!!(i?.dirty&&Gs(i)),s||=!1,i&&(i.dirty=!1),e[he]&=-9217,s)eD(r,e,r.template,e[$e]);else if(o&8192){let a=ie(null);try{cv(e),fv(e,1);let l=r.components;l!==null&&hv(e,l,1),av(e)}finally{ie(a)}}}function hv(e,t,n){for(let r=0;r<t.length;r++)nD(e,t[r],n)}function rD(e,t){let n=e.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let o=n[r];if(o<0)dr(~o);else{let i=o,s=n[++r],a=n[++r];Tm(s,i);let l=t[i];xe(we.HostBindingsUpdateStart,l);try{a(2,l)}finally{xe(we.HostBindingsUpdateEnd,l)}}}}finally{dr(-1)}}function Ff(e,t){let n=Id()?64:1088;for(e[Tn].changeDetectionScheduler?.notify(t);e;){e[he]|=n;let r=sr(e);if(Do(e)&&!r)return e;e=r}return null}function gv(e,t,n,r){return[e,!0,0,t,null,r,null,n,null,null]}function mv(e,t){let n=ze+t;if(n<e.length)return e[n]}function dl(e,t,n,r=!0){let o=t[ce];if(oD(o,t,e,n),r){let s=Xd(n,e),a=t[Ge],l=a.parentNode(e[lr]);l!==null&&vw(o,e[Vt],a,t,l,s)}let i=t[Io];i!==null&&i.firstChild!==null&&(i.firstChild=null)}function yv(e,t){let n=$i(e,t);return n!==void 0&&ul(n[ce],n),n}function $i(e,t){if(e.length<=ze)return;let n=ze+t,r=e[n];if(r){let o=r[Fr];o!==null&&o!==e&&Mf(o,r),t>0&&(e[n-1][Bt]=r[Bt]);let i=Si(e,ze+t);yw(r[ce],r);let s=i[Ur];s!==null&&s.detachView(i[ce]),r[Xe]=null,r[Bt]=null,r[he]&=-129}return r}function oD(e,t,n,r){let o=ze+r,i=n.length;r>0&&(n[o-1][Bt]=t),r<i-ze?(t[Bt]=n[o],nd(n,ze+r,t)):(n.push(t),t[Bt]=null),t[Xe]=n;let s=t[Fr];s!==null&&n!==s&&vv(s,t);let a=t[Ur];a!==null&&a.insertView(e),ba(t),t[he]|=128}function vv(e,t){let n=e[Ni],r=t[Xe];if(Hn(r))e[he]|=2;else{let o=r[Xe][xt];t[xt]!==o&&(e[he]|=2)}n===null?e[Ni]=[t]:n.push(t)}var qr=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let t=this._lView,n=t[ce];return Hi(n,t,n.firstChild,[])}constructor(t,n){this._lView=t,this._cdRefInjectingView=n}get context(){return this._lView[$e]}set context(t){this._lView[$e]=t}get destroyed(){return Vr(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[Xe];if(rn(t)){let n=t[Ri],r=n?n.indexOf(this):-1;r>-1&&($i(t,r),Si(n,r))}this._attachedToViewContainer=!1}ul(this._lView[ce],this._lView)}onDestroy(t){md(this._lView,t)}markForCheck(){Ff(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[he]&=-129}reattach(){ba(this._lView),this._lView[he]|=128}detectChanges(){this._lView[he]|=1024,dv(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Z(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let t=Do(this._lView),n=this._lView[Fr];n!==null&&!t&&Mf(n,this._lView),Xy(this._lView[ce],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Z(902,!1);this._appRef=t;let n=Do(this._lView),r=this._lView[Fr];r!==null&&!n&&vv(r,this._lView),ba(this._lView)}};function fl(e,t,n,r,o){let i=e.data[t];if(i===null)i=iD(e,t,n,r,o),Im()&&(i.flags|=32);else if(i.type&64){i.type=n,i.value=r,i.attrs=o;let s=ym();i.injectorIndex=s===null?-1:s.injectorIndex}return So(i,!0),i}function iD(e,t,n,r,o){let i=_d(),s=Cd(),a=s?i:i&&i.parent,l=e.data[t]=aD(e,a,n,t,r,o);return sD(e,l,i,s),l}function sD(e,t,n,r){e.firstChild===null&&(e.firstChild=t),n!==null&&(r?n.child==null&&t.parent!==null&&(n.child=t):n.next===null&&(n.next=t,t.prev=n))}function aD(e,t,n,r,o,i){let s=t?t.injectorIndex:-1,a=0;return mm()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,fieldIndex:-1,customControlIndex:-1,propertyBindings:null,flags:a,providerIndexes:0,value:o,attrs:i,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function lD(e){let t=e[cd]??[],r=e[Xe][Ge],o=[];for(let i of t)i.data[xy]!==void 0?o.push(i):uD(i,r);e[cd]=o}function uD(e,t){let n=0,r=e.firstChild;if(r){let o=e.data[Ny];for(;n<o;){let i=r.nextSibling;Gy(t,r,!1),r=i,n++}}}var cD=()=>null,dD=()=>null;function tf(e,t){return cD(e,t)}function Ev(e,t,n){return dD(e,t,n)}var _v=class{},pl=class{},nf=class{resolveComponentFactory(t){throw new Z(917,!1)}},Wi=class{static NULL=new nf},jr=class{};var Cv=(()=>{class e{static \u0275prov=te({token:e,providedIn:"root",factory:()=>null})}return e})();var Fa={},rf=class{injector;parentInjector;constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,r){let o=this.injector.get(t,Fa,r);return o!==Fa||n===Fa?o:this.parentInjector.get(t,n,r)}};function qa(e,t,n){let r=n?e.styles:null,o=n?e.classes:null,i=0;if(t!==null)for(let s=0;s<t.length;s++){let a=t[s];if(typeof a=="number")i=a;else if(i==1)o=zc(o,a);else if(i==2){let l=a,c=t[++s];r=zc(r,l+": "+c+";")}}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=o:e.classesWithoutHost=o}function qt(e,t=0){let n=Ie();if(n===null)return ue(e,t);let r=$t();return Ty(r,n,st(e),t)}function fD(e,t,n,r,o){let i=r===null?null:{"":-1},s=o(e,n);if(s!==null){let a=s,l=null,c=null;for(let f of s)if(f.resolveHostDirectives!==null){[a,l,c]=f.resolveHostDirectives(s);break}gD(e,t,n,a,i,l,c)}i!==null&&r!==null&&pD(n,r,i)}function pD(e,t,n){let r=e.localNames=[];for(let o=0;o<t.length;o+=2){let i=n[t[o+1]];if(i==null)throw new Z(-301,!1);r.push(t[o],i)}}function hD(e,t,n){t.componentOffset=n,(e.components??=[]).push(t.index)}function gD(e,t,n,r,o,i,s){let a=r.length,l=null;for(let h=0;h<a;h++){let g=r[h];l===null&&cr(g)&&(l=g,hD(e,n,h)),Jd(Ha(n,t),e,g.type)}CD(n,e.data.length,a),l?.viewProvidersResolver&&l.viewProvidersResolver(l);for(let h=0;h<a;h++){let g=r[h];g.providersResolver&&g.providersResolver(g)}let c=!1,f=!1,p=Jy(e,t,a,null);a>0&&(n.directiveToIndex=new Map);for(let h=0;h<a;h++){let g=r[h];if(n.mergedAttrs=nl(n.mergedAttrs,g.hostAttrs),yD(e,n,t,p,g),_D(p,g,o),s!==null&&s.has(g)){let[y,E]=s.get(g);n.directiveToIndex.set(g.type,[p,y+n.directiveStart,E+n.directiveStart])}else(i===null||!i.has(g))&&n.directiveToIndex.set(g.type,p);g.contentQueries!==null&&(n.flags|=4),(g.hostBindings!==null||g.hostAttrs!==null||g.hostVars!==0)&&(n.flags|=64);let m=g.type.prototype;!c&&(m.ngOnChanges||m.ngOnInit||m.ngDoCheck)&&((e.preOrderHooks??=[]).push(n.index),c=!0),!f&&(m.ngOnChanges||m.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(n.index),f=!0),p++}mD(e,n,i)}function mD(e,t,n){for(let r=t.directiveStart;r<t.directiveEnd;r++){let o=e.data[r];if(n===null||!n.has(o))Zm(0,t,o,r),Zm(1,t,o,r),Qm(t,r,!1);else{let i=n.get(o);Km(0,t,i,r),Km(1,t,i,r),Qm(t,r,!0)}}}function Zm(e,t,n,r){let o=e===0?n.inputs:n.outputs;for(let i in o)if(o.hasOwnProperty(i)){let s;e===0?s=t.inputs??={}:s=t.outputs??={},s[i]??=[],s[i].push(r),Iv(t,i)}}function Km(e,t,n,r){let o=e===0?n.inputs:n.outputs;for(let i in o)if(o.hasOwnProperty(i)){let s=o[i],a;e===0?a=t.hostDirectiveInputs??={}:a=t.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,i),Iv(t,s)}}function Iv(e,t){t==="class"?e.flags|=8:t==="style"&&(e.flags|=16)}function Qm(e,t,n){let{attrs:r,inputs:o,hostDirectiveInputs:i}=e;if(r===null||!n&&o===null||n&&i===null||Tf(e)){e.initialInputs??=[],e.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let l=r[a];if(l===0){a+=4;continue}else if(l===5){a+=2;continue}else if(typeof l=="number")break;if(!n&&o.hasOwnProperty(l)){let c=o[l];for(let f of c)if(f===t){s??=[],s.push(l,r[a+1]);break}}else if(n&&i.hasOwnProperty(l)){let c=i[l];for(let f=0;f<c.length;f+=2)if(c[f]===t){s??=[],s.push(c[f+1],r[a+1]);break}}a+=2}e.initialInputs??=[],e.initialInputs.push(s)}function yD(e,t,n,r,o){e.data[r]=o;let i=o.factory||(o.factory=Dr(o.type,!0)),s=new Gr(i,cr(o),qt,null);e.blueprint[r]=s,n[r]=s,vD(e,t,r,Jy(e,n,o.hostVars,zt),o)}function vD(e,t,n,r,o){let i=o.hostBindings;if(i){let s=e.hostBindingOpCodes;s===null&&(s=e.hostBindingOpCodes=[]);let a=~t.index;ED(s)!=a&&s.push(a),s.push(n,r,i)}}function ED(e){let t=e.length;for(;t>0;){let n=e[--t];if(typeof n=="number"&&n<0)return n}return 0}function _D(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;cr(t)&&(n[""]=e)}}function CD(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function Tv(e,t,n,r,o,i,s,a){let l=t[ce],c=l.consts,f=Dn(c,s),p=fl(l,e,n,r,f);return i&&fD(l,t,p,Dn(c,a),o),p.mergedAttrs=nl(p.mergedAttrs,p.attrs),p.attrs!==null&&qa(p,p.attrs,!1),p.mergedAttrs!==null&&qa(p,p.mergedAttrs,!0),l.queries!==null&&l.queries.elementStart(l,p),p}function wv(e,t){TT(e,t),dd(t)&&e.queries.elementEnd(t)}function ID(e,t,n,r,o,i){let s=t.consts,a=Dn(s,o),l=fl(t,e,n,r,a);if(l.mergedAttrs=nl(l.mergedAttrs,l.attrs),i!=null){let c=Dn(s,i);l.localNames=[];for(let f=0;f<c.length;f+=2)l.localNames.push(c[f],-1)}return l.attrs!==null&&qa(l,l.attrs,!1),l.mergedAttrs!==null&&qa(l,l.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,l),l}function jn(e,t,n){if(n===zt)return!1;let r=e[t];return Object.is(r,n)?!1:(e[t]=n,!0)}function TD(e,t,n,r){let o=jn(e,t,n);return jn(e,t+1,r)||o}function La(e,t,n){return function r(o){let i=ur(e)?on(e.index,t):t;Ff(i,5);let s=t[$e],a=Xm(t,s,n,o),l=r.__ngNextListenerFn__;for(;l;)a=Xm(t,s,l,o)&&a,l=l.__ngNextListenerFn__;return a}}function Xm(e,t,n,r){let o=ie(null);try{return xe(we.OutputStart,t,n),n(r)!==!1}catch(i){return $w(e,i),!1}finally{xe(we.OutputEnd,t,n),ie(o)}}function Dv(e,t,n,r,o,i,s,a){let l=Da(e),c=!1,f=null;if(!r&&l&&(f=DD(t,n,i,e.index)),f!==null){let p=f.__ngLastListenerFn__||f;p.__ngNextListenerFn__=s,f.__ngLastListenerFn__=s,c=!0}else{let p=wn(e,n),h=r?r(p):p;jT(n,h,i,a);let g=o.listen(h,i,a);if(!wD(i)){let m=r?y=>r(Ht(y[e.index])):e.index;Sv(m,t,n,i,a,g,!1)}}return c}function wD(e){return e.startsWith("animation")||e.startsWith("transition")}function DD(e,t,n,r){let o=e.cleanup;if(o!=null)for(let i=0;i<o.length-1;i+=2){let s=o[i];if(s===n&&o[i+1]===r){let a=t[To],l=o[i+2];return a&&a.length>l?a[l]:null}typeof s=="string"&&(i+=2)}return null}function Sv(e,t,n,r,o,i,s){let a=t.firstCreatePass?fm(t):null,l=dm(n),c=l.length;l.push(o,i),a&&a.push(r,e,c,(c+1)*(s?-1:1))}function ey(e,t,n,r,o,i){let s=t[n],a=t[ce],c=a.data[n].outputs[r],p=s[c].subscribe(i);Sv(e.index,a,t,o,i,p,!0)}var of=Symbol("BINDING");var ja=class extends Wi{ngModule;constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let n=ar(t);return new Ro(n,this.ngModule)}};function SD(e){return Object.keys(e).map(t=>{let[n,r,o]=e[t],i={propName:n,templateName:t,isSignal:(r&ll.SignalBased)!==0};return o&&(i.transform=o),i})}function bD(e){return Object.keys(e).map(t=>({propName:e[t],templateName:t}))}function AD(e,t,n){let r=t instanceof Ue?t:t?.injector;return r&&e.getStandaloneInjector!==null&&(r=e.getStandaloneInjector(r)||r),r?new rf(n,r):n}function MD(e){let t=e.get(jr,null);if(t===null)throw new Z(407,!1);let n=e.get(Cv,null),r=e.get(Ar,null);return{rendererFactory:t,sanitizer:n,changeDetectionScheduler:r,ngReflect:!1}}function RD(e,t){let n=bv(e);return Hy(t,n,n==="svg"?fd:n==="math"?sm:null)}function bv(e){return(e.selectors[0][0]||"div").toLowerCase()}var Ro=class extends pl{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=SD(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=bD(this.componentDef.outputs),this.cachedOutputs}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=uw(t.selectors),this.ngContentSelectors=t.ngContentSelectors??[],this.isBoundToModule=!!n}create(t,n,r,o,i,s){xe(we.DynamicComponentStart);let a=ie(null);try{let l=this.componentDef,c=ND(r,l,s,i),f=AD(l,o||this.ngModule,t),p=MD(f),h=p.rendererFactory.createRenderer(null,l),g=r?Nw(h,r,l.encapsulation,f):RD(l,h),m=s?.some(ty)||i?.some(C=>typeof C!="function"&&C.bindings.some(ty)),y=Df(null,c,null,512|Wy(l),null,null,p,h,f,null,Oy(g,f,!0));y[tt]=g,Ma(y);let E=null;try{let C=Tv(tt,y,2,"#host",()=>c.directiveRegistry,!0,0);zy(h,g,C),Mo(g,y),nv(c,y,C),Ly(c,C,y),wv(c,C),n!==void 0&&PD(C,this.ngContentSelectors,n),E=on(C.index,y),y[$e]=E[$e],kf(c,y,null)}catch(C){throw E!==null&&Zd(E),Zd(y),C}finally{xe(we.DynamicComponentEnd),Ra()}return new Wa(this.componentType,y,!!m)}finally{ie(a)}}};function ND(e,t,n,r){let o=e?["ng-version","21.1.2"]:cw(t.selectors[0]),i=null,s=null,a=0;if(n)for(let f of n)a+=f[of].requiredVars,f.create&&(f.targetIdx=0,(i??=[]).push(f)),f.update&&(f.targetIdx=0,(s??=[]).push(f));if(r)for(let f=0;f<r.length;f++){let p=r[f];if(typeof p!="function")for(let h of p.bindings){a+=h[of].requiredVars;let g=f+1;h.create&&(h.targetIdx=g,(i??=[]).push(h)),h.update&&(h.targetIdx=g,(s??=[]).push(h))}}let l=[t];if(r)for(let f of r){let p=typeof f=="function"?f:f.type,h=Xc(p);l.push(h)}return wf(0,null,xD(i,s),1,a,l,null,null,null,[o],null)}function xD(e,t){return!e&&!t?null:n=>{if(n&1&&e)for(let r of e)r.create();if(n&2&&t)for(let r of t)r.update()}}function ty(e){let t=e[of].kind;return t==="input"||t==="twoWay"}var Wa=class extends _v{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(t,n,r){super(),this._rootLView=n,this._hasInputBindings=r,this._tNode=xi(n[ce],tt),this.location=mf(this._tNode,n),this.instance=on(this._tNode.index,n)[$e],this.hostView=this.changeDetectorRef=new qr(n,void 0),this.componentType=t}setInput(t,n){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),n))return;let o=this._rootLView,i=Pf(r,o[ce],o,t,n);this.previousInputValues.set(t,n);let s=on(r.index,o);Ff(s,1)}get injector(){return new $r(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function PD(e,t,n){let r=e.projection=[];for(let o=0;o<t.length;o++){let i=n[o];r.push(i!=null&&i.length?Array.from(i):null)}}var Ji=(()=>{class e{static __NG_ELEMENT_ID__=kD}return e})();function kD(){let e=$t();return FD(e,Ie())}var OD=Ji,Av=class extends OD{_lContainer;_hostTNode;_hostLView;constructor(t,n,r){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=r}get element(){return mf(this._hostTNode,this._hostLView)}get injector(){return new $r(this._hostTNode,this._hostLView)}get parentInjector(){let t=gf(this._hostTNode,this._hostLView);if(yy(t)){let n=Va(t,this._hostLView),r=Ba(t),o=n[ce].data[r+8];return new $r(o,n)}else return new $r(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let n=ny(this._lContainer);return n!==null&&n[t]||null}get length(){return this._lContainer.length-ze}createEmbeddedView(t,n,r){let o,i;typeof r=="number"?o=r:r!=null&&(o=r.index,i=r.injector);let s=tf(this._lContainer,t.ssrId),a=t.createEmbeddedViewImpl(n||{},i,s);return this.insertImpl(a,o,Vi(this._hostTNode,s)),a}createComponent(t,n,r,o,i,s,a){let l=t&&!vT(t),c;if(l)c=n;else{let E=n||{};c=E.index,r=E.injector,o=E.projectableNodes,i=E.environmentInjector||E.ngModuleRef,s=E.directives,a=E.bindings}let f=l?t:new Ro(ar(t)),p=r||this.parentInjector;if(!i&&f.ngModule==null){let C=(l?p:this.parentInjector).get(Ue,null);C&&(i=C)}let h=ar(f.componentType??{}),g=tf(this._lContainer,h?.id??null),m=g?.firstChild??null,y=f.create(p,o,m,i,s,a);return this.insertImpl(y.hostView,c,Vi(this._hostTNode,g)),y}insert(t,n){return this.insertImpl(t,n,!0)}insertImpl(t,n,r){let o=t._lView;if(lm(o)){let a=this.indexOf(t);if(a!==-1)this.detach(a);else{let l=o[Xe],c=new Av(l,l[Vt],l[Xe]);c.detach(c.indexOf(t))}}let i=this._adjustIndex(n),s=this._lContainer;return dl(s,o,i,r),t.attachToViewContainerRef(),nd(Vd(s),i,t),t}move(t,n){return this.insert(t,n)}indexOf(t){let n=ny(this._lContainer);return n!==null?n.indexOf(t):-1}remove(t){let n=this._adjustIndex(t,-1),r=$i(this._lContainer,n);r&&(Si(Vd(this._lContainer),n),ul(r[ce],r))}detach(t){let n=this._adjustIndex(t,-1),r=$i(this._lContainer,n);return r&&Si(Vd(this._lContainer),n)!=null?new qr(r):null}_adjustIndex(t,n=0){return t??this.length+n}};function ny(e){return e[Ri]}function Vd(e){return e[Ri]||(e[Ri]=[])}function FD(e,t){let n,r=t[e.index];return rn(r)?n=r:(n=gv(r,t,null,e),t[e.index]=n,Sf(t,n)),UD(n,t,e,r),new Av(n,e,t)}function LD(e,t){let n=e[Ge],r=n.createComment(""),o=wn(t,e),i=n.parentNode(o);return za(n,i,r,n.nextSibling(o),!1),r}var UD=HD,BD=()=>!1;function VD(e,t,n){return BD(e,t,n)}function HD(e,t,n,r){if(e[lr])return;let o;n.type&8?o=Ht(r):o=LD(t,n),e[lr]=o}var Wr=class{},hl=class{};var Ja=class extends Wr{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new ja(this);constructor(t,n,r,o=!0){super(),this.ngModuleType=t,this._parent=n;let i=Qc(t);this._bootstrapComponents=qy(i.bootstrap),this._r3Injector=Md(t,n,[{provide:Wr,useValue:this},{provide:Wi,useValue:this.componentFactoryResolver},...r],Ln(t),new Set(["environment"])),o&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},Ya=class extends hl{moduleType;constructor(t){super(),this.moduleType=t}create(t){return new Ja(this.moduleType,t,[])}};var Gi=class extends Wr{injector;componentFactoryResolver=new ja(this);instance=null;constructor(t){super();let n=new br([...t.providers,{provide:Wr,useValue:this},{provide:Wi,useValue:this.componentFactoryResolver}],t.parent||Ai(),t.debugName,new Set(["environment"]));this.injector=n,t.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function Yi(e,t,n=null){return new Gi({providers:e,parent:t,debugName:n,runEnvironmentInitializers:!0}).injector}var $D=(()=>{class e{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=id(!1,n.type),o=r.length>0?Yi([r],this._injector,""):null;this.cachedInjectors.set(n,o)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=te({token:e,providedIn:"environment",factory:()=>new e(ue(Ue))})}return e})();function cn(e){return qi(()=>{let t=Mv(e),n=ke(X({},t),{decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===vf.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:t.standalone?o=>o.get($D).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||un.Emulated,styles:e.styles||Ut,_:null,schemas:e.schemas||null,tView:null,id:""});t.standalone&&Zr("NgStandalone"),Rv(n);let r=e.dependencies;return n.directiveDefs=ry(r,GD),n.pipeDefs=ry(r,Wg),n.id=jD(n),n})}function GD(e){return ar(e)||Xc(e)}function xo(e){return qi(()=>({type:e.type,bootstrap:e.bootstrap||Ut,declarations:e.declarations||Ut,imports:e.imports||Ut,exports:e.exports||Ut,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function zD(e,t){if(e==null)return xr;let n={};for(let r in e)if(e.hasOwnProperty(r)){let o=e[r],i,s,a,l;Array.isArray(o)?(a=o[0],i=o[1],s=o[2]??i,l=o[3]||null):(i=o,s=o,a=ll.None,l=null),n[i]=[r,a,l],t[i]=s}return n}function qD(e){if(e==null)return xr;let t={};for(let n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}function gl(e){return qi(()=>{let t=Mv(e);return Rv(t),t})}function Lf(e){return{type:e.type,name:e.name,factory:null,pure:e.pure!==!1,standalone:e.standalone??!0,onDestroy:e.type.prototype.ngOnDestroy||null}}function Mv(e){let t={};return{type:e.type,providersResolver:null,viewProvidersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputConfig:e.inputs||xr,exportAs:e.exportAs||null,standalone:e.standalone??!0,signals:e.signals===!0,selectors:e.selectors||Ut,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:zD(e.inputs,t),outputs:qD(e.outputs),debugInfo:null}}function Rv(e){e.features?.forEach(t=>t(e))}function ry(e,t){return e?()=>{let n=typeof e=="function"?e():e,r=[];for(let o of n){let i=t(o);i!==null&&r.push(i)}return r}:null}function jD(e){let t=0,n=typeof e.consts=="function"?"":e.consts,r=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,n,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery];for(let i of r.join("|"))t=Math.imul(31,t)+i.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function WD(e,t,n,r,o,i,s,a){if(n.firstCreatePass){e.mergedAttrs=nl(e.mergedAttrs,e.attrs);let f=e.tView=wf(2,e,o,i,s,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);n.queries!==null&&(n.queries.template(n,e),f.queries=n.queries.embeddedTView(e))}a&&(e.flags|=a),So(e,!1);let l=JD(n,t,e,r);Na()&&Rf(n,t,l,e),Mo(l,t);let c=gv(l,t,l,e);t[r+tt]=c,Sf(t,c),VD(c,e,t)}function Za(e,t,n,r,o,i,s,a,l,c,f){let p=n+tt,h;if(t.firstCreatePass){if(h=fl(t,p,4,s||null,a||null),c!=null){let g=Dn(t.consts,c);h.localNames=[];for(let m=0;m<g.length;m+=2)h.localNames.push(g[m],-1)}}else h=t.data[p];return WD(h,e,t,n,r,o,i,l),c!=null&&xf(e,h,f),h}var JD=YD;function YD(e,t,n,r){return xa(!0),t[Ge].createComment("")}var Uf=(()=>{class e{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=te({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})();var Bf=new re("");function Po(e){return!!e&&typeof e.then=="function"}function Vf(e){return!!e&&typeof e.subscribe=="function"}var Nv=new re("");var Hf=(()=>{class e{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=z(Nv,{optional:!0})??[];injector=z(en);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let o of this.appInits){let i=et(this.injector,o);if(Po(i))n.push(i);else if(Vf(i)){let s=new Promise((a,l)=>{i.subscribe({complete:a,error:l})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(o=>{this.reject(o)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||e)};static \u0275prov=te({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),ml=new re("");function xv(){hc(()=>{let e="";throw new Z(600,e)})}function Pv(e){return e.isBoundToModule}var ZD=10;var ko=(()=>{class e{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=z(Gt);afterRenderManager=z(Zy);zonelessEnabled=z(Oi);rootEffectScheduler=z(Fd);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new ct;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=z(qn);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(Me(n=>!n))}constructor(){z(Yr,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:o=>{o&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=z(Ue);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,o=en.NULL){return this._injector.get(Dt).run(()=>{xe(we.BootstrapComponentStart);let s=n instanceof pl;if(!this._injector.get(Hf).done){let m="";throw new Z(405,m)}let l;s?l=n:l=this._injector.get(Wi).resolveComponentFactory(n),this.componentTypes.push(l.componentType);let c=Pv(l)?void 0:this._injector.get(Wr),f=r||l.selector,p=l.create(o,[],f,c),h=p.location.nativeElement,g=p.injector.get(Bf,null);return g?.registerApplication(h),p.onDestroy(()=>{this.detachView(p.hostView),Bi(this.components,p),g?.unregisterApplication(h)}),this._loadComponent(p),xe(we.BootstrapComponentEnd,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){xe(we.ChangeDetectionStart),this.tracingSnapshot!==null?this.tracingSnapshot.run(Af.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw xe(we.ChangeDetectionEnd),new Z(101,!1);let n=ie(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,ie(n),this.afterTick.next(),xe(we.ChangeDetectionEnd)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(jr,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<ZD;){xe(we.ChangeDetectionSyncStart);try{this.synchronizeOnce()}finally{xe(we.ChangeDetectionSyncEnd)}}}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:o}of this.allViews){if(!r&&!Pi(o))continue;let i=r&&!this.zonelessEnabled?0:1;dv(o,i),n=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>Pi(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;Bi(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(o){this.internalErrorHandler(o)}this.components.push(n),this._injector.get(ml,[]).forEach(o=>o(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Bi(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new Z(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||e)};static \u0275prov=te({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Bi(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}var $V=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var sf=class{destroy(t){}updateValue(t,n){}swap(t,n){let r=Math.min(t,n),o=Math.max(t,n),i=this.detach(o);if(o-r>1){let s=this.detach(r);this.attach(r,i),this.attach(o,s)}else this.attach(r,i)}move(t,n){this.attach(n,this.detach(t))}};function Hd(e,t,n,r,o){return e===n&&Object.is(t,r)?1:Object.is(o(e,t),o(n,r))?-1:0}function KD(e,t,n,r){let o,i,s=0,a=e.length-1,l=void 0;if(Array.isArray(t)){ie(r);let c=t.length-1;for(ie(null);s<=a&&s<=c;){let f=e.at(s),p=t[s],h=Hd(s,f,s,p,n);if(h!==0){h<0&&e.updateValue(s,p),s++;continue}let g=e.at(a),m=t[c],y=Hd(a,g,c,m,n);if(y!==0){y<0&&e.updateValue(a,m),a--,c--;continue}let E=n(s,f),C=n(a,g),T=n(s,p);if(Object.is(T,C)){let D=n(c,m);Object.is(D,E)?(e.swap(s,a),e.updateValue(a,m),c--,a--):e.move(a,s),e.updateValue(s,p),s++;continue}if(o??=new Ka,i??=iy(e,s,a,n),af(e,o,s,T))e.updateValue(s,p),s++,a++;else if(i.has(T))o.set(E,e.detach(s)),a--;else{let D=e.create(s,t[s]);e.attach(s,D),s++,a++}}for(;s<=c;)oy(e,o,n,s,t[s]),s++}else if(t!=null){ie(r);let c=t[Symbol.iterator]();ie(null);let f=c.next();for(;!f.done&&s<=a;){let p=e.at(s),h=f.value,g=Hd(s,p,s,h,n);if(g!==0)g<0&&e.updateValue(s,h),s++,f=c.next();else{o??=new Ka,i??=iy(e,s,a,n);let m=n(s,h);if(af(e,o,s,m))e.updateValue(s,h),s++,a++,f=c.next();else if(!i.has(m))e.attach(s,e.create(s,h)),s++,a++,f=c.next();else{let y=n(s,p);o.set(y,e.detach(s)),a--}}}for(;!f.done;)oy(e,o,n,e.length,f.value),f=c.next()}for(;s<=a;)e.destroy(e.detach(a--));o?.forEach(c=>{e.destroy(c)})}function af(e,t,n,r){return t!==void 0&&t.has(r)?(e.attach(n,t.get(r)),t.delete(r),!0):!1}function oy(e,t,n,r,o){if(af(e,t,r,n(r,o)))e.updateValue(r,o);else{let i=e.create(r,o);e.attach(r,i)}}function iy(e,t,n,r){let o=new Set;for(let i=t;i<=n;i++)o.add(r(i,e.at(i)));return o}var Ka=class{kvMap=new Map;_vMap=void 0;has(t){return this.kvMap.has(t)}delete(t){if(!this.has(t))return!1;let n=this.kvMap.get(t);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(t,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(t),!0}get(t){return this.kvMap.get(t)}set(t,n){if(this.kvMap.has(t)){let r=this.kvMap.get(t);this._vMap===void 0&&(this._vMap=new Map);let o=this._vMap;for(;o.has(r);)r=o.get(r);o.set(r,n)}else this.kvMap.set(t,n)}forEach(t){for(let[n,r]of this.kvMap)if(t(r,n),this._vMap!==void 0){let o=this._vMap;for(;o.has(r);)r=o.get(r),t(r,n)}}};function Et(e,t,n,r,o,i,s,a){Zr("NgControlFlow");let l=Ie(),c=St(),f=Dn(c.consts,i);return Za(l,c,e,t,n,r,o,f,256,s,a),$f}function $f(e,t,n,r,o,i,s,a){Zr("NgControlFlow");let l=Ie(),c=St(),f=Dn(c.consts,i);return Za(l,c,e,t,n,r,o,f,512,s,a),$f}function _t(e,t){Zr("NgControlFlow");let n=Ie(),r=Hr(),o=n[r]!==zt?n[r]:-1,i=o!==-1?Qa(n,tt+o):void 0,s=0;if(jn(n,r,e)){let a=ie(null);try{if(i!==void 0&&yv(i,s),e!==-1){let l=tt+e,c=Qa(n,l),f=df(n[ce],l),p=Ev(c,f,n),h=Of(n,f,t,{dehydratedView:p});dl(c,h,s,Vi(f,p))}}finally{ie(a)}}else if(i!==void 0){let a=mv(i,s);a!==void 0&&(a[$e]=t)}}var lf=class{lContainer;$implicit;$index;constructor(t,n,r){this.lContainer=t,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-ze}};function yl(e){return e}var uf=class{hasEmptyBlock;trackByFn;liveCollection;constructor(t,n,r){this.hasEmptyBlock=t,this.trackByFn=n,this.liveCollection=r}};function Wn(e,t,n,r,o,i,s,a,l,c,f,p,h){Zr("NgControlFlow");let g=Ie(),m=St(),y=l!==void 0,E=Ie(),C=a?s.bind(E[xt][$e]):s,T=new uf(y,C);E[tt+e]=T,Za(g,m,e+1,t,n,r,o,Dn(m.consts,i),256),y&&Za(g,m,e+2,l,c,f,p,Dn(m.consts,h),512)}var cf=class extends sf{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(t,n,r){super(),this.lContainer=t,this.hostLView=n,this.templateTNode=r}get length(){return this.lContainer.length-ze}at(t){return this.getLView(t)[$e].$implicit}attach(t,n){let r=n[Io];this.needsIndexUpdate||=t!==this.length,dl(this.lContainer,n,t,Vi(this.templateTNode,r)),QD(this.lContainer,t)}detach(t){return this.needsIndexUpdate||=t!==this.length-1,XD(this.lContainer,t),e0(this.lContainer,t)}create(t,n){let r=tf(this.lContainer,this.templateTNode.tView.ssrId);return Of(this.hostLView,this.templateTNode,new lf(this.lContainer,n,t),{dehydratedView:r})}destroy(t){ul(t[ce],t)}updateValue(t,n){this.getLView(t)[$e].$implicit=n}reset(){this.needsIndexUpdate=!1}updateIndexes(){if(this.needsIndexUpdate)for(let t=0;t<this.length;t++)this.getLView(t)[$e].$index=t}getLView(t){return t0(this.lContainer,t)}};function Jn(e){let t=ie(null),n=$n();try{let r=Ie(),o=r[ce],i=r[n],s=n+1,a=Qa(r,s);if(i.liveCollection===void 0){let c=df(o,s);i.liveCollection=new cf(a,r,c)}else i.liveCollection.reset();let l=i.liveCollection;if(KD(l,e,i.trackByFn,t),l.updateIndexes(),i.hasEmptyBlock){let c=Hr(),f=l.length===0;if(jn(r,c,f)){let p=n+2,h=Qa(r,p);if(f){let g=df(o,p),m=Ev(h,g,r),y=Of(r,g,void 0,{dehydratedView:m});dl(h,y,0,Vi(g,m))}else o.firstUpdatePass&&lD(h),yv(h,0)}}}finally{ie(t)}}function Qa(e,t){return e[t]}function QD(e,t){if(e.length<=ze)return;let n=ze+t,r=e[n],o=r?r[Br]:void 0;if(r&&o&&o.detachedLeaveAnimationFns&&o.detachedLeaveAnimationFns.length>0){let i=r[Bn];gw(i,o),zr.delete(r[Vn]),o.detachedLeaveAnimationFns=void 0}}function XD(e,t){if(e.length<=ze)return;let n=ze+t,r=e[n],o=r?r[Br]:void 0;o&&o.leave&&o.leave.size>0&&(o.detachedLeaveAnimationFns=[])}function e0(e,t){return $i(e,t)}function t0(e,t){return mv(e,t)}function df(e,t){return xi(e,t)}function Oo(e,t,n){let r=Ie(),o=Hr();if(jn(r,o,t)){let i=St(),s=Ad();Ow(s,r,e,t,r[Ge],n)}return Oo}function sy(e,t,n,r,o){Pf(t,e,n,o?"class":"style",r)}function Kr(e,t,n,r){let o=Ie(),i=o[ce],s=e+tt,a=i.firstCreatePass?Tv(s,o,2,t,Vw,gm(),n,r):i.data[s];if(ov(a,o,e,t,kv),Da(a)){let l=o[ce];nv(l,o,a),Ly(l,a,o)}return r!=null&&xf(o,a),Kr}function fr(){let e=St(),t=$t(),n=iv(t);return e.firstCreatePass&&wv(e,n),vd(n)&&Ed(),yd(),n.classesWithoutHost!=null&&DT(n)&&sy(e,n,Ie(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&ST(n)&&sy(e,n,Ie(),n.stylesWithoutHost,!1),fr}function pr(e,t,n,r){return Kr(e,t,n,r),fr(),pr}function se(e,t,n,r){let o=Ie(),i=o[ce],s=e+tt,a=i.firstCreatePass?ID(s,i,2,t,n,r):i.data[s];return ov(a,o,e,t,kv),r!=null&&xf(o,a),se}function ae(){let e=$t(),t=iv(e);return vd(t)&&Ed(),yd(),ae}function bt(e,t,n,r){return se(e,t,n,r),ae(),bt}var kv=(e,t,n,r,o)=>(xa(!0),Hy(t[Ge],r,Rm()));function Qr(){return Ie()}function at(e,t,n){let r=Ie(),o=Hr();if(jn(r,o,t)){let i=St(),s=Ad();rv(s,r,e,t,r[Ge],n)}return at}var Li=void 0;function n0(e){let t=Math.floor(Math.abs(e)),n=e.toString().replace(/^[^.]*\.?/,"").length;return t===1&&n===0?1:5}var r0=["en",[["a","p"],["AM","PM"]],[["AM","PM"]],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Li,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Li,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm\u202Fa","h:mm:ss\u202Fa","h:mm:ss\u202Fa z","h:mm:ss\u202Fa zzzz"],["{1}, {0}",Li,Li,Li],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",n0],$d={};function kt(e){let t=o0(e),n=ay(t);if(n)return n;let r=t.split("-")[0];if(n=ay(r),n)return n;if(r==="en")return r0;throw new Z(701,!1)}function ay(e){return e in $d||($d[e]=Mr.ng&&Mr.ng.common&&Mr.ng.common.locales&&Mr.ng.common.locales[e]),$d[e]}var qe=(function(e){return e[e.LocaleId=0]="LocaleId",e[e.DayPeriodsFormat=1]="DayPeriodsFormat",e[e.DayPeriodsStandalone=2]="DayPeriodsStandalone",e[e.DaysFormat=3]="DaysFormat",e[e.DaysStandalone=4]="DaysStandalone",e[e.MonthsFormat=5]="MonthsFormat",e[e.MonthsStandalone=6]="MonthsStandalone",e[e.Eras=7]="Eras",e[e.FirstDayOfWeek=8]="FirstDayOfWeek",e[e.WeekendRange=9]="WeekendRange",e[e.DateFormat=10]="DateFormat",e[e.TimeFormat=11]="TimeFormat",e[e.DateTimeFormat=12]="DateTimeFormat",e[e.NumberSymbols=13]="NumberSymbols",e[e.NumberFormats=14]="NumberFormats",e[e.CurrencyCode=15]="CurrencyCode",e[e.CurrencySymbol=16]="CurrencySymbol",e[e.CurrencyName=17]="CurrencyName",e[e.Currencies=18]="Currencies",e[e.Directionality=19]="Directionality",e[e.PluralCase=20]="PluralCase",e[e.ExtraData=21]="ExtraData",e})(qe||{});function o0(e){return e.toLowerCase().replace(/_/g,"-")}var Zi="en-US";var i0=Zi;function Ov(e){typeof e=="string"&&(i0=e.toLowerCase().replace(/_/g,"-"))}function vl(e,t,n){let r=Ie(),o=St(),i=$t();return s0(o,r,r[Ge],i,e,t,n),vl}function pt(e,t,n){let r=Ie(),o=St(),i=$t();return(i.type&3||n)&&Dv(i,o,r,n,r[Ge],e,t,La(i,r,t)),pt}function s0(e,t,n,r,o,i,s){let a=!0,l=null;if((r.type&3||s)&&(l??=La(r,t,i),Dv(r,e,t,s,n,o,i,l)&&(a=!1)),a){let c=r.outputs?.[o],f=r.hostDirectiveOutputs?.[o];if(f&&f.length)for(let p=0;p<f.length;p+=2){let h=f[p],g=f[p+1];l??=La(r,t,i),ey(r,t,h,g,o,l)}if(c&&c.length)for(let p of c)l??=La(r,t,i),ey(r,t,p,o,o,l)}}function We(e=1){return Mm(e)}function Gf(e){let t=Em();return am(t,tt+e)}function Pa(e,t){return e<<17|t<<2}function Jr(e){return e>>17&32767}function a0(e){return(e&2)==2}function l0(e,t){return e&131071|t<<17}function ff(e){return e|2}function No(e){return(e&131068)>>2}function Gd(e,t){return e&-131069|t<<2}function u0(e){return(e&1)===1}function pf(e){return e|1}function c0(e,t,n,r,o,i){let s=i?t.classBindings:t.styleBindings,a=Jr(s),l=No(s);e[r]=n;let c=!1,f;if(Array.isArray(n)){let p=n;f=p[1],(f===null||Co(p,f)>0)&&(c=!0)}else f=n;if(o)if(l!==0){let h=Jr(e[a+1]);e[r+1]=Pa(h,a),h!==0&&(e[h+1]=Gd(e[h+1],r)),e[a+1]=l0(e[a+1],r)}else e[r+1]=Pa(a,0),a!==0&&(e[a+1]=Gd(e[a+1],r)),a=r;else e[r+1]=Pa(l,0),a===0?a=r:e[l+1]=Gd(e[l+1],r),l=r;c&&(e[r+1]=ff(e[r+1])),ly(e,f,r,!0),ly(e,f,r,!1),d0(t,f,e,r,i),s=Pa(a,l),i?t.classBindings=s:t.styleBindings=s}function d0(e,t,n,r,o){let i=o?e.residualClasses:e.residualStyles;i!=null&&typeof t=="string"&&Co(i,t)>=0&&(n[r+1]=pf(n[r+1]))}function ly(e,t,n,r){let o=e[n+1],i=t===null,s=r?Jr(o):No(o),a=!1;for(;s!==0&&(a===!1||i);){let l=e[s],c=e[s+1];f0(l,t)&&(a=!0,e[s+1]=r?pf(c):ff(c)),s=r?Jr(c):No(c)}a&&(e[n+1]=r?ff(o):pf(o))}function f0(e,t){return e===null||t==null||(Array.isArray(e)?e[1]:e)===t?!0:Array.isArray(e)&&typeof t=="string"?Co(e,t)>=0:!1}function El(e,t,n){return Fv(e,t,n,!1),El}function Ki(e,t){return Fv(e,t,null,!0),Ki}function Fv(e,t,n,r){let o=Ie(),i=St(),s=wd(2);if(i.firstUpdatePass&&h0(i,e,s,r),t!==zt&&jn(o,s,t)){let a=i.data[$n()];E0(i,a,o,o[Ge],e,o[s+1]=_0(t,n),r,s)}}function p0(e,t){return t>=e.expandoStartIndex}function h0(e,t,n,r){let o=e.data;if(o[n+1]===null){let i=o[$n()],s=p0(e,n);C0(i,r)&&t===null&&!s&&(t=!1),t=g0(o,i,t,r),c0(o,i,t,n,s,r)}}function g0(e,t,n,r){let o=Dm(e),i=r?t.residualClasses:t.residualStyles;if(o===null)(r?t.classBindings:t.styleBindings)===0&&(n=zd(null,e,t,n,r),n=zi(n,t.attrs,r),i=null);else{let s=t.directiveStylingLast;if(s===-1||e[s]!==o)if(n=zd(o,e,t,n,r),i===null){let l=m0(e,t,r);l!==void 0&&Array.isArray(l)&&(l=zd(null,e,t,l[1],r),l=zi(l,t.attrs,r),y0(e,t,r,l))}else i=v0(e,t,r)}return i!==void 0&&(r?t.residualClasses=i:t.residualStyles=i),n}function m0(e,t,n){let r=n?t.classBindings:t.styleBindings;if(No(r)!==0)return e[Jr(r)]}function y0(e,t,n,r){let o=n?t.classBindings:t.styleBindings;e[Jr(o)]=r}function v0(e,t,n){let r,o=t.directiveEnd;for(let i=1+t.directiveStylingLast;i<o;i++){let s=e[i].hostAttrs;r=zi(r,s,n)}return zi(r,t.attrs,n)}function zd(e,t,n,r,o){let i=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(i=t[a],r=zi(r,i.hostAttrs,o),i!==e);)a++;return e!==null&&(n.directiveStylingLast=a),r}function zi(e,t,n){let r=n?1:2,o=-1;if(t!==null)for(let i=0;i<t.length;i++){let s=t[i];typeof s=="number"?o=s:o===r&&(Array.isArray(e)||(e=e===void 0?[]:["",e]),Qg(e,s,n?!0:t[++i]))}return e===void 0?null:e}function E0(e,t,n,r,o,i,s,a){if(!(t.type&3))return;let l=e.data,c=l[a+1],f=u0(c)?uy(l,t,n,o,No(c),s):void 0;if(!Xa(f)){Xa(i)||a0(c)&&(i=uy(l,null,n,o,a,s));let p=pd($n(),n);Rw(r,s,p,o,i)}}function uy(e,t,n,r,o,i){let s=t===null,a;for(;o>0;){let l=e[o],c=Array.isArray(l),f=c?l[1]:l,p=f===null,h=n[o+1];h===zt&&(h=p?Ut:void 0);let g=p?Ia(h,r):f===r?h:void 0;if(c&&!Xa(g)&&(g=Ia(l,r)),Xa(g)&&(a=g,s))return a;let m=e[o+1];o=s?Jr(m):No(m)}if(t!==null){let l=i?t.residualClasses:t.residualStyles;l!=null&&(a=Ia(l,r))}return a}function Xa(e){return e!==void 0}function _0(e,t){return e==null||e===""||(typeof t=="string"?e=e+t:typeof e=="object"&&(e=Ln(Cf(e)))),e}function C0(e,t){return(e.flags&(t?8:16))!==0}function De(e,t=""){let n=Ie(),r=St(),o=e+tt,i=r.firstCreatePass?fl(r,o,1,t,null):r.data[o],s=I0(r,n,i,t);n[o]=s,Na()&&Rf(r,n,s,i),So(i,!1)}var I0=(e,t,n,r)=>(xa(!0),YT(t[Ge],r));function T0(e,t,n,r=""){return jn(e,Hr(),n)?t+_o(n)+r:zt}function Lv(e,t,n,r,o,i=""){let s=_m(),a=TD(e,s,n,o);return wd(2),a?t+_o(n)+r+_o(o)+i:zt}function An(e){return zf("",e),An}function zf(e,t,n){let r=Ie(),o=T0(r,e,t,n);return o!==zt&&Uv(r,$n(),o),zf}function Qi(e,t,n,r,o){let i=Ie(),s=Lv(i,e,t,n,r,o);return s!==zt&&Uv(i,$n(),s),Qi}function Uv(e,t,n){let r=pd(t,e);ZT(e[Ge],r,n)}function qf(e){return jn(Ie(),Hr(),e)?_o(e):zt}function jf(e,t,n,r,o=""){return Lv(Ie(),e,t,n,r,o)}function cy(e,t,n){let r=St();r.firstCreatePass&&Bv(t,r.data,r.blueprint,cr(e),n)}function Bv(e,t,n,r,o){if(e=st(e),Array.isArray(e))for(let i=0;i<e.length;i++)Bv(e[i],t,n,r,o);else{let i=St(),s=Ie(),a=$t(),l=Sr(e)?e:st(e.provide),c=ad(e),f=a.providerIndexes&1048575,p=a.directiveStart,h=a.providerIndexes>>20;if(Sr(e)||!e.multi){let g=new Gr(c,o,qt,null),m=jd(l,t,o?f:f+h,p);m===-1?(Jd(Ha(a,s),i,l),qd(i,e,t.length),t.push(l),a.directiveStart++,a.directiveEnd++,o&&(a.providerIndexes+=1048576),n.push(g),s.push(g)):(n[m]=g,s[m]=g)}else{let g=jd(l,t,f+h,p),m=jd(l,t,f,f+h),y=g>=0&&n[g],E=m>=0&&n[m];if(o&&!E||!o&&!y){Jd(Ha(a,s),i,l);let C=S0(o?D0:w0,n.length,o,r,c,e);!o&&E&&(n[m].providerFactory=C),qd(i,e,t.length,0),t.push(l),a.directiveStart++,a.directiveEnd++,o&&(a.providerIndexes+=1048576),n.push(C),s.push(C)}else{let C=Vv(n[o?m:g],c,!o&&r);qd(i,e,g>-1?g:m,C)}!o&&r&&E&&n[m].componentProviders++}}}function qd(e,t,n,r){let o=Sr(t),i=rm(t);if(o||i){let l=(i?st(t.useClass):t).prototype.ngOnDestroy;if(l){let c=e.destroyHooks||(e.destroyHooks=[]);if(!o&&t.multi){let f=c.indexOf(n);f===-1?c.push(n,[r,l]):c[f+1].push(r,l)}else c.push(n,l)}}}function Vv(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function jd(e,t,n,r){for(let o=n;o<r;o++)if(t[o]===e)return o;return-1}function w0(e,t,n,r,o){return hf(this.multi,[])}function D0(e,t,n,r,o){let i=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,l=$a(r,r[ce],this.providerFactory.index,o);s=l.slice(0,a),hf(i,s);for(let c=a;c<l.length;c++)s.push(l[c])}else s=[],hf(i,s);return s}function hf(e,t){for(let n=0;n<e.length;n++){let r=e[n];t.push(r())}return t}function S0(e,t,n,r,o,i){let s=new Gr(e,n,qt,null);return s.multi=[],s.index=t,s.componentProviders=0,Vv(s,o,r&&!n),s}function Wf(e,t){return n=>{n.providersResolver=(r,o)=>cy(r,o?o(e):e,!1),t&&(n.viewProvidersResolver=(r,o)=>cy(r,o?o(t):t,!0))}}var el=class{ngModuleFactory;componentFactories;constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}},Jf=(()=>{class e{compileModuleSync(n){return new Ya(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),o=Qc(n),i=qy(o.declarations).reduce((s,a)=>{let l=ar(a);return l&&s.push(new Ro(l)),s},[]);return new el(r,i)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||e)};static \u0275prov=te({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var Hv=(()=>{class e{applicationErrorHandler=z(Gt);appRef=z(ko);taskService=z(qn);ngZone=z(Dt);zonelessEnabled=z(Oi);tracing=z(Yr,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new rt;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Ti):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(z(Od,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{let n=this.taskService.add();if(!this.runningTick&&(this.cleanup(),!this.zonelessEnabled||this.appRef.includeAllTestViews)){this.taskService.remove(n);return}this.switchToMicrotaskScheduler(),this.taskService.remove(n)})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}switchToMicrotaskScheduler(){this.ngZone.runOutsideAngular(()=>{let n=this.taskService.add();this.useMicrotaskScheduler=!0,queueMicrotask(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})})}notify(n){if(!this.zonelessEnabled&&n===5)return;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2;break}case 12:{this.appRef.dirtyFlags|=16;break}case 13:{this.appRef.dirtyFlags|=2;break}case 11:break;default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?km:Rd;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Ti+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.applicationErrorHandler(r)}finally{this.taskService.remove(n),this.cleanup()}}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||e)};static \u0275prov=te({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function $v(){return[{provide:Ar,useExisting:Hv},{provide:Dt,useClass:wi},{provide:Oi,useValue:!0}]}function b0(){return typeof $localize<"u"&&$localize.locale||Zi}var Xi=new re("",{factory:()=>z(Xi,{optional:!0,skipSelf:!0})||b0()});var _l=class{destroyed=!1;listeners=null;errorHandler=z(tn,{optional:!0});destroyRef=z(sn);constructor(){this.destroyRef.onDestroy(()=>{this.destroyed=!0,this.listeners=null})}subscribe(t){if(this.destroyed)throw new Z(953,!1);return(this.listeners??=[]).push(t),{unsubscribe:()=>{let n=this.listeners?.indexOf(t);n!==void 0&&n!==-1&&this.listeners?.splice(n,1)}}}emit(t){if(this.destroyed){console.warn(Un(953,!1));return}if(this.listeners===null)return;let n=ie(null);try{for(let r of this.listeners)try{r(t)}catch(o){this.errorHandler?.handleError(o)}}finally{ie(n)}}};function Fo(e,t){return zs(e,t?.equal)}var qv=Symbol("InputSignalNode#UNSET"),q0=ke(X({},qs),{transformFn:void 0,applyValueToInputSignal(e,t){pi(e,t)}});function jv(e,t){let n=Object.create(q0);n.value=e,n.transformFn=t?.transform;function r(){if(ci(n),n.value===qv){let o=null;throw new Z(-950,o)}return n.value}return r[Tt]=n,r}function Wv(e){return new _l}function Gv(e,t){return jv(e,t)}function j0(e){return jv(qv,e)}var dn=(Gv.required=j0,Gv);var Yf=new re(""),W0=new re("");function es(e){return!e.moduleRef}function J0(e){let t=es(e)?e.r3Injector:e.moduleRef.injector,n=t.get(Dt);return n.run(()=>{es(e)?e.r3Injector.resolveInjectorInitializers():e.moduleRef.resolveInjectorInitializers();let r=t.get(Gt),o;if(n.runOutsideAngular(()=>{o=n.onError.subscribe({next:r})}),es(e)){let i=()=>t.destroy(),s=e.platformInjector.get(Yf);s.add(i),t.onDestroy(()=>{o.unsubscribe(),s.delete(i)})}else{let i=()=>e.moduleRef.destroy(),s=e.platformInjector.get(Yf);s.add(i),e.moduleRef.onDestroy(()=>{Bi(e.allPlatformModules,e.moduleRef),o.unsubscribe(),s.delete(i)})}return Z0(r,n,()=>{let i=t.get(qn),s=i.add(),a=t.get(Hf);return a.runInitializers(),a.donePromise.then(()=>{let l=t.get(Xi,Zi);if(Ov(l||Zi),!t.get(W0,!0))return es(e)?t.get(ko):(e.allPlatformModules.push(e.moduleRef),e.moduleRef);if(es(e)){let f=t.get(ko);return e.rootComponent!==void 0&&f.bootstrap(e.rootComponent),f}else return Y0?.(e.moduleRef,e.allPlatformModules),e.moduleRef}).finally(()=>{i.remove(s)})})})}var Y0;function Z0(e,t,n){try{let r=n();return Po(r)?r.catch(o=>{throw t.runOutsideAngular(()=>e(o)),o}):r}catch(r){throw t.runOutsideAngular(()=>e(r)),r}}var Cl=null;function K0(e=[],t){return en.create({name:t,providers:[{provide:bi,useValue:"platform"},{provide:Yf,useValue:new Set([()=>Cl=null])},...e]})}function Q0(e=[]){if(Cl)return Cl;let t=K0(e);return Cl=t,xv(),X0(t),t}function X0(e){let t=e.get(il,null);et(e,()=>{t?.forEach(n=>n())})}var eS=1e4;var _q=eS-1e3;var Zf=(()=>{class e{static __NG_ELEMENT_ID__=tS}return e})();function tS(e){return nS($t(),Ie(),(e&16)===16)}function nS(e,t,n){if(ur(e)&&!n){let r=on(e.index,t);return new qr(r,r)}else if(e.type&175){let r=t[xt];return new qr(r,t)}return null}function Jv(e){let{rootComponent:t,appProviders:n,platformProviders:r,platformRef:o}=e;xe(we.BootstrapApplicationStart);try{let i=o?.injector??Q0(r),s=[$v(),Fm,...n||[]],a=new Gi({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1});return J0({r3Injector:a.injector,platformInjector:i,rootComponent:t})}catch(i){return Promise.reject(i)}finally{xe(we.BootstrapApplicationEnd)}}var Yv=null;function Yn(){return Yv}function Kf(e){Yv??=e}var ts=class{},Tl=(()=>{class e{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||e)};static \u0275prov=te({token:e,factory:()=>z(Zv),providedIn:"platform"})}return e})();var Zv=(()=>{class e extends Tl{_location;_history;_doc=z(je);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Yn().getBaseHref(this._doc)}onPopState(n){let r=Yn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=Yn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,o){this._history.pushState(n,r,o)}replaceState(n,r,o){this._history.replaceState(n,r,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||e)};static \u0275prov=te({token:e,factory:()=>new e,providedIn:"platform"})}return e})();function Xv(e,t){return e?t?e.endsWith("/")?t.startsWith("/")?e+t.slice(1):e+t:t.startsWith("/")?e+t:`${e}/${t}`:e:t}function Kv(e){let t=e.search(/#|\?|$/);return e[t-1]==="/"?e.slice(0,t-1)+e.slice(t):e}function hr(e){return e&&e[0]!=="?"?`?${e}`:e}var wl=(()=>{class e{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||e)};static \u0275prov=te({token:e,factory:()=>z(oS),providedIn:"root"})}return e})(),rS=new re(""),oS=(()=>{class e extends wl{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??z(je).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return Xv(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+hr(this._platformLocation.search),o=this._platformLocation.hash;return o&&n?`${r}${o}`:r}pushState(n,r,o,i){let s=this.prepareExternalUrl(o+hr(i));this._platformLocation.pushState(n,r,s)}replaceState(n,r,o,i){let s=this.prepareExternalUrl(o+hr(i));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||e)(ue(Tl),ue(rS,8))};static \u0275prov=te({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Lo=(()=>{class e{_subject=new ct;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=aS(Kv(Qv(r))),this._locationStrategy.onPopState(o=>{this._subject.next({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+hr(r))}normalize(n){return e.stripTrailingSlash(sS(this._basePath,Qv(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",o=null){this._locationStrategy.pushState(o,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+hr(r)),o)}replaceState(n,r="",o=null){this._locationStrategy.replaceState(o,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+hr(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(o=>o(n,r))}subscribe(n,r,o){return this._subject.subscribe({next:n,error:r??void 0,complete:o??void 0})}static normalizeQueryParams=hr;static joinWithSlash=Xv;static stripTrailingSlash=Kv;static \u0275fac=function(r){return new(r||e)(ue(wl))};static \u0275prov=te({token:e,factory:()=>iS(),providedIn:"root"})}return e})();function iS(){return new Lo(ue(wl))}function sS(e,t){if(!e||!t.startsWith(e))return t;let n=t.substring(e.length);return n===""||["/",";","?","#"].includes(n[0])?n:t}function Qv(e){return e.replace(/\/index.html$/,"")}function aS(e){if(new RegExp("^(https?:)?//").test(e)){let[,n]=e.split(/\/\/[^\/]+/);return n}return e}var ht=(function(e){return e[e.Format=0]="Format",e[e.Standalone=1]="Standalone",e})(ht||{}),Pe=(function(e){return e[e.Narrow=0]="Narrow",e[e.Abbreviated=1]="Abbreviated",e[e.Wide=2]="Wide",e[e.Short=3]="Short",e})(Pe||{}),At=(function(e){return e[e.Short=0]="Short",e[e.Medium=1]="Medium",e[e.Long=2]="Long",e[e.Full=3]="Full",e})(At||{}),Kn={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function tE(e){return kt(e)[qe.LocaleId]}function nE(e,t,n){let r=kt(e),o=[r[qe.DayPeriodsFormat],r[qe.DayPeriodsStandalone]],i=jt(o,t);return jt(i,n)}function rE(e,t,n){let r=kt(e),o=[r[qe.DaysFormat],r[qe.DaysStandalone]],i=jt(o,t);return jt(i,n)}function oE(e,t,n){let r=kt(e),o=[r[qe.MonthsFormat],r[qe.MonthsStandalone]],i=jt(o,t);return jt(i,n)}function iE(e,t){let r=kt(e)[qe.Eras];return jt(r,t)}function ns(e,t){let n=kt(e);return jt(n[qe.DateFormat],t)}function rs(e,t){let n=kt(e);return jt(n[qe.TimeFormat],t)}function os(e,t){let r=kt(e)[qe.DateTimeFormat];return jt(r,t)}function is(e,t){let n=kt(e),r=n[qe.NumberSymbols][t];if(typeof r>"u"){if(t===Kn.CurrencyDecimal)return n[qe.NumberSymbols][Kn.Decimal];if(t===Kn.CurrencyGroup)return n[qe.NumberSymbols][Kn.Group]}return r}function sE(e){if(!e[qe.ExtraData])throw new Z(2303,!1)}function aE(e){let t=kt(e);return sE(t),(t[qe.ExtraData][2]||[]).map(r=>typeof r=="string"?Qf(r):[Qf(r[0]),Qf(r[1])])}function lE(e,t,n){let r=kt(e);sE(r);let o=[r[qe.ExtraData][0],r[qe.ExtraData][1]],i=jt(o,t)||[];return jt(i,n)||[]}function jt(e,t){for(let n=t;n>-1;n--)if(typeof e[n]<"u")return e[n];throw new Z(2304,!1)}function Qf(e){let[t,n]=e.split(":");return{hours:+t,minutes:+n}}var lS=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Dl={},uS=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;function uE(e,t,n,r){let o=vS(e);t=Zn(n,t)||t;let s=[],a;for(;t;)if(a=uS.exec(t),a){s=s.concat(a.slice(1));let f=s.pop();if(!f)break;t=f}else{s.push(t);break}let l=o.getTimezoneOffset();r&&(l=dE(r,l),o=yS(o,r));let c="";return s.forEach(f=>{let p=gS(f);c+=p?p(o,n,l):f==="''"?"'":f.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),c}function Rl(e,t,n){let r=new Date(0);return r.setFullYear(e,t,n),r.setHours(0,0,0),r}function Zn(e,t){let n=tE(e);if(Dl[n]??={},Dl[n][t])return Dl[n][t];let r="";switch(t){case"shortDate":r=ns(e,At.Short);break;case"mediumDate":r=ns(e,At.Medium);break;case"longDate":r=ns(e,At.Long);break;case"fullDate":r=ns(e,At.Full);break;case"shortTime":r=rs(e,At.Short);break;case"mediumTime":r=rs(e,At.Medium);break;case"longTime":r=rs(e,At.Long);break;case"fullTime":r=rs(e,At.Full);break;case"short":let o=Zn(e,"shortTime"),i=Zn(e,"shortDate");r=Sl(os(e,At.Short),[o,i]);break;case"medium":let s=Zn(e,"mediumTime"),a=Zn(e,"mediumDate");r=Sl(os(e,At.Medium),[s,a]);break;case"long":let l=Zn(e,"longTime"),c=Zn(e,"longDate");r=Sl(os(e,At.Long),[l,c]);break;case"full":let f=Zn(e,"fullTime"),p=Zn(e,"fullDate");r=Sl(os(e,At.Full),[f,p]);break}return r&&(Dl[n][t]=r),r}function Sl(e,t){return t&&(e=e.replace(/\{([^}]+)}/g,function(n,r){return t!=null&&r in t?t[r]:n})),e}function fn(e,t,n="-",r,o){let i="";(e<0||o&&e<=0)&&(o?e=-e+1:(e=-e,i=n));let s=String(e);for(;s.length<t;)s="0"+s;return r&&(s=s.slice(s.length-t)),i+s}function cS(e,t){return fn(e,3).substring(0,t)}function Je(e,t,n=0,r=!1,o=!1){return function(i,s){let a=dS(e,i);if((n>0||a>-n)&&(a+=n),e===3)a===0&&n===-12&&(a=12);else if(e===6)return cS(a,t);let l=is(s,Kn.MinusSign);return fn(a,t,l,r,o)}}function dS(e,t){switch(e){case 0:return t.getFullYear();case 1:return t.getMonth();case 2:return t.getDate();case 3:return t.getHours();case 4:return t.getMinutes();case 5:return t.getSeconds();case 6:return t.getMilliseconds();case 7:return t.getDay();default:throw new Z(2301,!1)}}function Fe(e,t,n=ht.Format,r=!1){return function(o,i){return fS(o,i,e,t,n,r)}}function fS(e,t,n,r,o,i){switch(n){case 2:return oE(t,o,r)[e.getMonth()];case 1:return rE(t,o,r)[e.getDay()];case 0:let s=e.getHours(),a=e.getMinutes();if(i){let c=aE(t),f=lE(t,o,r),p=c.findIndex(h=>{if(Array.isArray(h)){let[g,m]=h,y=s>=g.hours&&a>=g.minutes,E=s<m.hours||s===m.hours&&a<m.minutes;if(g.hours<m.hours){if(y&&E)return!0}else if(y||E)return!0}else if(h.hours===s&&h.minutes===a)return!0;return!1});if(p!==-1)return f[p]}return nE(t,o,r)[s<12?0:1];case 3:return iE(t,r)[e.getFullYear()<=0?0:1];default:let l=n;throw new Z(2302,!1)}}function bl(e){return function(t,n,r){let o=-1*r,i=is(n,Kn.MinusSign),s=o>0?Math.floor(o/60):Math.ceil(o/60);switch(e){case 0:return(o>=0?"+":"")+fn(s,2,i)+fn(Math.abs(o%60),2,i);case 1:return"GMT"+(o>=0?"+":"")+fn(s,1,i);case 2:return"GMT"+(o>=0?"+":"")+fn(s,2,i)+":"+fn(Math.abs(o%60),2,i);case 3:return r===0?"Z":(o>=0?"+":"")+fn(s,2,i)+":"+fn(Math.abs(o%60),2,i);default:throw new Z(2310,!1)}}}var pS=0,Ml=4;function hS(e){let t=Rl(e,pS,1).getDay();return Rl(e,0,1+(t<=Ml?Ml:Ml+7)-t)}function cE(e){let t=e.getDay(),n=t===0?-3:Ml-t;return Rl(e.getFullYear(),e.getMonth(),e.getDate()+n)}function Xf(e,t=!1){return function(n,r){let o;if(t){let i=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,s=n.getDate();o=1+Math.floor((s+i)/7)}else{let i=cE(n),s=hS(i.getFullYear()),a=i.getTime()-s.getTime();o=1+Math.round(a/6048e5)}return fn(o,e,is(r,Kn.MinusSign))}}function Al(e,t=!1){return function(n,r){let i=cE(n).getFullYear();return fn(i,e,is(r,Kn.MinusSign),t)}}var ep={};function gS(e){if(ep[e])return ep[e];let t;switch(e){case"G":case"GG":case"GGG":t=Fe(3,Pe.Abbreviated);break;case"GGGG":t=Fe(3,Pe.Wide);break;case"GGGGG":t=Fe(3,Pe.Narrow);break;case"y":t=Je(0,1,0,!1,!0);break;case"yy":t=Je(0,2,0,!0,!0);break;case"yyy":t=Je(0,3,0,!1,!0);break;case"yyyy":t=Je(0,4,0,!1,!0);break;case"Y":t=Al(1);break;case"YY":t=Al(2,!0);break;case"YYY":t=Al(3);break;case"YYYY":t=Al(4);break;case"M":case"L":t=Je(1,1,1);break;case"MM":case"LL":t=Je(1,2,1);break;case"MMM":t=Fe(2,Pe.Abbreviated);break;case"MMMM":t=Fe(2,Pe.Wide);break;case"MMMMM":t=Fe(2,Pe.Narrow);break;case"LLL":t=Fe(2,Pe.Abbreviated,ht.Standalone);break;case"LLLL":t=Fe(2,Pe.Wide,ht.Standalone);break;case"LLLLL":t=Fe(2,Pe.Narrow,ht.Standalone);break;case"w":t=Xf(1);break;case"ww":t=Xf(2);break;case"W":t=Xf(1,!0);break;case"d":t=Je(2,1);break;case"dd":t=Je(2,2);break;case"c":case"cc":t=Je(7,1);break;case"ccc":t=Fe(1,Pe.Abbreviated,ht.Standalone);break;case"cccc":t=Fe(1,Pe.Wide,ht.Standalone);break;case"ccccc":t=Fe(1,Pe.Narrow,ht.Standalone);break;case"cccccc":t=Fe(1,Pe.Short,ht.Standalone);break;case"E":case"EE":case"EEE":t=Fe(1,Pe.Abbreviated);break;case"EEEE":t=Fe(1,Pe.Wide);break;case"EEEEE":t=Fe(1,Pe.Narrow);break;case"EEEEEE":t=Fe(1,Pe.Short);break;case"a":case"aa":case"aaa":t=Fe(0,Pe.Abbreviated);break;case"aaaa":t=Fe(0,Pe.Wide);break;case"aaaaa":t=Fe(0,Pe.Narrow);break;case"b":case"bb":case"bbb":t=Fe(0,Pe.Abbreviated,ht.Standalone,!0);break;case"bbbb":t=Fe(0,Pe.Wide,ht.Standalone,!0);break;case"bbbbb":t=Fe(0,Pe.Narrow,ht.Standalone,!0);break;case"B":case"BB":case"BBB":t=Fe(0,Pe.Abbreviated,ht.Format,!0);break;case"BBBB":t=Fe(0,Pe.Wide,ht.Format,!0);break;case"BBBBB":t=Fe(0,Pe.Narrow,ht.Format,!0);break;case"h":t=Je(3,1,-12);break;case"hh":t=Je(3,2,-12);break;case"H":t=Je(3,1);break;case"HH":t=Je(3,2);break;case"m":t=Je(4,1);break;case"mm":t=Je(4,2);break;case"s":t=Je(5,1);break;case"ss":t=Je(5,2);break;case"S":t=Je(6,1);break;case"SS":t=Je(6,2);break;case"SSS":t=Je(6,3);break;case"Z":case"ZZ":case"ZZZ":t=bl(0);break;case"ZZZZZ":t=bl(3);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":t=bl(1);break;case"OOOO":case"ZZZZ":case"zzzz":t=bl(2);break;default:return null}return ep[e]=t,t}function dE(e,t){e=e.replace(/:/g,"");let n=Date.parse("Jan 01, 1970 00:00:00 "+e)/6e4;return isNaN(n)?t:n}function mS(e,t){return e=new Date(e.getTime()),e.setMinutes(e.getMinutes()+t),e}function yS(e,t,n){let o=e.getTimezoneOffset(),i=dE(t,o);return mS(e,-1*(i-o))}function vS(e){if(eE(e))return e;if(typeof e=="number"&&!isNaN(e))return new Date(e);if(typeof e=="string"){if(e=e.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(e)){let[o,i=1,s=1]=e.split("-").map(a=>+a);return Rl(o,i-1,s)}let n=parseFloat(e);if(!isNaN(e-n))return new Date(n);let r;if(r=e.match(lS))return ES(r)}let t=new Date(e);if(!eE(t))throw new Z(2311,!1);return t}function ES(e){let t=new Date(0),n=0,r=0,o=e[8]?t.setUTCFullYear:t.setFullYear,i=e[8]?t.setUTCHours:t.setHours;e[9]&&(n=Number(e[9]+e[10]),r=Number(e[9]+e[11])),o.call(t,Number(e[1]),Number(e[2])-1,Number(e[3]));let s=Number(e[4]||0)-n,a=Number(e[5]||0)-r,l=Number(e[6]||0),c=Math.floor(parseFloat("0."+(e[7]||0))*1e3);return i.call(t,s,a,l,c),t}function eE(e){return e instanceof Date&&!isNaN(e.valueOf())}function _S(e,t){return new Z(2100,!1)}var CS="mediumDate",fE=new re(""),pE=new re(""),ss=(()=>{class e{locale;defaultTimezone;defaultOptions;constructor(n,r,o){this.locale=n,this.defaultTimezone=r,this.defaultOptions=o}transform(n,r,o,i){if(n==null||n===""||n!==n)return null;try{let s=r??this.defaultOptions?.dateFormat??CS,a=o??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return uE(n,s,i||this.locale,a)}catch(s){throw _S(e,s.message)}}static \u0275fac=function(r){return new(r||e)(qt(Xi,16),qt(fE,24),qt(pE,24))};static \u0275pipe=Lf({name:"date",type:e,pure:!0})}return e})();var Mn=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=xo({type:e});static \u0275inj=Rr({})}return e})();function Nl(e,t){t=encodeURIComponent(t);for(let n of e.split(";")){let r=n.indexOf("="),[o,i]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(o.trim()===t)return decodeURIComponent(i)}return null}var Xr=class{};var hE="browser";var as=class{_doc;constructor(t){this._doc=t}manager},xl=(()=>{class e extends as{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,o,i){return n.addEventListener(r,o,i),()=>this.removeEventListener(n,r,o,i)}removeEventListener(n,r,o,i){return n.removeEventListener(r,o,i)}static \u0275fac=function(r){return new(r||e)(ue(je))};static \u0275prov=te({token:e,factory:e.\u0275fac})}return e})(),Ol=new re(""),op=(()=>{class e{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(s=>{s.manager=this});let o=n.filter(s=>!(s instanceof xl));this._plugins=o.slice().reverse();let i=n.find(s=>s instanceof xl);i&&this._plugins.push(i)}addEventListener(n,r,o,i){return this._findPluginFor(r).addEventListener(n,r,o,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(i=>i.supports(n)),!r)throw new Z(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||e)(ue(Ol),ue(Dt))};static \u0275prov=te({token:e,factory:e.\u0275fac})}return e})(),tp="ng-app-id";function gE(e){for(let t of e)t.remove()}function mE(e,t){let n=t.createElement("style");return n.textContent=e,n}function wS(e,t,n,r){let o=e.head?.querySelectorAll(`style[${tp}="${t}"],link[${tp}="${t}"]`);if(o)for(let i of o)i.removeAttribute(tp),i instanceof HTMLLinkElement?r.set(i.href.slice(i.href.lastIndexOf("/")+1),{usage:0,elements:[i]}):i.textContent&&n.set(i.textContent,{usage:0,elements:[i]})}function rp(e,t){let n=t.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",e),n}var ip=(()=>{class e{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(n,r,o,i={}){this.doc=n,this.appId=r,this.nonce=o,wS(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(let o of n)this.addUsage(o,this.inline,mE);r?.forEach(o=>this.addUsage(o,this.external,rp))}removeStyles(n,r){for(let o of n)this.removeUsage(o,this.inline);r?.forEach(o=>this.removeUsage(o,this.external))}addUsage(n,r,o){let i=r.get(n);i?i.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,o(n,this.doc)))})}removeUsage(n,r){let o=r.get(n);o&&(o.usage--,o.usage<=0&&(gE(o.elements),r.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])gE(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[r,{elements:o}]of this.inline)o.push(this.addElement(n,mE(r,this.doc)));for(let[r,{elements:o}]of this.external)o.push(this.addElement(n,rp(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),n.appendChild(r)}static \u0275fac=function(r){return new(r||e)(ue(je),ue(ol),ue(sl,8),ue(ji))};static \u0275prov=te({token:e,factory:e.\u0275fac})}return e})(),np={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},sp=/%COMP%/g;var vE="%COMP%",DS=`_nghost-${vE}`,SS=`_ngcontent-${vE}`,bS=!0,AS=new re("",{factory:()=>bS});function MS(e){return SS.replace(sp,e)}function RS(e){return DS.replace(sp,e)}function EE(e,t){return t.map(n=>n.replace(sp,e))}var ap=(()=>{class e{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;constructor(n,r,o,i,s,a,l=null,c=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestroy=i,this.doc=s,this.ngZone=a,this.nonce=l,this.tracingService=c,this.defaultRenderer=new ls(n,s,a,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;let o=this.getOrCreateRenderer(n,r);return o instanceof kl?o.applyToHost(n):o instanceof us&&o.applyStyles(),o}getOrCreateRenderer(n,r){let o=this.rendererByCompId,i=o.get(r.id);if(!i){let s=this.doc,a=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,p=this.tracingService;switch(r.encapsulation){case un.Emulated:i=new kl(l,c,r,this.appId,f,s,a,p);break;case un.ShadowDom:return new Pl(l,n,r,s,a,this.nonce,p,c);case un.ExperimentalIsolatedShadowDom:return new Pl(l,n,r,s,a,this.nonce,p);default:i=new us(l,c,r,f,s,a,p);break}o.set(r.id,i)}return i}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||e)(ue(op),ue(ip),ue(ol),ue(AS),ue(je),ue(Dt),ue(sl),ue(Yr,8))};static \u0275prov=te({token:e,factory:e.\u0275fac})}return e})(),ls=class{eventManager;doc;ngZone;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(t,n,r,o){this.eventManager=t,this.doc=n,this.ngZone=r,this.tracingService=o}destroy(){}destroyNode=null;createElement(t,n){return n?this.doc.createElementNS(np[n]||n,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,n){(yE(t)?t.content:t).appendChild(n)}insertBefore(t,n,r){t&&(yE(t)?t.content:t).insertBefore(n,r)}removeChild(t,n){n.remove()}selectRootElement(t,n){let r=typeof t=="string"?this.doc.querySelector(t):t;if(!r)throw new Z(-5104,!1);return n||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,r,o){if(o){n=o+":"+n;let i=np[o];i?t.setAttributeNS(i,n,r):t.setAttribute(n,r)}else t.setAttribute(n,r)}removeAttribute(t,n,r){if(r){let o=np[r];o?t.removeAttributeNS(o,n):t.removeAttribute(`${r}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,r,o){o&(bn.DashCase|bn.Important)?t.style.setProperty(n,r,o&bn.Important?"important":""):t.style[n]=r}removeStyle(t,n,r){r&bn.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,r){t!=null&&(t[n]=r)}setValue(t,n){t.nodeValue=n}listen(t,n,r,o){if(typeof t=="string"&&(t=Yn().getGlobalEventTarget(this.doc,t),!t))throw new Z(5102,!1);let i=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(i=this.tracingService.wrapEventListener(t,n,i)),this.eventManager.addEventListener(t,n,i,o)}decoratePreventDefault(t){return n=>{if(n==="__ngUnwrap__")return t;t(n)===!1&&n.preventDefault()}}};function yE(e){return e.tagName==="TEMPLATE"&&e.content!==void 0}var Pl=class extends ls{hostEl;sharedStylesHost;shadowRoot;constructor(t,n,r,o,i,s,a,l){super(t,o,i,a),this.hostEl=n,this.sharedStylesHost=l,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let c=r.styles;c=EE(r.id,c);for(let p of c){let h=document.createElement("style");s&&h.setAttribute("nonce",s),h.textContent=p,this.shadowRoot.appendChild(h)}let f=r.getExternalStyles?.();if(f)for(let p of f){let h=rp(p,o);s&&h.setAttribute("nonce",s),this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,r){return super.insertBefore(this.nodeOrShadowRoot(t),n,r)}removeChild(t,n){return super.removeChild(null,n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},us=class extends ls{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(t,n,r,o,i,s,a,l){super(t,i,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=o;let c=r.styles;this.styles=l?EE(l,c):c,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&zr.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},kl=class extends us{contentAttr;hostAttr;constructor(t,n,r,o,i,s,a,l){let c=o+"-"+r.id;super(t,n,r,i,s,a,l,c),this.contentAttr=MS(c),this.hostAttr=RS(c)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){let r=super.createElement(t,n);return super.setAttribute(r,this.contentAttr,""),r}};var Fl=class e extends ts{supportsDOMEvents=!0;static makeCurrent(){Kf(new e)}onAndCancel(t,n,r,o){return t.addEventListener(n,r,o),()=>{t.removeEventListener(n,r,o)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.remove()}createElement(t,n){return n=n||this.getDefaultDocument(),n.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return n==="window"?window:n==="document"?t:n==="body"?t.body:null}getBaseHref(t){let n=NS();return n==null?null:xS(n)}resetBaseElement(){cs=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return Nl(document.cookie,t)}},cs=null;function NS(){return cs=cs||document.head.querySelector("base"),cs?cs.getAttribute("href"):null}function xS(e){return new URL(e,document.baseURI).pathname}var PS=(()=>{class e{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||e)};static \u0275prov=te({token:e,factory:e.\u0275fac})}return e})(),_E=["alt","control","meta","shift"],kS={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},OS={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey},CE=(()=>{class e extends as{constructor(n){super(n)}supports(n){return e.parseEventName(n)!=null}addEventListener(n,r,o,i){let s=e.parseEventName(r),a=e.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Yn().onAndCancel(n,s.domEventName,a,i))}static parseEventName(n){let r=n.toLowerCase().split("."),o=r.shift();if(r.length===0||!(o==="keydown"||o==="keyup"))return null;let i=e._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),_E.forEach(c=>{let f=r.indexOf(c);f>-1&&(r.splice(f,1),s+=c+".")}),s+=i,r.length!=0||i.length===0)return null;let l={};return l.domEventName=o,l.fullKey=s,l}static matchEventFullKeyCode(n,r){let o=kS[n.key]||n.key,i="";return r.indexOf("code.")>-1&&(o=n.code,i="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),_E.forEach(s=>{if(s!==o){let a=OS[s];a(n)&&(i+=s+".")}}),i+=o,i===r)}static eventCallback(n,r,o){return i=>{e.matchEventFullKeyCode(i,n)&&o.runGuarded(()=>r(i))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(r){return new(r||e)(ue(je))};static \u0275prov=te({token:e,factory:e.\u0275fac})}return e})();async function lp(e,t,n){let r=X({rootComponent:e},FS(t,n));return Jv(r)}function FS(e,t){return{platformRef:t?.platformRef,appProviders:[...HS,...e?.providers??[]],platformProviders:VS}}function LS(){Fl.makeCurrent()}function US(){return new tn}function BS(){return Ef(document),document}var VS=[{provide:ji,useValue:hE},{provide:il,useValue:LS,multi:!0},{provide:je,useFactory:BS}];var HS=[{provide:bi,useValue:"root"},{provide:tn,useFactory:US},{provide:Ol,useClass:xl,multi:!0},{provide:Ol,useClass:CE,multi:!0},ap,ip,op,{provide:jr,useExisting:ap},{provide:Xr,useClass:PS},[]];var Rn=class e{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(t){t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let o=n.slice(0,r),i=n.slice(r+1).trim();this.addHeaderEntry(o,i)}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((n,r)=>{this.addHeaderEntry(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let n=this.headers.get(t.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,n){return this.clone({name:t,value:n,op:"a"})}set(t,n){return this.clone({name:t,value:n,op:"s"})}delete(t,n){return this.clone({name:t,value:n,op:"d"})}maybeSetNormalizedName(t,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,t)}init(){this.lazyInit&&(this.lazyInit instanceof e?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(n=>{this.headers.set(n,t.headers.get(n)),this.normalizedNames.set(n,t.normalizedNames.get(n))})}clone(t){let n=new e;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof e?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([t]),n}applyUpdate(t){let n=t.name.toLowerCase();switch(t.op){case"a":case"s":let r=t.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(t.name,n);let o=(t.op==="a"?this.headers.get(n):void 0)||[];o.push(...r),this.headers.set(n,o);break;case"d":let i=t.value;if(!i)this.headers.delete(n),this.normalizedNames.delete(n);else{let s=this.headers.get(n);if(!s)return;s=s.filter(a=>i.indexOf(a)===-1),s.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}break}}addHeaderEntry(t,n){let r=t.toLowerCase();this.maybeSetNormalizedName(t,r),this.headers.has(r)?this.headers.get(r).push(n):this.headers.set(r,[n])}setHeaderEntries(t,n){let r=(Array.isArray(n)?n:[n]).map(i=>i.toString()),o=t.toLowerCase();this.headers.set(o,r),this.maybeSetNormalizedName(t,o)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>t(this.normalizedNames.get(n),this.headers.get(n)))}};var cp=class{map=new Map;set(t,n){return this.map.set(t,n),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}},dp=class{encodeKey(t){return IE(t)}encodeValue(t){return IE(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}};function $S(e,t){let n=new Map;return e.length>0&&e.replace(/^\?/,"").split("&").forEach(o=>{let i=o.indexOf("="),[s,a]=i==-1?[t.decodeKey(o),""]:[t.decodeKey(o.slice(0,i)),t.decodeValue(o.slice(i+1))],l=n.get(s)||[];l.push(a),n.set(s,l)}),n}var GS=/%(\d[a-f0-9])/gi,zS={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function IE(e){return encodeURIComponent(e).replace(GS,(t,n)=>zS[n]??t)}function Ll(e){return`${e}`}var Qn=class e{map;encoder;updates=null;cloneFrom=null;constructor(t={}){if(this.encoder=t.encoder||new dp,t.fromString){if(t.fromObject)throw new Z(2805,!1);this.map=$S(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(n=>{let r=t.fromObject[n],o=Array.isArray(r)?r.map(Ll):[Ll(r)];this.map.set(n,o)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();let n=this.map.get(t);return n?n[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,n){return this.clone({param:t,value:n,op:"a"})}appendAll(t){let n=[];return Object.keys(t).forEach(r=>{let o=t[r];Array.isArray(o)?o.forEach(i=>{n.push({param:r,value:i,op:"a"})}):n.push({param:r,value:o,op:"a"})}),this.clone(n)}set(t,n){return this.clone({param:t,value:n,op:"s"})}delete(t,n){return this.clone({param:t,value:n,op:"d"})}toString(){return this.init(),this.keys().map(t=>{let n=this.encoder.encodeKey(t);return this.map.get(t).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(t=>t!=="").join("&")}clone(t){let n=new e({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(t),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":let n=(t.op==="a"?this.map.get(t.param):void 0)||[];n.push(Ll(t.value)),this.map.set(t.param,n);break;case"d":if(t.value!==void 0){let r=this.map.get(t.param)||[],o=r.indexOf(Ll(t.value));o!==-1&&r.splice(o,1),r.length>0?this.map.set(t.param,r):this.map.delete(t.param)}else{this.map.delete(t.param);break}}}),this.cloneFrom=this.updates=null)}};function qS(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function TE(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer}function wE(e){return typeof Blob<"u"&&e instanceof Blob}function DE(e){return typeof FormData<"u"&&e instanceof FormData}function jS(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}var SE="Content-Type",bE="Accept",AE="text/plain",ME="application/json",WS=`${ME}, ${AE}, */*`,Uo=class e{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;credentials;keepalive=!1;cache;priority;mode;redirect;referrer;integrity;referrerPolicy;responseType="json";method;params;urlWithParams;transferCache;timeout;constructor(t,n,r,o){this.url=n,this.method=t.toUpperCase();let i;if(qS(this.method)||o?(this.body=r!==void 0?r:null,i=o):i=r,i){if(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,this.keepalive=!!i.keepalive,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.context&&(this.context=i.context),i.params&&(this.params=i.params),i.priority&&(this.priority=i.priority),i.cache&&(this.cache=i.cache),i.credentials&&(this.credentials=i.credentials),typeof i.timeout=="number"){if(i.timeout<1||!Number.isInteger(i.timeout))throw new Z(2822,"");this.timeout=i.timeout}i.mode&&(this.mode=i.mode),i.redirect&&(this.redirect=i.redirect),i.integrity&&(this.integrity=i.integrity),i.referrer&&(this.referrer=i.referrer),i.referrerPolicy&&(this.referrerPolicy=i.referrerPolicy),this.transferCache=i.transferCache}if(this.headers??=new Rn,this.context??=new cp,!this.params)this.params=new Qn,this.urlWithParams=n;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=n;else{let a=n.indexOf("?"),l=a===-1?"?":a<n.length-1?"&":"";this.urlWithParams=n+l+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||TE(this.body)||wE(this.body)||DE(this.body)||jS(this.body)?this.body:this.body instanceof Qn?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||DE(this.body)?null:wE(this.body)?this.body.type||null:TE(this.body)?null:typeof this.body=="string"?AE:this.body instanceof Qn?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?ME:null}clone(t={}){let n=t.method||this.method,r=t.url||this.url,o=t.responseType||this.responseType,i=t.keepalive??this.keepalive,s=t.priority||this.priority,a=t.cache||this.cache,l=t.mode||this.mode,c=t.redirect||this.redirect,f=t.credentials||this.credentials,p=t.referrer||this.referrer,h=t.integrity||this.integrity,g=t.referrerPolicy||this.referrerPolicy,m=t.transferCache??this.transferCache,y=t.timeout??this.timeout,E=t.body!==void 0?t.body:this.body,C=t.withCredentials??this.withCredentials,T=t.reportProgress??this.reportProgress,D=t.headers||this.headers,A=t.params||this.params,b=t.context??this.context;return t.setHeaders!==void 0&&(D=Object.keys(t.setHeaders).reduce((O,R)=>O.set(R,t.setHeaders[R]),D)),t.setParams&&(A=Object.keys(t.setParams).reduce((O,R)=>O.set(R,t.setParams[R]),A)),new e(n,r,E,{params:A,headers:D,context:b,reportProgress:T,responseType:o,withCredentials:C,transferCache:m,keepalive:i,cache:a,priority:s,timeout:y,mode:l,redirect:c,credentials:f,referrer:p,integrity:h,referrerPolicy:g})}},eo=(function(e){return e[e.Sent=0]="Sent",e[e.UploadProgress=1]="UploadProgress",e[e.ResponseHeader=2]="ResponseHeader",e[e.DownloadProgress=3]="DownloadProgress",e[e.Response=4]="Response",e[e.User=5]="User",e})(eo||{}),ds=class{headers;status;statusText;url;ok;type;redirected;responseType;constructor(t,n=200,r="OK"){this.headers=t.headers||new Rn,this.status=t.status!==void 0?t.status:n,this.statusText=t.statusText||r,this.url=t.url||null,this.redirected=t.redirected,this.responseType=t.responseType,this.ok=this.status>=200&&this.status<300}},fp=class e extends ds{constructor(t={}){super(t)}type=eo.ResponseHeader;clone(t={}){return new e({headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},fs=class e extends ds{body;constructor(t={}){super(t),this.body=t.body!==void 0?t.body:null}type=eo.Response;clone(t={}){return new e({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0,redirected:t.redirected??this.redirected,responseType:t.responseType??this.responseType})}},Bo=class extends ds{name="HttpErrorResponse";message;error;ok=!1;constructor(t){super(t,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${t.url||"(unknown url)"}`:this.message=`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}},JS=200,YS=204;var ZS=/^\)\]\}',?\n/;var KS=(()=>{class e{xhrFactory;tracingService=z(Yr,{optional:!0});constructor(n){this.xhrFactory=n}maybePropagateTrace(n){return this.tracingService?.propagate?this.tracingService.propagate(n):n}handle(n){if(n.method==="JSONP")throw new Z(-2800,!1);let r=this.xhrFactory;return ve(null).pipe(Xt(()=>new Ce(i=>{let s=r.build();if(s.open(n.method,n.urlWithParams),n.withCredentials&&(s.withCredentials=!0),n.headers.forEach((E,C)=>s.setRequestHeader(E,C.join(","))),n.headers.has(bE)||s.setRequestHeader(bE,WS),!n.headers.has(SE)){let E=n.detectContentTypeHeader();E!==null&&s.setRequestHeader(SE,E)}if(n.timeout&&(s.timeout=n.timeout),n.responseType){let E=n.responseType.toLowerCase();s.responseType=E!=="json"?E:"text"}let a=n.serializeBody(),l=null,c=()=>{if(l!==null)return l;let E=s.statusText||"OK",C=new Rn(s.getAllResponseHeaders()),T=s.responseURL||n.url;return l=new fp({headers:C,status:s.status,statusText:E,url:T}),l},f=this.maybePropagateTrace(()=>{let{headers:E,status:C,statusText:T,url:D}=c(),A=null;C!==YS&&(A=typeof s.response>"u"?s.responseText:s.response),C===0&&(C=A?JS:0);let b=C>=200&&C<300;if(n.responseType==="json"&&typeof A=="string"){let O=A;A=A.replace(ZS,"");try{A=A!==""?JSON.parse(A):null}catch(R){A=O,b&&(b=!1,A={error:R,text:A})}}b?(i.next(new fs({body:A,headers:E,status:C,statusText:T,url:D||void 0})),i.complete()):i.error(new Bo({error:A,headers:E,status:C,statusText:T,url:D||void 0}))}),p=this.maybePropagateTrace(E=>{let{url:C}=c(),T=new Bo({error:E,status:s.status||0,statusText:s.statusText||"Unknown Error",url:C||void 0});i.error(T)}),h=p;n.timeout&&(h=this.maybePropagateTrace(E=>{let{url:C}=c(),T=new Bo({error:new DOMException("Request timed out","TimeoutError"),status:s.status||0,statusText:s.statusText||"Request timeout",url:C||void 0});i.error(T)}));let g=!1,m=this.maybePropagateTrace(E=>{g||(i.next(c()),g=!0);let C={type:eo.DownloadProgress,loaded:E.loaded};E.lengthComputable&&(C.total=E.total),n.responseType==="text"&&s.responseText&&(C.partialText=s.responseText),i.next(C)}),y=this.maybePropagateTrace(E=>{let C={type:eo.UploadProgress,loaded:E.loaded};E.lengthComputable&&(C.total=E.total),i.next(C)});return s.addEventListener("load",f),s.addEventListener("error",p),s.addEventListener("timeout",h),s.addEventListener("abort",p),n.reportProgress&&(s.addEventListener("progress",m),a!==null&&s.upload&&s.upload.addEventListener("progress",y)),s.send(a),i.next({type:eo.Sent}),()=>{s.removeEventListener("error",p),s.removeEventListener("abort",p),s.removeEventListener("load",f),s.removeEventListener("timeout",h),n.reportProgress&&(s.removeEventListener("progress",m),a!==null&&s.upload&&s.upload.removeEventListener("progress",y)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(r){return new(r||e)(ue(Xr))};static \u0275prov=te({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function QS(e,t){return t(e)}function XS(e,t,n){return(r,o)=>et(n,()=>t(r,i=>e(i,o)))}var eb=new re("",{factory:()=>[]}),RE=new re(""),tb=new re("",{factory:()=>!0});var nb=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=te({token:e,factory:function(r){let o=null;return r?o=new(r||e):o=ue(KS),o},providedIn:"root"})}return e})();var rb=(()=>{class e{backend;injector;chain=null;pendingTasks=z(Fi);contributeToStability=z(tb);constructor(n,r){this.backend=n,this.injector=r}handle(n){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(eb),...this.injector.get(RE,[])]));this.chain=r.reduceRight((o,i)=>XS(o,i,this.injector),QS)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(n,o=>this.backend.handle(o)).pipe(vi(r))}else return this.chain(n,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||e)(ue(nb),ue(Ue))};static \u0275prov=te({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),ob=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=te({token:e,factory:function(r){let o=null;return r?o=new(r||e):o=ue(rb),o},providedIn:"root"})}return e})();function up(e,t){return{body:t,headers:e.headers,context:e.context,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials,credentials:e.credentials,transferCache:e.transferCache,timeout:e.timeout,keepalive:e.keepalive,priority:e.priority,cache:e.cache,mode:e.mode,redirect:e.redirect,integrity:e.integrity,referrer:e.referrer,referrerPolicy:e.referrerPolicy}}var pp=(()=>{class e{handler;constructor(n){this.handler=n}request(n,r,o={}){let i;if(n instanceof Uo)i=n;else{let l;o.headers instanceof Rn?l=o.headers:l=new Rn(o.headers);let c;o.params&&(o.params instanceof Qn?c=o.params:c=new Qn({fromObject:o.params})),i=new Uo(n,r,o.body!==void 0?o.body:null,{headers:l,context:o.context,params:c,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials,transferCache:o.transferCache,keepalive:o.keepalive,priority:o.priority,cache:o.cache,mode:o.mode,redirect:o.redirect,credentials:o.credentials,referrer:o.referrer,referrerPolicy:o.referrerPolicy,integrity:o.integrity,timeout:o.timeout})}let s=ve(i).pipe(yo(l=>this.handler.handle(l)));if(n instanceof Uo||o.observe==="events")return s;let a=s.pipe(Qt(l=>l instanceof fs));switch(o.observe||"body"){case"body":switch(i.responseType){case"arraybuffer":return a.pipe(Me(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new Z(2806,!1);return l.body}));case"blob":return a.pipe(Me(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new Z(2807,!1);return l.body}));case"text":return a.pipe(Me(l=>{if(l.body!==null&&typeof l.body!="string")throw new Z(2808,!1);return l.body}));default:return a.pipe(Me(l=>l.body))}case"response":return a;default:throw new Z(2809,!1)}}delete(n,r={}){return this.request("DELETE",n,r)}get(n,r={}){return this.request("GET",n,r)}head(n,r={}){return this.request("HEAD",n,r)}jsonp(n,r){return this.request("JSONP",n,{params:new Qn().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(n,r={}){return this.request("OPTIONS",n,r)}patch(n,r,o={}){return this.request("PATCH",n,up(o,r))}post(n,r,o={}){return this.request("POST",n,up(o,r))}put(n,r,o={}){return this.request("PUT",n,up(o,r))}static \u0275fac=function(r){return new(r||e)(ue(ob))};static \u0275prov=te({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var NE=(()=>{class e{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||e)(ue(je))};static \u0275prov=te({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var fe="primary",ws=Symbol("RouteTitle"),vp=class{params;constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function ro(e){return new vp(e)}function hp(e,t,n){for(let r=0;r<e.length;r++){let o=e[r],i=t[r];if(o[0]===":")n[o.substring(1)]=i;else if(o!==i.path)return!1}return!0}function HE(e,t,n){let r=n.path.split("/"),o=r.indexOf("**");if(o===-1){if(r.length>e.length||n.pathMatch==="full"&&(t.hasChildren()||r.length<e.length))return null;let l={},c=e.slice(0,r.length);return hp(r,c,l)?{consumed:c,posParams:l}:null}if(o!==r.lastIndexOf("**"))return null;let i=r.slice(0,o),s=r.slice(o+1);if(i.length+s.length>e.length||n.pathMatch==="full"&&t.hasChildren()&&n.path!=="**")return null;let a={};return!hp(i,e.slice(0,i.length),a)||!hp(s,e.slice(e.length-s.length),a)?null:{consumed:e,posParams:a}}function Gl(e){return new Promise((t,n)=>{e.pipe(On()).subscribe({next:r=>t(r),error:r=>n(r)})})}function ab(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!Nn(e[n],t[n]))return!1;return!0}function Nn(e,t){let n=e?Ep(e):void 0,r=t?Ep(t):void 0;if(!n||!r||n.length!=r.length)return!1;let o;for(let i=0;i<n.length;i++)if(o=n[i],!$E(e[o],t[o]))return!1;return!0}function Ep(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}function $E(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;let n=[...e].sort(),r=[...t].sort();return n.every((o,i)=>r[i]===o)}else return e===t}function lb(e){return e.length>0?e[e.length-1]:null}function so(e){return ua(e)?e:Po(e)?Qe(Promise.resolve(e)):ve(e)}function GE(e){return ua(e)?Gl(e):Promise.resolve(e)}var ub={exact:qE,subset:jE},zE={exact:cb,subset:db,ignored:()=>!0};function xE(e,t,n){return ub[n.paths](e.root,t.root,n.matrixParams)&&zE[n.queryParams](e.queryParams,t.queryParams)&&!(n.fragment==="exact"&&e.fragment!==t.fragment)}function cb(e,t){return Nn(e,t)}function qE(e,t,n){if(!to(e.segments,t.segments)||!Vl(e.segments,t.segments,n)||e.numberOfChildren!==t.numberOfChildren)return!1;for(let r in t.children)if(!e.children[r]||!qE(e.children[r],t.children[r],n))return!1;return!0}function db(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>$E(e[n],t[n]))}function jE(e,t,n){return WE(e,t,t.segments,n)}function WE(e,t,n,r){if(e.segments.length>n.length){let o=e.segments.slice(0,n.length);return!(!to(o,n)||t.hasChildren()||!Vl(o,n,r))}else if(e.segments.length===n.length){if(!to(e.segments,n)||!Vl(e.segments,n,r))return!1;for(let o in t.children)if(!e.children[o]||!jE(e.children[o],t.children[o],r))return!1;return!0}else{let o=n.slice(0,e.segments.length),i=n.slice(e.segments.length);return!to(e.segments,o)||!Vl(e.segments,o,r)||!e.children[fe]?!1:WE(e.children[fe],t,i,r)}}function Vl(e,t,n){return t.every((r,o)=>zE[n](e[o].parameters,r.parameters))}var hn=class{root;queryParams;fragment;_queryParamMap;constructor(t=new Se([],{}),n={},r=null){this.root=t,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=ro(this.queryParams),this._queryParamMap}toString(){return hb.serialize(this)}},Se=class{segments;children;parent=null;constructor(t,n){this.segments=t,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Hl(this)}},gr=class{path;parameters;_parameterMap;constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap??=ro(this.parameters),this._parameterMap}toString(){return YE(this)}};function fb(e,t){return to(e,t)&&e.every((n,r)=>Nn(n.parameters,t[r].parameters))}function to(e,t){return e.length!==t.length?!1:e.every((n,r)=>n.path===t[r].path)}function pb(e,t){let n=[];return Object.entries(e.children).forEach(([r,o])=>{r===fe&&(n=n.concat(t(o,r)))}),Object.entries(e.children).forEach(([r,o])=>{r!==fe&&(n=n.concat(t(o,r)))}),n}var Ds=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=te({token:e,factory:()=>new mr,providedIn:"root"})}return e})(),mr=class{parse(t){let n=new Cp(t);return new hn(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){let n=`/${ps(t.root,!0)}`,r=yb(t.queryParams),o=typeof t.fragment=="string"?`#${gb(t.fragment)}`:"";return`${n}${r}${o}`}},hb=new mr;function Hl(e){return e.segments.map(t=>YE(t)).join("/")}function ps(e,t){if(!e.hasChildren())return Hl(e);if(t){let n=e.children[fe]?ps(e.children[fe],!1):"",r=[];return Object.entries(e.children).forEach(([o,i])=>{o!==fe&&r.push(`${o}:${ps(i,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=pb(e,(r,o)=>o===fe?[ps(e.children[fe],!1)]:[`${o}:${ps(r,!1)}`]);return Object.keys(e.children).length===1&&e.children[fe]!=null?`${Hl(e)}/${n[0]}`:`${Hl(e)}/(${n.join("//")})`}}function JE(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ul(e){return JE(e).replace(/%3B/gi,";")}function gb(e){return encodeURI(e)}function _p(e){return JE(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function $l(e){return decodeURIComponent(e)}function PE(e){return $l(e.replace(/\+/g,"%20"))}function YE(e){return`${_p(e.path)}${mb(e.parameters)}`}function mb(e){return Object.entries(e).map(([t,n])=>`;${_p(t)}=${_p(n)}`).join("")}function yb(e){let t=Object.entries(e).map(([n,r])=>Array.isArray(r)?r.map(o=>`${Ul(n)}=${Ul(o)}`).join("&"):`${Ul(n)}=${Ul(r)}`).filter(n=>n);return t.length?`?${t.join("&")}`:""}var vb=/^[^\/()?;#]+/;function gp(e){let t=e.match(vb);return t?t[0]:""}var Eb=/^[^\/()?;=#]+/;function _b(e){let t=e.match(Eb);return t?t[0]:""}var Cb=/^[^=?&#]+/;function Ib(e){let t=e.match(Cb);return t?t[0]:""}var Tb=/^[^&#]+/;function wb(e){let t=e.match(Tb);return t?t[0]:""}var Cp=class{url;remaining;constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Se([],{}):new Se([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(r[fe]=new Se(t,n)),r}parseSegment(){let t=gp(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new Z(4009,!1);return this.capture(t),new gr($l(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let n=_b(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=gp(this.remaining);o&&(r=o,this.capture(r))}t[$l(n)]=$l(r)}parseQueryParam(t){let n=Ib(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=wb(this.remaining);s&&(r=s,this.capture(r))}let o=PE(n),i=PE(r);if(t.hasOwnProperty(o)){let s=t[o];Array.isArray(s)||(s=[s],t[o]=s),s.push(i)}else t[o]=i}parseParens(t){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=gp(this.remaining),o=this.remaining[r.length];if(o!=="/"&&o!==")"&&o!==";")throw new Z(4010,!1);let i;r.indexOf(":")>-1?(i=r.slice(0,r.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=fe);let s=this.parseChildren();n[i??fe]=Object.keys(s).length===1&&s[fe]?s[fe]:new Se([],s),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new Z(4011,!1)}};function ZE(e){return e.segments.length>0?new Se([],{[fe]:e}):e}function KE(e){let t={};for(let[r,o]of Object.entries(e.children)){let i=KE(o);if(r===fe&&i.segments.length===0&&i.hasChildren())for(let[s,a]of Object.entries(i.children))t[s]=a;else(i.segments.length>0||i.hasChildren())&&(t[r]=i)}let n=new Se(e.segments,t);return Db(n)}function Db(e){if(e.numberOfChildren===1&&e.children[fe]){let t=e.children[fe];return new Se(e.segments.concat(t.segments),t.children)}return e}function Go(e){return e instanceof hn}function QE(e,t,n=null,r=null,o=new mr){let i=XE(e);return e_(i,t,n,r,o)}function XE(e){let t;function n(i){let s={};for(let l of i.children){let c=n(l);s[l.outlet]=c}let a=new Se(i.url,s);return i===e&&(t=a),a}let r=n(e.root),o=ZE(r);return t??o}function e_(e,t,n,r,o){let i=e;for(;i.parent;)i=i.parent;if(t.length===0)return mp(i,i,i,n,r,o);let s=Sb(t);if(s.toRoot())return mp(i,i,new Se([],{}),n,r,o);let a=bb(s,i,e),l=a.processChildren?gs(a.segmentGroup,a.index,s.commands):n_(a.segmentGroup,a.index,s.commands);return mp(i,a.segmentGroup,l,n,r,o)}function zl(e){return typeof e=="object"&&e!=null&&!e.outlets&&!e.segmentPath}function vs(e){return typeof e=="object"&&e!=null&&e.outlets}function kE(e,t,n){e||="\u0275";let r=new hn;return r.queryParams={[e]:t},n.parse(n.serialize(r)).queryParams[e]}function mp(e,t,n,r,o,i){let s={};for(let[c,f]of Object.entries(r??{}))s[c]=Array.isArray(f)?f.map(p=>kE(c,p,i)):kE(c,f,i);let a;e===t?a=n:a=t_(e,t,n);let l=ZE(KE(a));return new hn(l,s,o)}function t_(e,t,n){let r={};return Object.entries(e.children).forEach(([o,i])=>{i===t?r[o]=n:r[o]=t_(i,t,n)}),new Se(e.segments,r)}var ql=class{isAbsolute;numberOfDoubleDots;commands;constructor(t,n,r){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=r,t&&r.length>0&&zl(r[0]))throw new Z(4003,!1);let o=r.find(vs);if(o&&o!==lb(r))throw new Z(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Sb(e){if(typeof e[0]=="string"&&e.length===1&&e[0]==="/")return new ql(!0,0,e);let t=0,n=!1,r=e.reduce((o,i,s)=>{if(typeof i=="object"&&i!=null){if(i.outlets){let a={};return Object.entries(i.outlets).forEach(([l,c])=>{a[l]=typeof c=="string"?c.split("/"):c}),[...o,{outlets:a}]}if(i.segmentPath)return[...o,i.segmentPath]}return typeof i!="string"?[...o,i]:s===0?(i.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?n=!0:a===".."?t++:a!=""&&o.push(a))}),o):[...o,i]},[]);return new ql(n,t,r)}var Ho=class{segmentGroup;processChildren;index;constructor(t,n,r){this.segmentGroup=t,this.processChildren=n,this.index=r}};function bb(e,t,n){if(e.isAbsolute)return new Ho(t,!0,0);if(!n)return new Ho(t,!1,NaN);if(n.parent===null)return new Ho(n,!0,0);let r=zl(e.commands[0])?0:1,o=n.segments.length-1+r;return Ab(n,o,e.numberOfDoubleDots)}function Ab(e,t,n){let r=e,o=t,i=n;for(;i>o;){if(i-=o,r=r.parent,!r)throw new Z(4005,!1);o=r.segments.length}return new Ho(r,!1,o-i)}function Mb(e){return vs(e[0])?e[0].outlets:{[fe]:e}}function n_(e,t,n){if(e??=new Se([],{}),e.segments.length===0&&e.hasChildren())return gs(e,t,n);let r=Rb(e,t,n),o=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){let i=new Se(e.segments.slice(0,r.pathIndex),{});return i.children[fe]=new Se(e.segments.slice(r.pathIndex),e.children),gs(i,0,o)}else return r.match&&o.length===0?new Se(e.segments,{}):r.match&&!e.hasChildren()?Ip(e,t,n):r.match?gs(e,0,o):Ip(e,t,n)}function gs(e,t,n){if(n.length===0)return new Se(e.segments,{});{let r=Mb(n),o={};if(Object.keys(r).some(i=>i!==fe)&&e.children[fe]&&e.numberOfChildren===1&&e.children[fe].segments.length===0){let i=gs(e.children[fe],t,n);return new Se(e.segments,i.children)}return Object.entries(r).forEach(([i,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(o[i]=n_(e.children[i],t,s))}),Object.entries(e.children).forEach(([i,s])=>{r[i]===void 0&&(o[i]=s)}),new Se(e.segments,o)}}function Rb(e,t,n){let r=0,o=t,i={match:!1,pathIndex:0,commandIndex:0};for(;o<e.segments.length;){if(r>=n.length)return i;let s=e.segments[o],a=n[r];if(vs(a))break;let l=`${a}`,c=r<n.length-1?n[r+1]:null;if(o>0&&l===void 0)break;if(l&&c&&typeof c=="object"&&c.outlets===void 0){if(!FE(l,c,s))return i;r+=2}else{if(!FE(l,{},s))return i;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}function Ip(e,t,n){let r=e.segments.slice(0,t),o=0;for(;o<n.length;){let i=n[o];if(vs(i)){let l=Nb(i.outlets);return new Se(r,l)}if(o===0&&zl(n[0])){let l=e.segments[t];r.push(new gr(l.path,OE(n[0]))),o++;continue}let s=vs(i)?i.outlets[fe]:`${i}`,a=o<n.length-1?n[o+1]:null;s&&a&&zl(a)?(r.push(new gr(s,OE(a))),o+=2):(r.push(new gr(s,{})),o++)}return new Se(r,{})}function Nb(e){let t={};return Object.entries(e).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(t[n]=Ip(new Se([],{}),0,r))}),t}function OE(e){let t={};return Object.entries(e).forEach(([n,r])=>t[n]=`${r}`),t}function FE(e,t,n){return e==n.path&&Nn(t,n.parameters)}var ms="imperative",nt=(function(e){return e[e.NavigationStart=0]="NavigationStart",e[e.NavigationEnd=1]="NavigationEnd",e[e.NavigationCancel=2]="NavigationCancel",e[e.NavigationError=3]="NavigationError",e[e.RoutesRecognized=4]="RoutesRecognized",e[e.ResolveStart=5]="ResolveStart",e[e.ResolveEnd=6]="ResolveEnd",e[e.GuardsCheckStart=7]="GuardsCheckStart",e[e.GuardsCheckEnd=8]="GuardsCheckEnd",e[e.RouteConfigLoadStart=9]="RouteConfigLoadStart",e[e.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",e[e.ChildActivationStart=11]="ChildActivationStart",e[e.ChildActivationEnd=12]="ChildActivationEnd",e[e.ActivationStart=13]="ActivationStart",e[e.ActivationEnd=14]="ActivationEnd",e[e.Scroll=15]="Scroll",e[e.NavigationSkipped=16]="NavigationSkipped",e})(nt||{}),Ft=class{id;url;constructor(t,n){this.id=t,this.url=n}},oo=class extends Ft{type=nt.NavigationStart;navigationTrigger;restoredState;constructor(t,n,r="imperative",o=null){super(t,n),this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},er=class extends Ft{urlAfterRedirects;type=nt.NavigationEnd;constructor(t,n,r){super(t,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},gt=(function(e){return e[e.Redirect=0]="Redirect",e[e.SupersededByNewNavigation=1]="SupersededByNewNavigation",e[e.NoDataFromResolver=2]="NoDataFromResolver",e[e.GuardRejected=3]="GuardRejected",e[e.Aborted=4]="Aborted",e})(gt||{}),Es=(function(e){return e[e.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",e[e.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",e})(Es||{}),Wt=class extends Ft{reason;code;type=nt.NavigationCancel;constructor(t,n,r,o){super(t,n),this.reason=r,this.code=o}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}};function r_(e){return e instanceof Wt&&(e.code===gt.Redirect||e.code===gt.SupersededByNewNavigation)}var tr=class extends Ft{reason;code;type=nt.NavigationSkipped;constructor(t,n,r,o){super(t,n),this.reason=r,this.code=o}},io=class extends Ft{error;target;type=nt.NavigationError;constructor(t,n,r,o){super(t,n),this.error=r,this.target=o}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},zo=class extends Ft{urlAfterRedirects;state;type=nt.RoutesRecognized;constructor(t,n,r,o){super(t,n),this.urlAfterRedirects=r,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},jl=class extends Ft{urlAfterRedirects;state;type=nt.GuardsCheckStart;constructor(t,n,r,o){super(t,n),this.urlAfterRedirects=r,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Wl=class extends Ft{urlAfterRedirects;state;shouldActivate;type=nt.GuardsCheckEnd;constructor(t,n,r,o,i){super(t,n),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Jl=class extends Ft{urlAfterRedirects;state;type=nt.ResolveStart;constructor(t,n,r,o){super(t,n),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Yl=class extends Ft{urlAfterRedirects;state;type=nt.ResolveEnd;constructor(t,n,r,o){super(t,n),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Zl=class{route;type=nt.RouteConfigLoadStart;constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Kl=class{route;type=nt.RouteConfigLoadEnd;constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Ql=class{snapshot;type=nt.ChildActivationStart;constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Xl=class{snapshot;type=nt.ChildActivationEnd;constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},eu=class{snapshot;type=nt.ActivationStart;constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},tu=class{snapshot;type=nt.ActivationEnd;constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var qo=class{},jo=class{url;navigationBehaviorOptions;constructor(t,n){this.url=t,this.navigationBehaviorOptions=n}};function xb(e){return!(e instanceof qo)&&!(e instanceof jo)}var nu=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return this.route?.snapshot._environmentInjector??this.rootInjector}constructor(t){this.rootInjector=t,this.children=new Yo(this.rootInjector)}},Yo=(()=>{class e{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){let o=this.getOrCreateContext(n);o.outlet=r,this.contexts.set(n,o)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new nu(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||e)(ue(Ue))};static \u0275prov=te({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),ru=class{_root;constructor(t){this._root=t}get root(){return this._root.value}parent(t){let n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){let n=Tp(t,this._root);return n?n.children.map(r=>r.value):[]}firstChild(t){let n=Tp(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){let n=wp(t,this._root);return n.length<2?[]:n[n.length-2].children.map(o=>o.value).filter(o=>o!==t)}pathFromRoot(t){return wp(t,this._root).map(n=>n.value)}};function Tp(e,t){if(e===t.value)return t;for(let n of t.children){let r=Tp(e,n);if(r)return r}return null}function wp(e,t){if(e===t.value)return[t];for(let n of t.children){let r=wp(e,n);if(r.length)return r.unshift(t),r}return[]}var Ot=class{value;children;constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}};function Vo(e){let t={};return e&&e.children.forEach(n=>t[n.value.outlet]=n),t}var _s=class extends ru{snapshot;constructor(t,n){super(t),this.snapshot=n,xp(this,t)}toString(){return this.snapshot.toString()}};function o_(e,t){let n=Pb(e,t),r=new ot([new gr("",{})]),o=new ot({}),i=new ot({}),s=new ot({}),a=new ot(""),l=new yr(r,o,s,a,i,fe,e,n.root);return l.snapshot=n.root,new _s(new Ot(l,[]),n)}function Pb(e,t){let n={},r={},o={},s=new no([],n,o,"",r,fe,e,null,{},t);return new Cs("",new Ot(s,[]))}var yr=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(t,n,r,o,i,s,a,l){this.urlSubject=t,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=o,this.dataSubject=i,this.outlet=s,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(Me(c=>c[ws]))??ve(void 0),this.url=t,this.params=n,this.queryParams=r,this.fragment=o,this.data=i}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Me(t=>ro(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Me(t=>ro(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function ou(e,t,n="emptyOnly"){let r,{routeConfig:o}=e;return t!==null&&(n==="always"||o?.path===""||!t.component&&!t.routeConfig?.loadComponent)?r={params:X(X({},t.params),e.params),data:X(X({},t.data),e.data),resolve:X(X(X(X({},e.data),t.data),o?.data),e._resolvedData)}:r={params:X({},e.params),data:X({},e.data),resolve:X(X({},e.data),e._resolvedData??{})},o&&s_(o)&&(r.resolve[ws]=o.title),r}var no=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;_environmentInjector;get title(){return this.data?.[ws]}constructor(t,n,r,o,i,s,a,l,c,f){this.url=t,this.params=n,this.queryParams=r,this.fragment=o,this.data=i,this.outlet=s,this.component=a,this.routeConfig=l,this._resolve=c,this._environmentInjector=f}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ro(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ro(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${n}')`}},Cs=class extends ru{url;constructor(t,n){super(n),this.url=t,xp(this,n)}toString(){return i_(this._root)}};function xp(e,t){t.value._routerState=e,t.children.forEach(n=>xp(e,n))}function i_(e){let t=e.children.length>0?` { ${e.children.map(i_).join(", ")} } `:"";return`${e.value}${t}`}function yp(e){if(e.snapshot){let t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,Nn(t.queryParams,n.queryParams)||e.queryParamsSubject.next(n.queryParams),t.fragment!==n.fragment&&e.fragmentSubject.next(n.fragment),Nn(t.params,n.params)||e.paramsSubject.next(n.params),ab(t.url,n.url)||e.urlSubject.next(n.url),Nn(t.data,n.data)||e.dataSubject.next(n.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function Dp(e,t){let n=Nn(e.params,t.params)&&fb(e.url,t.url),r=!e.parent!=!t.parent;return n&&!r&&(!e.parent||Dp(e.parent,t.parent))}function s_(e){return typeof e.title=="string"||e.title===null}var a_=new re(""),Ss=(()=>{class e{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=fe;activateEvents=new vt;deactivateEvents=new vt;attachEvents=new vt;detachEvents=new vt;routerOutletData=dn();parentContexts=z(Yo);location=z(Ji);changeDetector=z(Zf);inputBinder=z(lu,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:o}=n.name;if(r)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Z(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Z(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Z(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new Z(4013,!1);this._activatedRoute=n;let o=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new Sp(n,a,o.injector,this.routerOutletData);this.activated=o.createComponent(s,{index:o.length,injector:l,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||e)};static \u0275dir=gl({type:e,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[tl]})}return e})(),Sp=class{route;childContexts;parent;outletData;constructor(t,n,r,o){this.route=t,this.childContexts=n,this.parent=r,this.outletData=o}get(t,n){return t===yr?this.route:t===Yo?this.childContexts:t===a_?this.outletData:this.parent.get(t,n)}},lu=new re("");var Pp=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275cmp=cn({type:e,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,o){r&1&&pr(0,"router-outlet")},dependencies:[Ss],encapsulation:2})}return e})();function kp(e){let t=e.children&&e.children.map(kp),n=t?ke(X({},e),{children:t}):X({},e);return!n.component&&!n.loadComponent&&(t||n.loadChildren)&&n.outlet&&n.outlet!==fe&&(n.component=Pp),n}function kb(e,t,n){let r=Is(e,t._root,n?n._root:void 0);return new _s(r,t)}function Is(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=t.value;let o=Ob(e,t,n);return new Ot(r,o)}else{if(e.shouldAttach(t.value)){let i=e.retrieve(t.value);if(i!==null){let s=i.route;return s.value._futureSnapshot=t.value,s.children=t.children.map(a=>Is(e,a)),s}}let r=Fb(t.value),o=t.children.map(i=>Is(e,i));return new Ot(r,o)}}function Ob(e,t,n){return t.children.map(r=>{for(let o of n.children)if(e.shouldReuseRoute(r.value,o.value.snapshot))return Is(e,r,o);return Is(e,r)})}function Fb(e){return new yr(new ot(e.url),new ot(e.params),new ot(e.queryParams),new ot(e.fragment),new ot(e.data),e.outlet,e.component,e)}var Wo=class{redirectTo;navigationBehaviorOptions;constructor(t,n){this.redirectTo=t,this.navigationBehaviorOptions=n}},l_="ngNavigationCancelingError";function iu(e,t){let{redirectTo:n,navigationBehaviorOptions:r}=Go(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,o=u_(!1,gt.Redirect);return o.url=n,o.navigationBehaviorOptions=r,o}function u_(e,t){let n=new Error(`NavigationCancelingError: ${e||""}`);return n[l_]=!0,n.cancellationCode=t,n}function Lb(e){return c_(e)&&Go(e.url)}function c_(e){return!!e&&e[l_]}var bp=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(t,n,r,o,i){this.routeReuseStrategy=t,this.futureState=n,this.currState=r,this.forwardEvent=o,this.inputBindingEnabled=i}activate(t){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,t),yp(this.futureState.root),this.activateChildRoutes(n,r,t)}deactivateChildRoutes(t,n,r){let o=Vo(n);t.children.forEach(i=>{let s=i.value.outlet;this.deactivateRoutes(i,o[s],r),delete o[s]}),Object.values(o).forEach(i=>{this.deactivateRouteAndItsChildren(i,r)})}deactivateRoutes(t,n,r){let o=t.value,i=n?n.value:null;if(o===i)if(o.component){let s=r.getContext(o.outlet);s&&this.deactivateChildRoutes(t,n,s.children)}else this.deactivateChildRoutes(t,n,r);else i&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(t,n){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){let r=n.getContext(t.value.outlet),o=r&&t.value.component?r.children:n,i=Vo(t);for(let s of Object.values(i))this.deactivateRouteAndItsChildren(s,o);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:s,route:t,contexts:a})}}deactivateRouteAndOutlet(t,n){let r=n.getContext(t.value.outlet),o=r&&t.value.component?r.children:n,i=Vo(t);for(let s of Object.values(i))this.deactivateRouteAndItsChildren(s,o);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(t,n,r){let o=Vo(n);t.children.forEach(i=>{this.activateRoutes(i,o[i.value.outlet],r),this.forwardEvent(new tu(i.value.snapshot))}),t.children.length&&this.forwardEvent(new Xl(t.value.snapshot))}activateRoutes(t,n,r){let o=t.value,i=n?n.value:null;if(yp(o),o===i)if(o.component){let s=r.getOrCreateContext(o.outlet);this.activateChildRoutes(t,n,s.children)}else this.activateChildRoutes(t,n,r);else if(o.component){let s=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){let a=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),yp(a.route.value),this.activateChildRoutes(t,null,s.children)}else s.attachRef=null,s.route=o,s.outlet&&s.outlet.activateWith(o,s.injector),this.activateChildRoutes(t,null,s.children)}else this.activateChildRoutes(t,null,r)}},su=class{path;route;constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},$o=class{component;route;constructor(t,n){this.component=t,this.route=n}};function Ub(e,t,n){let r=e._root,o=t?t._root:null;return hs(r,o,n,[r.value])}function Bb(e){let t=e.routeConfig?e.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:e,guards:t}}function Zo(e,t){let n=Symbol(),r=t.get(e,n);return r===n?typeof e=="function"&&!jc(e)?e:t.get(e):r}function hs(e,t,n,r,o={canDeactivateChecks:[],canActivateChecks:[]}){let i=Vo(t);return e.children.forEach(s=>{Vb(s,i[s.value.outlet],n,r.concat([s.value]),o),delete i[s.value.outlet]}),Object.entries(i).forEach(([s,a])=>ys(a,n.getContext(s),o)),o}function Vb(e,t,n,r,o={canDeactivateChecks:[],canActivateChecks:[]}){let i=e.value,s=t?t.value:null,a=n?n.getContext(e.value.outlet):null;if(s&&i.routeConfig===s.routeConfig){let l=Hb(s,i,i.routeConfig.runGuardsAndResolvers);l?o.canActivateChecks.push(new su(r)):(i.data=s.data,i._resolvedData=s._resolvedData),i.component?hs(e,t,a?a.children:null,r,o):hs(e,t,n,r,o),l&&a&&a.outlet&&a.outlet.isActivated&&o.canDeactivateChecks.push(new $o(a.outlet.component,s))}else s&&ys(t,a,o),o.canActivateChecks.push(new su(r)),i.component?hs(e,null,a?a.children:null,r,o):hs(e,null,n,r,o);return o}function Hb(e,t,n){if(typeof n=="function")return et(t._environmentInjector,()=>n(e,t));switch(n){case"pathParamsChange":return!to(e.url,t.url);case"pathParamsOrQueryParamsChange":return!to(e.url,t.url)||!Nn(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Dp(e,t)||!Nn(e.queryParams,t.queryParams);default:return!Dp(e,t)}}function ys(e,t,n){let r=Vo(e),o=e.value;Object.entries(r).forEach(([i,s])=>{o.component?t?ys(s,t.children.getContext(i),n):ys(s,null,n):ys(s,t,n)}),o.component?t&&t.outlet&&t.outlet.isActivated?n.canDeactivateChecks.push(new $o(t.outlet.component,o)):n.canDeactivateChecks.push(new $o(null,o)):n.canDeactivateChecks.push(new $o(null,o))}function bs(e){return typeof e=="function"}function $b(e){return typeof e=="boolean"}function Gb(e){return e&&bs(e.canLoad)}function zb(e){return e&&bs(e.canActivate)}function qb(e){return e&&bs(e.canActivateChild)}function jb(e){return e&&bs(e.canDeactivate)}function Wb(e){return e&&bs(e.canMatch)}function d_(e){return e instanceof Pn||e?.name==="EmptyError"}var Bl=Symbol("INITIAL_VALUE");function Jo(){return Xt(e=>bc(e.map(t=>t.pipe(kn(1),Ac(Bl)))).pipe(Me(t=>{for(let n of t)if(n!==!0){if(n===Bl)return Bl;if(n===!1||Jb(n))return n}return!0}),Qt(t=>t!==Bl),kn(1)))}function Jb(e){return Go(e)||e instanceof Wo}function f_(e){return e.aborted?ve(void 0).pipe(kn(1)):new Ce(t=>{let n=()=>{t.next(),t.complete()};return e.addEventListener("abort",n),()=>e.removeEventListener("abort",n)})}function p_(e){return Ei(f_(e))}function Yb(e){return yt(t=>{let{targetSnapshot:n,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:i}}=t;return i.length===0&&o.length===0?ve(ke(X({},t),{guardsResult:!0})):Zb(i,n,r).pipe(yt(s=>s&&$b(s)?Kb(n,o,e):ve(s)),Me(s=>ke(X({},t),{guardsResult:s})))})}function Zb(e,t,n){return Qe(e).pipe(yt(r=>nA(r.component,r.route,n,t)),On(r=>r!==!0,!0))}function Kb(e,t,n){return Qe(t).pipe(yo(r=>mo(Xb(r.route.parent,n),Qb(r.route,n),tA(e,r.path),eA(e,r.route))),On(r=>r!==!0,!0))}function Qb(e,t){return e!==null&&t&&t(new eu(e)),ve(!0)}function Xb(e,t){return e!==null&&t&&t(new Ql(e)),ve(!0)}function eA(e,t){let n=t.routeConfig?t.routeConfig.canActivate:null;if(!n||n.length===0)return ve(!0);let r=n.map(o=>mi(()=>{let i=t._environmentInjector,s=Zo(o,i),a=zb(s)?s.canActivate(t,e):et(i,()=>s(t,e));return so(a).pipe(On())}));return ve(r).pipe(Jo())}function tA(e,t){let n=t[t.length-1],o=t.slice(0,t.length-1).reverse().map(i=>Bb(i)).filter(i=>i!==null).map(i=>mi(()=>{let s=i.guards.map(a=>{let l=i.node._environmentInjector,c=Zo(a,l),f=qb(c)?c.canActivateChild(n,e):et(l,()=>c(n,e));return so(f).pipe(On())});return ve(s).pipe(Jo())}));return ve(o).pipe(Jo())}function nA(e,t,n,r){let o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!o||o.length===0)return ve(!0);let i=o.map(s=>{let a=t._environmentInjector,l=Zo(s,a),c=jb(l)?l.canDeactivate(e,t,n,r):et(a,()=>l(e,t,n,r));return so(c).pipe(On())});return ve(i).pipe(Jo())}function rA(e,t,n,r,o){let i=t.canLoad;if(i===void 0||i.length===0)return ve(!0);let s=i.map(a=>{let l=Zo(a,e),c=Gb(l)?l.canLoad(t,n):et(e,()=>l(t,n)),f=so(c);return o?f.pipe(p_(o)):f});return ve(s).pipe(Jo(),h_(r))}function h_(e){return Ic(Cn(t=>{if(typeof t!="boolean")throw iu(e,t)}),Me(t=>t===!0))}function oA(e,t,n,r,o){let i=t.canMatch;if(!i||i.length===0)return ve(!0);let s=i.map(a=>{let l=Zo(a,e),c=Wb(l)?l.canMatch(t,n):et(e,()=>l(t,n));return so(c).pipe(p_(o))});return ve(s).pipe(Jo(),h_(r))}var Xn=class e extends Error{segmentGroup;constructor(t){super(),this.segmentGroup=t||null,Object.setPrototypeOf(this,e.prototype)}},Ts=class e extends Error{urlTree;constructor(t){super(),this.urlTree=t,Object.setPrototypeOf(this,e.prototype)}};function iA(e){throw new Z(4e3,!1)}function sA(e){throw u_(!1,gt.GuardRejected)}var Ap=class{urlSerializer;urlTree;constructor(t,n){this.urlSerializer=t,this.urlTree=n}async lineralizeSegments(t,n){let r=[],o=n.root;for(;;){if(r=r.concat(o.segments),o.numberOfChildren===0)return r;if(o.numberOfChildren>1||!o.children[fe])throw iA(`${t.redirectTo}`);o=o.children[fe]}}async applyRedirectCommands(t,n,r,o,i){let s=await aA(n,o,i);if(s instanceof hn)throw new Ts(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),t,r);if(s[0]==="/")throw new Ts(a);return a}applyRedirectCreateUrlTree(t,n,r,o){let i=this.createSegmentGroup(t,n.root,r,o);return new hn(i,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){let r={};return Object.entries(t).forEach(([o,i])=>{if(typeof i=="string"&&i[0]===":"){let a=i.substring(1);r[o]=n[a]}else r[o]=i}),r}createSegmentGroup(t,n,r,o){let i=this.createSegments(t,n.segments,r,o),s={};return Object.entries(n.children).forEach(([a,l])=>{s[a]=this.createSegmentGroup(t,l,r,o)}),new Se(i,s)}createSegments(t,n,r,o){return n.map(i=>i.path[0]===":"?this.findPosParam(t,i,o):this.findOrReturn(i,r))}findPosParam(t,n,r){let o=r[n.path.substring(1)];if(!o)throw new Z(4001,!1);return o}findOrReturn(t,n){let r=0;for(let o of n){if(o.path===t.path)return n.splice(r),o;r++}return t}};function aA(e,t,n){if(typeof e=="string")return Promise.resolve(e);let r=e,{queryParams:o,fragment:i,routeConfig:s,url:a,outlet:l,params:c,data:f,title:p,paramMap:h,queryParamMap:g}=t;return Gl(so(et(n,()=>r({params:c,data:f,queryParams:o,fragment:i,routeConfig:s,url:a,outlet:l,title:p,paramMap:h,queryParamMap:g}))))}function lA(e,t){return e.providers&&!e._injector&&(e._injector=Yi(e.providers,t,`Route: ${e.path}`)),e._injector??t}function pn(e){return e.outlet||fe}function uA(e,t){let n=e.filter(r=>pn(r)===t);return n.push(...e.filter(r=>pn(r)!==t)),n}var Mp={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function cA(e,t,n,r,o,i){let s=g_(e,t,n);return s.matched?(r=lA(t,r),oA(r,t,n,o,i).pipe(Me(a=>a===!0?s:X({},Mp)))):ve(s)}function g_(e,t,n){if(t.path==="")return t.pathMatch==="full"&&(e.hasChildren()||n.length>0)?X({},Mp):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let o=(t.matcher||HE)(n,e,t);if(!o)return X({},Mp);let i={};Object.entries(o.posParams??{}).forEach(([a,l])=>{i[a]=l.path});let s=o.consumed.length>0?X(X({},i),o.consumed[o.consumed.length-1].parameters):i;return{matched:!0,consumedSegments:o.consumed,remainingSegments:n.slice(o.consumed.length),parameters:s,positionalParamSegments:o.posParams??{}}}function LE(e,t,n,r){return n.length>0&&pA(e,n,r)?{segmentGroup:new Se(t,fA(r,new Se(n,e.children))),slicedSegments:[]}:n.length===0&&hA(e,n,r)?{segmentGroup:new Se(e.segments,dA(e,n,r,e.children)),slicedSegments:n}:{segmentGroup:new Se(e.segments,e.children),slicedSegments:n}}function dA(e,t,n,r){let o={};for(let i of n)if(uu(e,t,i)&&!r[pn(i)]){let s=new Se([],{});o[pn(i)]=s}return X(X({},r),o)}function fA(e,t){let n={};n[fe]=t;for(let r of e)if(r.path===""&&pn(r)!==fe){let o=new Se([],{});n[pn(r)]=o}return n}function pA(e,t,n){return n.some(r=>uu(e,t,r)&&pn(r)!==fe)}function hA(e,t,n){return n.some(r=>uu(e,t,r))}function uu(e,t,n){return(e.hasChildren()||t.length>0)&&n.pathMatch==="full"?!1:n.path===""}function gA(e,t,n){return t.length===0&&!e.children[n]}var Rp=class{};async function mA(e,t,n,r,o,i,s="emptyOnly",a){return new Np(e,t,n,r,o,s,i,a).recognize()}var yA=31,Np=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;abortSignal;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(t,n,r,o,i,s,a,l){this.injector=t,this.configLoader=n,this.rootComponentType=r,this.config=o,this.urlTree=i,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.abortSignal=l,this.applyRedirects=new Ap(this.urlSerializer,this.urlTree)}noMatchError(t){return new Z(4002,`'${t.segmentGroup}'`)}async recognize(){let t=LE(this.urlTree.root,[],[],this.config).segmentGroup,{children:n,rootSnapshot:r}=await this.match(t),o=new Ot(r,n),i=new Cs("",o),s=QE(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,i.url=this.urlSerializer.serialize(s),{state:i,tree:s}}async match(t){let n=new no([],Object.freeze({}),Object.freeze(X({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),fe,this.rootComponentType,null,{},this.injector);try{return{children:await this.processSegmentGroup(this.injector,this.config,t,fe,n),rootSnapshot:n}}catch(r){if(r instanceof Ts)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Xn?this.noMatchError(r):r}}async processSegmentGroup(t,n,r,o,i){if(r.segments.length===0&&r.hasChildren())return this.processChildren(t,n,r,i);let s=await this.processSegment(t,n,r,r.segments,o,!0,i);return s instanceof Ot?[s]:[]}async processChildren(t,n,r,o){let i=[];for(let l of Object.keys(r.children))l==="primary"?i.unshift(l):i.push(l);let s=[];for(let l of i){let c=r.children[l],f=uA(n,l),p=await this.processSegmentGroup(t,f,c,l,o);s.push(...p)}let a=m_(s);return vA(a),a}async processSegment(t,n,r,o,i,s,a){for(let l of n)try{return await this.processSegmentAgainstRoute(l._injector??t,n,l,r,o,i,s,a)}catch(c){if(c instanceof Xn||d_(c))continue;throw c}if(gA(r,o,i))return new Rp;throw new Xn(r)}async processSegmentAgainstRoute(t,n,r,o,i,s,a,l){if(pn(r)!==s&&(s===fe||!uu(o,i,r)))throw new Xn(o);if(r.redirectTo===void 0)return this.matchSegmentAgainstRoute(t,o,r,i,s,l);if(this.allowRedirects&&a)return this.expandSegmentAgainstRouteUsingRedirect(t,o,n,r,i,s,l);throw new Xn(o)}async expandSegmentAgainstRouteUsingRedirect(t,n,r,o,i,s,a){let{matched:l,parameters:c,consumedSegments:f,positionalParamSegments:p,remainingSegments:h}=g_(n,o,i);if(!l)throw new Xn(n);typeof o.redirectTo=="string"&&o.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>yA&&(this.allowRedirects=!1));let g=new no(i,c,Object.freeze(X({},this.urlTree.queryParams)),this.urlTree.fragment,UE(o),pn(o),o.component??o._loadedComponent??null,o,BE(o),t),m=ou(g,a,this.paramsInheritanceStrategy);if(g.params=Object.freeze(m.params),g.data=Object.freeze(m.data),this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let y=await this.applyRedirects.applyRedirectCommands(f,o.redirectTo,p,g,t),E=await this.applyRedirects.lineralizeSegments(o,y);return this.processSegment(t,r,n,E.concat(h),s,!1,a)}async matchSegmentAgainstRoute(t,n,r,o,i,s){if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let a=await Gl(cA(n,r,o,t,this.urlSerializer,this.abortSignal));if(r.path==="**"&&(n.children={}),!a?.matched)throw new Xn(n);t=r._injector??t;let{routes:l}=await this.getChildConfig(t,r,o),c=r._loadedInjector??t,{parameters:f,consumedSegments:p,remainingSegments:h}=a,g=new no(p,f,Object.freeze(X({},this.urlTree.queryParams)),this.urlTree.fragment,UE(r),pn(r),r.component??r._loadedComponent??null,r,BE(r),t),m=ou(g,s,this.paramsInheritanceStrategy);g.params=Object.freeze(m.params),g.data=Object.freeze(m.data);let{segmentGroup:y,slicedSegments:E}=LE(n,p,h,l);if(E.length===0&&y.hasChildren()){let D=await this.processChildren(c,l,y,g);return new Ot(g,D)}if(l.length===0&&E.length===0)return new Ot(g,[]);let C=pn(r)===i,T=await this.processSegment(c,l,y,E,C?fe:i,!0,g);return new Ot(g,T instanceof Ot?[T]:[])}async getChildConfig(t,n,r){if(n.children)return{routes:n.children,injector:t};if(n.loadChildren){if(n._loadedRoutes!==void 0){let i=n._loadedNgModuleFactory;return i&&!n._loadedInjector&&(n._loadedInjector=i.create(t).injector),{routes:n._loadedRoutes,injector:n._loadedInjector}}if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);if(await Gl(rA(t,n,r,this.urlSerializer,this.abortSignal))){let i=await this.configLoader.loadChildren(t,n);return n._loadedRoutes=i.routes,n._loadedInjector=i.injector,n._loadedNgModuleFactory=i.factory,i}throw sA(n)}return{routes:[],injector:t}}};function vA(e){e.sort((t,n)=>t.value.outlet===fe?-1:n.value.outlet===fe?1:t.value.outlet.localeCompare(n.value.outlet))}function EA(e){let t=e.value.routeConfig;return t&&t.path===""}function m_(e){let t=[],n=new Set;for(let r of e){if(!EA(r)){t.push(r);continue}let o=t.find(i=>r.value.routeConfig===i.value.routeConfig);o!==void 0?(o.children.push(...r.children),n.add(o)):t.push(r)}for(let r of n){let o=m_(r.children);t.push(new Ot(r.value,o))}return t.filter(r=>!n.has(r))}function UE(e){return e.data||{}}function BE(e){return e.resolve||{}}function _A(e,t,n,r,o,i,s){return yt(async a=>{let{state:l,tree:c}=await mA(e,t,n,r,a.extractedUrl,o,i,s);return ke(X({},a),{targetSnapshot:l,urlAfterRedirects:c})})}function CA(e){return yt(t=>{let{targetSnapshot:n,guards:{canActivateChecks:r}}=t;if(!r.length)return ve(t);let o=new Set(r.map(a=>a.route)),i=new Set;for(let a of o)if(!i.has(a))for(let l of y_(a))i.add(l);let s=0;return Qe(i).pipe(yo(a=>o.has(a)?IA(a,n,e):(a.data=ou(a,a.parent,e).resolve,ve(void 0))),Cn(()=>s++),ca(1),yt(a=>s===i.size?ve(t):it))})}function y_(e){let t=e.children.map(n=>y_(n)).flat();return[e,...t]}function IA(e,t,n){let r=e.routeConfig,o=e._resolve;return r?.title!==void 0&&!s_(r)&&(o[ws]=r.title),mi(()=>(e.data=ou(e,e.parent,n).resolve,TA(o,e,t).pipe(Me(i=>(e._resolvedData=i,e.data=X(X({},e.data),i),null)))))}function TA(e,t,n){let r=Ep(e);if(r.length===0)return ve({});let o={};return Qe(r).pipe(yt(i=>wA(e[i],t,n).pipe(On(),Cn(s=>{if(s instanceof Wo)throw iu(new mr,s);o[i]=s}))),ca(1),Me(()=>o),yi(i=>d_(i)?it:Dc(i)))}function wA(e,t,n){let r=t._environmentInjector,o=Zo(e,r),i=o.resolve?o.resolve(t,n):et(r,()=>o(t,n));return so(i)}function VE(e){return Xt(t=>{let n=e(t);return n?Qe(n).pipe(Me(()=>t)):ve(t)})}var Op=(()=>{class e{buildTitle(n){let r,o=n.root;for(;o!==void 0;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(i=>i.outlet===fe);return r}getResolvedTitleForRoute(n){return n.data[ws]}static \u0275fac=function(r){return new(r||e)};static \u0275prov=te({token:e,factory:()=>z(v_),providedIn:"root"})}return e})(),v_=(()=>{class e extends Op{title;constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||e)(ue(NE))};static \u0275prov=te({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),As=new re("",{factory:()=>({})}),Ms=new re(""),E_=(()=>{class e{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=z(Jf);async loadComponent(n,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Promise.resolve(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let o=(async()=>{try{let i=await GE(et(n,()=>r.loadComponent())),s=await I_(C_(i));return this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s,s}finally{this.componentLoaders.delete(r)}})();return this.componentLoaders.set(r,o),o}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Promise.resolve({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=(async()=>{try{let i=await __(r,this.compiler,n,this.onLoadEndListener);return r._loadedRoutes=i.routes,r._loadedInjector=i.injector,r._loadedNgModuleFactory=i.factory,i}finally{this.childrenLoaders.delete(r)}})();return this.childrenLoaders.set(r,o),o}static \u0275fac=function(r){return new(r||e)};static \u0275prov=te({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();async function __(e,t,n,r){let o=await GE(et(n,()=>e.loadChildren())),i=await I_(C_(o)),s;i instanceof hl||Array.isArray(i)?s=i:s=await t.compileModuleAsync(i),r&&r(e);let a,l,c=!1,f;return Array.isArray(s)?(l=s,c=!0):(a=s.create(n).injector,f=s,l=a.get(Ms,[],{optional:!0,self:!0}).flat()),{routes:l.map(kp),injector:a,factory:f}}function DA(e){return e&&typeof e=="object"&&"default"in e}function C_(e){return DA(e)?e.default:e}async function I_(e){return e}var cu=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=te({token:e,factory:()=>z(SA),providedIn:"root"})}return e})(),SA=(()=>{class e{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||e)};static \u0275prov=te({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),T_=new re("");var bA=()=>{},w_=new re(""),D_=(()=>{class e{currentNavigation=Le(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=Le(null);events=new ct;transitionAbortWithErrorSubject=new ct;configLoader=z(E_);environmentInjector=z(Ue);destroyRef=z(sn);urlSerializer=z(Ds);rootContexts=z(Yo);location=z(Lo);inputBindingEnabled=z(lu,{optional:!0})!==null;titleStrategy=z(Op);options=z(As,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=z(cu);createViewTransition=z(T_,{optional:!0});navigationErrorHandler=z(w_,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>ve(void 0);rootComponentType=null;destroyed=!1;constructor(){let n=o=>this.events.next(new Zl(o)),r=o=>this.events.next(new Kl(o));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;an(()=>{this.transitions?.next(ke(X({},n),{extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))})}setupNavigations(n){return this.transitions=new ot(null),this.transitions.pipe(Qt(r=>r!==null),Xt(r=>{let o=!1,i=new AbortController,s=()=>!o&&this.currentTransition?.id===r.id;return ve(r).pipe(Xt(a=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",gt.SupersededByNewNavigation),it;this.currentTransition=r;let l=this.lastSuccessfulNavigation();this.currentNavigation.set({id:a.id,initialUrl:a.rawUrl,extractedUrl:a.extractedUrl,targetBrowserUrl:typeof a.extras.browserUrl=="string"?this.urlSerializer.parse(a.extras.browserUrl):a.extras.browserUrl,trigger:a.source,extras:a.extras,previousNavigation:l?ke(X({},l),{previousNavigation:null}):null,abort:()=>i.abort()});let c=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),f=a.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!c&&f!=="reload")return this.events.next(new tr(a.id,this.urlSerializer.serialize(a.rawUrl),"",Es.IgnoredSameUrlNavigation)),a.resolve(!1),it;if(this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return ve(a).pipe(Xt(p=>(this.events.next(new oo(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),p.id!==this.navigationId?it:Promise.resolve(p))),_A(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy,i.signal),Cn(p=>{r.targetSnapshot=p.targetSnapshot,r.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation.update(g=>(g.finalUrl=p.urlAfterRedirects,g));let h=new zo(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(h)}));if(c&&this.urlHandlingStrategy.shouldProcessUrl(a.currentRawUrl)){let{id:p,extractedUrl:h,source:g,restoredState:m,extras:y}=a,E=new oo(p,this.urlSerializer.serialize(h),g,m);this.events.next(E);let C=o_(this.rootComponentType,this.environmentInjector).snapshot;return this.currentTransition=r=ke(X({},a),{targetSnapshot:C,urlAfterRedirects:h,extras:ke(X({},y),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(T=>(T.finalUrl=h,T)),ve(r)}else return this.events.next(new tr(a.id,this.urlSerializer.serialize(a.extractedUrl),"",Es.IgnoredByUrlHandlingStrategy)),a.resolve(!1),it}),Me(a=>{let l=new jl(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);return this.events.next(l),this.currentTransition=r=ke(X({},a),{guards:Ub(a.targetSnapshot,a.currentSnapshot,this.rootContexts)}),r}),Yb(a=>this.events.next(a)),Xt(a=>{if(r.guardsResult=a.guardsResult,a.guardsResult&&typeof a.guardsResult!="boolean")throw iu(this.urlSerializer,a.guardsResult);let l=new Wl(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);if(this.events.next(l),!s())return it;if(!a.guardsResult)return this.cancelNavigationTransition(a,"",gt.GuardRejected),it;if(a.guards.canActivateChecks.length===0)return ve(a);let c=new Jl(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);if(this.events.next(c),!s())return it;let f=!1;return ve(a).pipe(CA(this.paramsInheritanceStrategy),Cn({next:()=>{f=!0;let p=new Yl(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(p)},complete:()=>{f||this.cancelNavigationTransition(a,"",gt.NoDataFromResolver)}}))}),VE(a=>{let l=f=>{let p=[];if(f.routeConfig?._loadedComponent)f.component=f.routeConfig?._loadedComponent;else if(f.routeConfig?.loadComponent){let h=f._environmentInjector;p.push(this.configLoader.loadComponent(h,f.routeConfig).then(g=>{f.component=g}))}for(let h of f.children)p.push(...l(h));return p},c=l(a.targetSnapshot.root);return c.length===0?ve(a):Qe(Promise.all(c).then(()=>a))}),VE(()=>this.afterPreactivation()),Xt(()=>{let{currentSnapshot:a,targetSnapshot:l}=r,c=this.createViewTransition?.(this.environmentInjector,a.root,l.root);return c?Qe(c).pipe(Me(()=>r)):ve(r)}),kn(1),Me(a=>{let l=kb(n.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);this.currentTransition=r=a=ke(X({},a),{targetRouterState:l}),this.currentNavigation.update(c=>(c.targetRouterState=l,c)),this.events.next(new qo),s()&&(new bp(n.routeReuseStrategy,r.targetRouterState,r.currentRouterState,c=>this.events.next(c),this.inputBindingEnabled).activate(this.rootContexts),s()&&(o=!0,this.currentNavigation.update(c=>(c.abort=bA,c)),this.lastSuccessfulNavigation.set(an(this.currentNavigation)),this.events.next(new er(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects))),this.titleStrategy?.updateTitle(a.targetRouterState.snapshot),a.resolve(!0)))}),Ei(f_(i.signal).pipe(Qt(()=>!o&&!r.targetRouterState),Cn(()=>{this.cancelNavigationTransition(r,i.signal.reason+"",gt.Aborted)}))),Cn({complete:()=>{o=!0}}),Ei(this.transitionAbortWithErrorSubject.pipe(Cn(a=>{throw a}))),vi(()=>{i.abort(),o||this.cancelNavigationTransition(r,"",gt.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),yi(a=>{if(o=!0,this.destroyed)return r.resolve(!1),it;if(c_(a))this.events.next(new Wt(r.id,this.urlSerializer.serialize(r.extractedUrl),a.message,a.cancellationCode)),Lb(a)?this.events.next(new jo(a.url,a.navigationBehaviorOptions)):r.resolve(!1);else{let l=new io(r.id,this.urlSerializer.serialize(r.extractedUrl),a,r.targetSnapshot??void 0);try{let c=et(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(c instanceof Wo){let{message:f,cancellationCode:p}=iu(this.urlSerializer,c);this.events.next(new Wt(r.id,this.urlSerializer.serialize(r.extractedUrl),f,p)),this.events.next(new jo(c.redirectTo,c.navigationBehaviorOptions))}else throw this.events.next(l),a}catch(c){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(c)}}return it}))}))}cancelNavigationTransition(n,r,o){let i=new Wt(n.id,this.urlSerializer.serialize(n.extractedUrl),r,o);this.events.next(i),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=an(this.currentNavigation),o=r?.targetBrowserUrl??r?.extractedUrl;return n.toString()!==o?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||e)};static \u0275prov=te({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function AA(e){return e!==ms}var S_=new re("");var b_=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=te({token:e,factory:()=>z(MA),providedIn:"root"})}return e})(),au=class{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}shouldDestroyInjector(t){return!0}},MA=(()=>{class e extends au{static \u0275fac=(()=>{let n;return function(o){return(n||(n=rl(e)))(o||e)}})();static \u0275prov=te({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Fp=(()=>{class e{urlSerializer=z(Ds);options=z(As,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=z(Lo);urlHandlingStrategy=z(cu);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new hn;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:n,initialUrl:r,targetBrowserUrl:o}){let i=n!==void 0?this.urlHandlingStrategy.merge(n,r):r,s=o??i;return s instanceof hn?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:n,finalUrl:r,initialUrl:o}){r&&n?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,o),this.routerState=n):this.rawUrlTree=o}routerState=o_(null,z(Ue));getRouterState(){return this.routerState}_stateMemento=this.createStateMemento();get stateMemento(){return this._stateMemento}updateStateMemento(){this._stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}restoredState(){return this.location.getState()}static \u0275fac=function(r){return new(r||e)};static \u0275prov=te({token:e,factory:()=>z(RA),providedIn:"root"})}return e})(),RA=(()=>{class e extends Fp{currentPageId=0;lastSuccessfulId=-1;get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{n(r.url,r.state,"popstate")})})}handleRouterEvent(n,r){n instanceof oo?this.updateStateMemento():n instanceof tr?this.commitTransition(r):n instanceof zo?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof qo?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof Wt&&!r_(n)?this.restoreHistory(r):n instanceof io?this.restoreHistory(r,!0):n instanceof er&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,{extras:r,id:o}){let{replaceUrl:i,state:s}=r;if(this.location.isCurrentPathEqualTo(n)||i){let a=this.browserPageId,l=X(X({},s),this.generateNgRouterState(o,a));this.location.replaceState(n,"",l)}else{let a=X(X({},s),this.generateNgRouterState(o,this.browserPageId+1));this.location.go(n,"",a)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,i=this.currentPageId-o;i!==0?this.location.historyGo(i):this.getCurrentUrlTree()===n.finalUrl&&i===0&&(this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}resetInternalState({finalUrl:n}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(o){return(n||(n=rl(e)))(o||e)}})();static \u0275prov=te({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Lp(e,t){e.events.pipe(Qt(n=>n instanceof er||n instanceof Wt||n instanceof io||n instanceof tr),Me(n=>n instanceof er||n instanceof tr?0:(n instanceof Wt?n.code===gt.Redirect||n.code===gt.SupersededByNewNavigation:!1)?2:1),Qt(n=>n!==2),kn(1)).subscribe(()=>{t()})}var A_={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},M_={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},du=(()=>{class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=z(Uf);stateManager=z(Fp);options=z(As,{optional:!0})||{};pendingTasks=z(qn);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=z(D_);urlSerializer=z(Ds);location=z(Lo);urlHandlingStrategy=z(cu);injector=z(Ue);_events=new ct;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=z(b_);injectorCleanup=z(S_,{optional:!0});onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=z(Ms,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!z(lu,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:n=>{}}),this.subscribeToNavigationEvents()}eventsSubscription=new rt;subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let o=this.navigationTransitions.currentTransition,i=an(this.navigationTransitions.currentNavigation);if(o!==null&&i!==null){if(this.stateManager.handleRouterEvent(r,i),r instanceof Wt&&r.code!==gt.Redirect&&r.code!==gt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof er)this.navigated=!0,this.injectorCleanup?.(this.routeReuseStrategy,this.routerState,this.config);else if(r instanceof jo){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,o.currentRawUrl),l=X({scroll:o.extras.scroll,browserUrl:o.extras.browserUrl,info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:o.extras.replaceUrl||this.urlUpdateStrategy==="eager"||AA(o.source)},s);this.scheduleNavigation(a,ms,null,l,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}xb(r)&&this._events.next(r)}catch(o){this.navigationTransitions.transitionAbortWithErrorSubject.next(o)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ms,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r,o)=>{this.navigateToSyncWithBrowser(n,o,r)})}navigateToSyncWithBrowser(n,r,o){let i={replaceUrl:!0},s=o?.navigationId?o:null;if(o){let l=X({},o);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(i.state=l)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,s,i).catch(l=>{this.disposed||this.injector.get(Gt)(l)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return an(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(kp),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription?.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0,this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:o,queryParams:i,fragment:s,queryParamsHandling:a,preserveFragment:l}=r,c=l?this.currentUrlTree.fragment:s,f=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":f=X(X({},this.currentUrlTree.queryParams),i);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=i||null}f!==null&&(f=this.removeEmptyProps(f));let p;try{let h=o?o.snapshot:this.routerState.snapshot.root;p=XE(h)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),p=this.currentUrlTree.root}return e_(p,n,f,c??null,this.urlSerializer)}navigateByUrl(n,r={skipLocationChange:!1}){let o=Go(n)?n:this.parseUrl(n),i=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(i,ms,null,r)}navigate(n,r={skipLocationChange:!1}){return NA(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.console.warn(Un(4018,!1)),this.urlSerializer.parse("/")}}isActive(n,r){let o;if(r===!0?o=X({},A_):r===!1?o=X({},M_):o=r,Go(n))return xE(this.currentUrlTree,n,o);let i=this.parseUrl(n);return xE(this.currentUrlTree,i,o)}removeEmptyProps(n){return Object.entries(n).reduce((r,[o,i])=>(i!=null&&(r[o]=i),r),{})}scheduleNavigation(n,r,o,i,s){if(this.disposed)return Promise.resolve(!1);let a,l,c;s?(a=s.resolve,l=s.reject,c=s.promise):c=new Promise((p,h)=>{a=p,l=h});let f=this.pendingTasks.add();return Lp(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:i,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||e)};static \u0275prov=te({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function NA(e){for(let t=0;t<e.length;t++)if(e[t]==null)throw new Z(4008,!1)}var kA=new re("");function Up(e,...t){return kr([{provide:Ms,multi:!0,useValue:e},[],{provide:yr,useFactory:OA},{provide:ml,multi:!0,useFactory:FA},t.map(n=>n.\u0275providers)])}function OA(){return z(du).routerState.root}function FA(){let e=z(en);return t=>{let n=e.get(ko);if(t!==n.components[0])return;let r=e.get(du),o=e.get(LA);e.get(UA)===1&&r.initialNavigation(),e.get(BA,null,{optional:!0})?.setUpPreloading(),e.get(kA,null,{optional:!0})?.init(),r.resetRootComponentType(n.componentTypes[0]),o.closed||(o.next(),o.complete(),o.unsubscribe())}}var LA=new re("",{factory:()=>new ct}),UA=new re("",{factory:()=>1});var BA=new re("");var R_=[];var N_={providers:[Pd(),Up(R_)]};var fu=class e{total=dn.required();completed=dn.required();current=dn.required();progressPercentage=Fo(()=>{let t=this.total();return t===0?0:this.completed()/t*100});static \u0275fac=function(n){return new(n||e)};static \u0275cmp=cn({type:e,selectors:[["app-queue-progress"]],inputs:{total:[1,"total"],completed:[1,"completed"],current:[1,"current"]},decls:10,vars:6,consts:[[1,"bg-slate-800/50","rounded-lg","shadow-lg","p-4","mb-8","border","border-slate-700","animate-fade-in-down"],[1,"flex","justify-between","items-center","mb-2","text-sm","text-slate-300"],[1,"font-mono"],[1,"w-full","bg-slate-700","rounded-full","h-2.5"],[1,"bg-indigo-500","h-2.5","rounded-full","transition-all","duration-300","ease-in-out"]],template:function(n,r){n&1&&(se(0,"div",0)(1,"div",1)(2,"span"),De(3,"Processing Prompt: "),se(4,"strong"),De(5),ae()(),se(6,"span",2),De(7),ae()(),se(8,"div",3),bt(9,"div",4),ae()()),n&2&&(ye(5),Qi("",r.current()," of ",r.total()),ye(2),Qi("",r.completed()," / ",r.total()," Completed"),ye(2),El("width",r.progressPercentage(),"%"))},dependencies:[Mn],styles:["@keyframes _ngcontent-%COMP%_fade-in-down{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.animate-fade-in-down[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fade-in-down .3s ease-out forwards}"]})};var O_=rg(P_()),F_=rg(k_());var HA=(e,t)=>t.prompt;function $A(e,t){e&1&&(Gn(),se(0,"svg",6),bt(1,"circle",7)(2,"path",8),ae(),zn(),se(3,"span"),De(4,"Zipping..."),ae())}function GA(e,t){e&1&&(Gn(),se(0,"svg",9),bt(1,"path",10),ae(),zn(),se(2,"span"),De(3,"Download All as ZIP"),ae())}function zA(e,t){if(e&1){let n=Qr();se(0,"button",5),pt("click",function(){dt(n);let o=We(2);return ft(o.downloadAllAsZip())}),Et(1,$A,5,0)(2,GA,4,0),ae()}if(e&2){let n=We(2);at("disabled",n.isZipping()),ye(),_t(n.isZipping()?1:2)}}function qA(e,t){e&1&&(se(0,"div",12),bt(1,"div",18),ae())}function jA(e,t){if(e&1&&bt(0,"img",19),e&2){let n=We(3).$implicit;at("alt",qf(n.prompt))("src",n.images[0],al)}}function WA(e,t){if(e&1&&bt(0,"img",21),e&2){let n=t.$implicit,r=t.$index,o=We(4).$implicit;at("alt",jf("",o.prompt," - Image ",r+1))("src",n,al)}}function JA(e,t){if(e&1&&(se(0,"div",20),Wn(1,WA,1,4,"img",21,yl),ae()),e&2){let n=We(3).$implicit;ye(),Jn(n.images)}}function YA(e,t){if(e&1&&Et(0,jA,1,3,"img",19)(1,JA,3,0,"div",20),e&2){let n=We(2).$implicit;_t(n.images.length===1?0:1)}}function ZA(e,t){if(e&1&&Et(0,YA,2,1),e&2){let n=We().$implicit;_t(n.images&&n.images.length>0?0:-1)}}function KA(e,t){e&1&&(se(0,"div",13),Gn(),se(1,"svg",22),bt(2,"path",23),ae(),zn(),se(3,"span",24),De(4,"Error"),ae()())}function QA(e,t){if(e&1&&(se(0,"p",16),De(1),ae()),e&2){let n=We().$implicit;ye(),An(n.error)}}function XA(e,t){if(e&1){let n=Qr();se(0,"button",27),pt("click",function(){let o=dt(n),i=o.$implicit,s=o.$index,a=We(2).$implicit,l=We(2);return ft(l.downloadImage(i,a.prompt,s))}),Gn(),se(1,"svg",28),bt(2,"path",10),ae(),zn(),se(3,"span"),De(4),ae()()}if(e&2){let n=t.$index,r=We(2).$implicit;ye(4),An(r.images.length>1?" #"+(n+1):"")}}function eM(e,t){if(e&1&&(se(0,"div",25),Wn(1,XA,5,1,"button",26,yl),ae()),e&2){let n=We().$implicit;Ki("grid-cols-1",n.images.length===1)("grid-cols-2",n.images.length>1),ye(),Jn(n.images)}}function tM(e,t){if(e&1&&(se(0,"div",4)(1,"div",11),Et(2,qA,2,0,"div",12)(3,ZA,1,1)(4,KA,5,0,"div",13),ae(),se(5,"div",14)(6,"p",15),De(7),ae(),Et(8,QA,2,1,"p",16),Et(9,eM,3,4,"div",17),ae()()),e&2){let n,r=t.$implicit,o=We(2);ye(),Ki("aspect-square",o.aspectRatio()==="1:1")("aspect-video",o.aspectRatio()==="16:9")("aspect-[9/16]",o.aspectRatio()==="9:16")("aspect-[4/3]",o.aspectRatio()==="4:3")("aspect-[3/4]",o.aspectRatio()==="3:4"),ye(),_t((n=r.status)==="loading"?2:n==="success"?3:n==="error"?4:-1),ye(5),An(r.prompt),ye(),_t(r.status==="error"&&r.error?8:-1),ye(),_t(r.status==="success"&&r.images?9:-1)}}function nM(e,t){if(e&1&&(se(0,"section")(1,"div",0)(2,"h2",1),De(3,"Results"),ae(),Et(4,zA,3,2,"button",2),ae(),se(5,"div",3),Wn(6,tM,10,14,"div",4,HA),ae()()),e&2){let n=We();ye(4),_t(n.hasSuccessfulImages()?4:-1),ye(2),Jn(n.results())}}var pu=class e{constructor(t){this.datePipe=t}results=dn.required();aspectRatio=dn.required();isZipping=Le(!1);hasSuccessfulImages=Fo(()=>this.results().some(t=>t.status==="success"&&t.images&&t.images.length>0));formatDate(t=new Date){return this.datePipe.transform(t,"dd-MM-yyyy-HH-mm")}downloadImage(t,n,r){if(!t)return;let i=`${n.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"_").substring(0,50)||"generated_image"}_${r+1}.jpeg`,s=document.createElement("a");s.href=t,s.download=i,document.body.appendChild(s),s.click(),document.body.removeChild(s)}async downloadAllAsZip(){if(!this.isZipping()){this.isZipping.set(!0);try{let t=new O_.default,n=this.results().filter(o=>o.status==="success"&&o.images&&o.images.length>0);for(let o of n)if(o.images)for(let i=0;i<o.images.length;i++){let a=o.images[i].split(",")[1];if(!a)continue;let c=`${o.prompt.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"_").substring(0,50)||"generated_image"}_${i+1}.jpeg`;t.file(c,a,{base64:!0})}let r=await t.generateAsync({type:"blob"});(0,F_.default)(r,`generated_images_${this.formatDate()}.zip`)}catch(t){console.error("Failed to create zip file:",t)}finally{this.isZipping.set(!1)}}}static \u0275fac=function(n){return new(n||e)(qt(ss))};static \u0275cmp=cn({type:e,selectors:[["app-results-grid"]],inputs:{results:[1,"results"],aspectRatio:[1,"aspectRatio"]},features:[Wf([ss])],decls:1,vars:1,consts:[[1,"flex","items-center","justify-between","mb-6"],[1,"text-2xl","font-bold","text-slate-200"],[1,"cursor-pointer","flex","items-center","justify-center","bg-teal-600","text-white","font-semibold","py-2","px-4","rounded-md","hover:bg-teal-500","disabled:bg-slate-600","disabled:cursor-not-allowed","transition-colors","duration-200",3,"disabled"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","xl:grid-cols-4","gap-6"],[1,"bg-slate-800","rounded-lg","overflow-hidden","shadow-lg","border","border-slate-700","flex","flex-col","animate-fade-in"],[1,"cursor-pointer","flex","items-center","justify-center","bg-teal-600","text-white","font-semibold","py-2","px-4","rounded-md","hover:bg-teal-500","disabled:bg-slate-600","disabled:cursor-not-allowed","transition-colors","duration-200",3,"click","disabled"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","-ml-1","mr-3","h-5","w-5","text-white"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-5","w-5","mr-2"],["fill-rule","evenodd","d","M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z","clip-rule","evenodd"],[1,"w-full","bg-slate-900","flex","items-center","justify-center"],[1,"w-full","h-full","flex","items-center","justify-center","p-4"],[1,"p-4","text-center","text-red-400","flex","flex-col","items-center","justify-center"],[1,"p-4","flex-grow","flex","flex-col"],[1,"text-sm","text-slate-300","flex-grow"],[1,"mt-2","text-xs","text-red-400","bg-red-900/30","p-2","rounded-md"],[1,"mt-3","grid","gap-2",3,"grid-cols-1","grid-cols-2"],[1,"animate-pulse","w-full","h-full","bg-slate-700","rounded-md"],[1,"w-full","h-full","object-cover",3,"src","alt"],[1,"grid","grid-cols-2","gap-1","w-full","h-full","p-1"],[1,"w-full","h-full","object-cover","rounded-md",3,"src","alt"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-10","w-10","mb-2"],["fill-rule","evenodd","d","M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z","clip-rule","evenodd"],[1,"font-semibold"],[1,"mt-3","grid","gap-2"],[1,"w-full","flex","items-center","justify-center","bg-green-600/50","text-green-200","text-sm","font-semibold","py-2","px-3","rounded-md","hover:bg-green-600/70","transition-colors","duration-200","cursor-pointer"],[1,"w-full","flex","items-center","justify-center","bg-green-600/50","text-green-200","text-sm","font-semibold","py-2","px-3","rounded-md","hover:bg-green-600/70","transition-colors","duration-200","cursor-pointer",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-4","w-4","mr-2"]],template:function(n,r){n&1&&Et(0,nM,8,1,"section"),n&2&&_t(r.results().length>0?0:-1)},dependencies:[Mn],styles:["@keyframes _ngcontent-%COMP%_fade-in{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.animate-fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fade-in .5s ease-out forwards}"]})};var rM,oM;function iM(){return{geminiUrl:rM,vertexUrl:oM}}function sM(e,t,n,r){var o,i;if(!e?.baseUrl){let s=iM();return t?(o=s.vertexUrl)!==null&&o!==void 0?o:n:(i=s.geminiUrl)!==null&&i!==void 0?i:r}return e.baseUrl}var yn=class{};function Y(e,t){let n=/\{([^}]+)\}/g;return e.replace(n,(r,o)=>{if(Object.prototype.hasOwnProperty.call(t,o)){let i=t[o];return i!=null?String(i):""}else throw new Error(`Key '${o}' not found in valueMap.`)})}function d(e,t,n){for(let i=0;i<t.length-1;i++){let s=t[i];if(s.endsWith("[]")){let a=s.slice(0,-2);if(!(a in e))if(Array.isArray(n))e[a]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${s}`);if(Array.isArray(e[a])){let l=e[a];if(Array.isArray(n))for(let c=0;c<l.length;c++){let f=l[c];d(f,t.slice(i+1),n[c])}else for(let c of l)d(c,t.slice(i+1),n)}return}else if(s.endsWith("[0]")){let a=s.slice(0,-3);a in e||(e[a]=[{}]);let l=e[a];d(l[0],t.slice(i+1),n);return}(!e[s]||typeof e[s]!="object")&&(e[s]={}),e=e[s]}let r=t[t.length-1],o=e[r];if(o!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===o)return;if(typeof o=="object"&&typeof n=="object"&&o!==null&&n!==null)Object.assign(o,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(e,n):e[r]=n}function u(e,t,n=void 0){try{if(t.length===1&&t[0]==="_self")return e;for(let r=0;r<t.length;r++){if(typeof e!="object"||e===null)return n;let o=t[r];if(o.endsWith("[]")){let i=o.slice(0,-2);if(i in e){let s=e[i];return Array.isArray(s)?s.map(a=>u(a,t.slice(r+1),n)):n}else return n}else e=e[o]}return e}catch(r){if(r instanceof TypeError)return n;throw r}}function aM(e,t){for(let[n,r]of Object.entries(t)){let o=n.split("."),i=r.split("."),s=new Set,a=-1;for(let l=0;l<o.length;l++)if(o[l]==="*"){a=l;break}if(a!==-1&&i.length>a)for(let l=a;l<i.length;l++){let c=i[l];c!=="*"&&!c.endsWith("[]")&&!c.endsWith("[0]")&&s.add(c)}qp(e,o,i,0,s)}}function qp(e,t,n,r,o){if(r>=t.length||typeof e!="object"||e===null)return;let i=t[r];if(i.endsWith("[]")){let s=i.slice(0,-2),a=e;if(s in a&&Array.isArray(a[s]))for(let l of a[s])qp(l,t,n,r+1,o)}else if(i==="*"){if(typeof e=="object"&&e!==null&&!Array.isArray(e)){let s=e,a=Object.keys(s).filter(c=>!c.startsWith("_")&&!o.has(c)),l={};for(let c of a)l[c]=s[c];for(let[c,f]of Object.entries(l)){let p=[];for(let h of n.slice(r))h==="*"?p.push(c):p.push(h);d(s,p,f)}for(let c of a)delete s[c]}}else{let s=e;i in s&&qp(s[i],t,n,r+1,o)}}function zh(e){if(typeof e!="string")throw new Error("fromImageBytes must be a string");return e}function lM(e){let t={},n=u(e,["operationName"]);n!=null&&d(t,["operationName"],n);let r=u(e,["resourceName"]);return r!=null&&d(t,["_url","resourceName"],r),t}function uM(e){let t={},n=u(e,["name"]);n!=null&&d(t,["name"],n);let r=u(e,["metadata"]);r!=null&&d(t,["metadata"],r);let o=u(e,["done"]);o!=null&&d(t,["done"],o);let i=u(e,["error"]);i!=null&&d(t,["error"],i);let s=u(e,["response","generateVideoResponse"]);return s!=null&&d(t,["response"],dM(s)),t}function cM(e){let t={},n=u(e,["name"]);n!=null&&d(t,["name"],n);let r=u(e,["metadata"]);r!=null&&d(t,["metadata"],r);let o=u(e,["done"]);o!=null&&d(t,["done"],o);let i=u(e,["error"]);i!=null&&d(t,["error"],i);let s=u(e,["response"]);return s!=null&&d(t,["response"],fM(s)),t}function dM(e){let t={},n=u(e,["generatedSamples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>pM(s))),d(t,["generatedVideos"],i)}let r=u(e,["raiMediaFilteredCount"]);r!=null&&d(t,["raiMediaFilteredCount"],r);let o=u(e,["raiMediaFilteredReasons"]);return o!=null&&d(t,["raiMediaFilteredReasons"],o),t}function fM(e){let t={},n=u(e,["videos"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>hM(s))),d(t,["generatedVideos"],i)}let r=u(e,["raiMediaFilteredCount"]);r!=null&&d(t,["raiMediaFilteredCount"],r);let o=u(e,["raiMediaFilteredReasons"]);return o!=null&&d(t,["raiMediaFilteredReasons"],o),t}function pM(e){let t={},n=u(e,["video"]);return n!=null&&d(t,["video"],_M(n)),t}function hM(e){let t={},n=u(e,["_self"]);return n!=null&&d(t,["video"],CM(n)),t}function gM(e){let t={},n=u(e,["operationName"]);return n!=null&&d(t,["_url","operationName"],n),t}function mM(e){let t={},n=u(e,["operationName"]);return n!=null&&d(t,["_url","operationName"],n),t}function yM(e){let t={},n=u(e,["name"]);n!=null&&d(t,["name"],n);let r=u(e,["metadata"]);r!=null&&d(t,["metadata"],r);let o=u(e,["done"]);o!=null&&d(t,["done"],o);let i=u(e,["error"]);i!=null&&d(t,["error"],i);let s=u(e,["response"]);return s!=null&&d(t,["response"],vM(s)),t}function vM(e){let t={},n=u(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);let r=u(e,["parent"]);r!=null&&d(t,["parent"],r);let o=u(e,["documentName"]);return o!=null&&d(t,["documentName"],o),t}function aC(e){let t={},n=u(e,["name"]);n!=null&&d(t,["name"],n);let r=u(e,["metadata"]);r!=null&&d(t,["metadata"],r);let o=u(e,["done"]);o!=null&&d(t,["done"],o);let i=u(e,["error"]);i!=null&&d(t,["error"],i);let s=u(e,["response"]);return s!=null&&d(t,["response"],EM(s)),t}function EM(e){let t={},n=u(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);let r=u(e,["parent"]);r!=null&&d(t,["parent"],r);let o=u(e,["documentName"]);return o!=null&&d(t,["documentName"],o),t}function _M(e){let t={},n=u(e,["uri"]);n!=null&&d(t,["uri"],n);let r=u(e,["encodedVideo"]);r!=null&&d(t,["videoBytes"],zh(r));let o=u(e,["encoding"]);return o!=null&&d(t,["mimeType"],o),t}function CM(e){let t={},n=u(e,["gcsUri"]);n!=null&&d(t,["uri"],n);let r=u(e,["bytesBase64Encoded"]);r!=null&&d(t,["videoBytes"],zh(r));let o=u(e,["mimeType"]);return o!=null&&d(t,["mimeType"],o),t}var uo=(function(e){return e.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",e.STRING="STRING",e.NUMBER="NUMBER",e.INTEGER="INTEGER",e.BOOLEAN="BOOLEAN",e.ARRAY="ARRAY",e.OBJECT="OBJECT",e.NULL="NULL",e})(uo||{});var jp=(function(e){return e.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",e.TEXT="TEXT",e.IMAGE="IMAGE",e.AUDIO="AUDIO",e})(jp||{});var lC=(function(e){return e.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",e.JOB_STATE_QUEUED="JOB_STATE_QUEUED",e.JOB_STATE_PENDING="JOB_STATE_PENDING",e.JOB_STATE_RUNNING="JOB_STATE_RUNNING",e.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",e.JOB_STATE_FAILED="JOB_STATE_FAILED",e.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",e.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",e.JOB_STATE_PAUSED="JOB_STATE_PAUSED",e.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",e.JOB_STATE_UPDATING="JOB_STATE_UPDATING",e.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED",e})(lC||{});var uC=(function(e){return e.COLLECTION="COLLECTION",e})(uC||{});var Ns=(function(e){return e.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",e.PLAY="PLAY",e.PAUSE="PAUSE",e.STOP="STOP",e.RESET_CONTEXT="RESET_CONTEXT",e})(Ns||{});var Ps=class{constructor(t){let n={};for(let r of t.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=t}json(){return this.responseInternal.json()}};var lo=class{get text(){var t,n,r,o,i,s,a,l;if(((o=(r=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let c="",f=!1,p=[];for(let h of(l=(a=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(let[g,m]of Object.entries(h))g!=="text"&&g!=="thought"&&g!=="thoughtSignature"&&(m!==null||m!==void 0)&&p.push(g);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;f=!0,c+=h.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?c:void 0}get data(){var t,n,r,o,i,s,a,l;if(((o=(r=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let c="",f=[];for(let p of(l=(a=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(let[h,g]of Object.entries(p))h!=="inlineData"&&(g!==null||g!==void 0)&&f.push(h);p.inlineData&&typeof p.inlineData.data=="string"&&(c+=atob(p.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),c.length>0?btoa(c):void 0}get functionCalls(){var t,n,r,o,i,s,a,l;if(((o=(r=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");let c=(l=(a=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(f=>f.functionCall).map(f=>f.functionCall).filter(f=>f!==void 0);if(c?.length!==0)return c}get executableCode(){var t,n,r,o,i,s,a,l,c;if(((o=(r=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");let f=(l=(a=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if(f?.length!==0)return(c=f?.[0])===null||c===void 0?void 0:c.code}get codeExecutionResult(){var t,n,r,o,i,s,a,l,c;if(((o=(r=(n=(t=this.candidates)===null||t===void 0?void 0:t[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||o===void 0?void 0:o.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");let f=(l=(a=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if(f?.length!==0)return(c=f?.[0])===null||c===void 0?void 0:c.output}},Cu=class{},Iu=class{},Wp=class{},Jp=class{},Yp=class{},Zp=class{},Tu=class{},wu=class{},Du=class{},Kp=class{};var Su=class e{_fromAPIResponse({apiResponse:t,_isVertexAI:n}){let r=new e,o,i=t;return n?o=cM(i):o=uM(i),Object.assign(r,o),r}},bu=class{},Au=class{},Mu=class{},Ru=class{},Qp=class{},Xp=class{},eh=class{};var th=class e{_fromAPIResponse({apiResponse:t,_isVertexAI:n}){let r=new e,i=yM(t);return Object.assign(r,i),r}},nh=class{},rh=class{},oh=class{},ih=class{};var Nu=class{};var sh=class{get text(){var t,n,r;let o="",i=!1,s=[];for(let a of(r=(n=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(let[l,c]of Object.entries(a))l!=="text"&&l!=="thought"&&c!==null&&s.push(l);if(typeof a.text=="string"){if(typeof a.thought=="boolean"&&a.thought)continue;i=!0,o+=a.text}}return s.length>0&&console.warn(`there are non-text parts ${s} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),i?o:void 0}get data(){var t,n,r;let o="",i=[];for(let s of(r=(n=(t=this.serverContent)===null||t===void 0?void 0:t.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(let[a,l]of Object.entries(s))a!=="inlineData"&&l!==null&&i.push(a);s.inlineData&&typeof s.inlineData.data=="string"&&(o+=atob(s.inlineData.data))}return i.length>0&&console.warn(`there are non-data parts ${i} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),o.length>0?btoa(o):void 0}};var ah=class{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}};var lh=class e{_fromAPIResponse({apiResponse:t,_isVertexAI:n}){let r=new e,i=aC(t);return Object.assign(r,i),r}};function Te(e,t){if(!t||typeof t!="string")throw new Error("model is required and must be a string");if(t.includes("..")||t.includes("?")||t.includes("&"))throw new Error("invalid model parameter");if(e.isVertexAI()){if(t.startsWith("publishers/")||t.startsWith("projects/")||t.startsWith("models/"))return t;if(t.indexOf("/")>=0){let n=t.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${t}`}else return t.startsWith("models/")||t.startsWith("tunedModels/")?t:`models/${t}`}function cC(e,t){let n=Te(e,t);return n?n.startsWith("publishers/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}`:n.startsWith("models/")&&e.isVertexAI()?`projects/${e.getProject()}/locations/${e.getLocation()}/publishers/google/${n}`:n:""}function dC(e){return Array.isArray(e)?e.map(t=>xu(t)):[xu(e)]}function xu(e){if(typeof e=="object"&&e!==null)return e;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof e}`)}function fC(e){let t=xu(e);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function pC(e){let t=xu(e);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function L_(e){if(e==null)throw new Error("PartUnion is required");if(typeof e=="object")return e;if(typeof e=="string")return{text:e};throw new Error(`Unsupported part type: ${typeof e}`)}function hC(e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("PartListUnion is required");return Array.isArray(e)?e.map(t=>L_(t)):[L_(e)]}function uh(e){return e!=null&&typeof e=="object"&&"parts"in e&&Array.isArray(e.parts)}function U_(e){return e!=null&&typeof e=="object"&&"functionCall"in e}function B_(e){return e!=null&&typeof e=="object"&&"functionResponse"in e}function mt(e){if(e==null)throw new Error("ContentUnion is required");return uh(e)?e:{role:"user",parts:hC(e)}}function qh(e,t){if(!t)return[];if(e.isVertexAI()&&Array.isArray(t))return t.flatMap(n=>{let r=mt(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(e.isVertexAI()){let n=mt(t);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(t)?t.map(n=>mt(n)):[mt(t)]}function Jt(e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("contents are required");if(!Array.isArray(e)){if(U_(e)||B_(e))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[mt(e)]}let t=[],n=[],r=uh(e[0]);for(let o of e){let i=uh(o);if(i!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(i)t.push(o);else{if(U_(o)||B_(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(o)}}return r||t.push({role:"user",parts:hC(n)}),t}function IM(e,t){e.includes("null")&&(t.nullable=!0);let n=e.filter(r=>r!=="null");if(n.length===1)t.type=Object.values(uo).includes(n[0].toUpperCase())?n[0].toUpperCase():uo.TYPE_UNSPECIFIED;else{t.anyOf=[];for(let r of n)t.anyOf.push({type:Object.values(uo).includes(r.toUpperCase())?r.toUpperCase():uo.TYPE_UNSPECIFIED})}}function Qo(e){let t={},n=["items"],r=["anyOf"],o=["properties"];if(e.type&&e.anyOf)throw new Error("type and anyOf cannot be both populated.");let i=e.anyOf;i!=null&&i.length==2&&(i[0].type==="null"?(t.nullable=!0,e=i[1]):i[1].type==="null"&&(t.nullable=!0,e=i[0])),e.type instanceof Array&&IM(e.type,t);for(let[s,a]of Object.entries(e))if(a!=null)if(s=="type"){if(a==="null")throw new Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;t.type=Object.values(uo).includes(a.toUpperCase())?a.toUpperCase():uo.TYPE_UNSPECIFIED}else if(n.includes(s))t[s]=Qo(a);else if(r.includes(s)){let l=[];for(let c of a){if(c.type=="null"){t.nullable=!0;continue}l.push(Qo(c))}t[s]=l}else if(o.includes(s)){let l={};for(let[c,f]of Object.entries(a))l[c]=Qo(f);t[s]=l}else{if(s==="additionalProperties")continue;t[s]=a}return t}function jh(e){return Qo(e)}function Wh(e){if(typeof e=="object")return e;if(typeof e=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw new Error(`Unsupported speechConfig type: ${typeof e}`)}function Jh(e){if("multiSpeakerVoiceConfig"in e)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return e}function ni(e){if(e.functionDeclarations)for(let t of e.functionDeclarations)t.parameters&&(Object.keys(t.parameters).includes("$schema")?t.parametersJsonSchema||(t.parametersJsonSchema=t.parameters,delete t.parameters):t.parameters=Qo(t.parameters)),t.response&&(Object.keys(t.response).includes("$schema")?t.responseJsonSchema||(t.responseJsonSchema=t.response,delete t.response):t.response=Qo(t.response));return e}function ri(e){if(e==null)throw new Error("tools is required");if(!Array.isArray(e))throw new Error("tools is required and must be an array of Tools");let t=[];for(let n of e)t.push(n);return t}function TM(e,t,n,r=1){let o=!t.startsWith(`${n}/`)&&t.split("/").length===r;return e.isVertexAI()?t.startsWith("projects/")?t:t.startsWith("locations/")?`projects/${e.getProject()}/${t}`:t.startsWith(`${n}/`)?`projects/${e.getProject()}/locations/${e.getLocation()}/${t}`:o?`projects/${e.getProject()}/locations/${e.getLocation()}/${n}/${t}`:t:o?`${n}/${t}`:t}function rr(e,t){if(typeof t!="string")throw new Error("name must be a string");return TM(e,t,"cachedContents")}function gC(e){switch(e){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return e}}function vr(e){return zh(e)}function wM(e){return e!=null&&typeof e=="object"&&"name"in e}function DM(e){return e!=null&&typeof e=="object"&&"video"in e}function SM(e){return e!=null&&typeof e=="object"&&"uri"in e}function mC(e){var t;let n;if(wM(e)&&(n=e.name),!(SM(e)&&(n=e.uri,n===void 0))&&!(DM(e)&&(n=(t=e.video)===null||t===void 0?void 0:t.uri,n===void 0))){if(typeof e=="string"&&(n=e),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){let o=n.split("files/")[1].match(/[a-z0-9]+/);if(o===null)throw new Error(`Could not extract file name from URI ${n}`);n=o[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function yC(e,t){let n;return e.isVertexAI()?n=t?"publishers/google/models":"models":n=t?"models":"tunedModels",n}function vC(e){for(let t of["models","tunedModels","publisherModels"])if(bM(e,t))return e[t];return[]}function bM(e,t){return e!==null&&typeof e=="object"&&t in e}function AM(e,t={}){let n=e,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(r.responseJsonSchema=n.outputSchema),t.behavior&&(r.behavior=t.behavior),{functionDeclarations:[r]}}function MM(e,t={}){let n=[],r=new Set;for(let o of e){let i=o.name;if(r.has(i))throw new Error(`Duplicate function name ${i} found in MCP tools. Please ensure function names are unique.`);r.add(i);let s=AM(o,t);s.functionDeclarations&&n.push(...s.functionDeclarations)}return{functionDeclarations:n}}function EC(e,t){let n;if(typeof t=="string")if(e.isVertexAI())if(t.startsWith("gs://"))n={format:"jsonl",gcsUri:[t]};else if(t.startsWith("bq://"))n={format:"bigquery",bigqueryUri:t};else throw new Error(`Unsupported string source for Vertex AI: ${t}`);else if(t.startsWith("files/"))n={fileName:t};else throw new Error(`Unsupported string source for Gemini API: ${t}`);else if(Array.isArray(t)){if(e.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:t}}else n=t;let r=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,o=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(e.isVertexAI()){if(o>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||o!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function RM(e){if(typeof e!="string")return e;let t=e;if(t.startsWith("gs://"))return{format:"jsonl",gcsUri:t};if(t.startsWith("bq://"))return{format:"bigquery",bigqueryUri:t};throw new Error(`Unsupported destination: ${t}`)}function _C(e){if(typeof e!="object"||e===null)return{};let t=e,n=t.inlinedResponses;if(typeof n!="object"||n===null)return e;let o=n.inlinedResponses;if(!Array.isArray(o)||o.length===0)return e;let i=!1;for(let s of o){if(typeof s!="object"||s===null)continue;let l=s.response;if(typeof l!="object"||l===null)continue;if(l.embedding!==void 0){i=!0;break}}return i&&(t.inlinedEmbedContentResponses=t.inlinedResponses,delete t.inlinedResponses),e}function oi(e,t){let n=t;if(!e.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function CC(e){let t=e;return t==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":t==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":t==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":t==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":t==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":t==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":t==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":t}function NM(e){let t={},n=u(e,["responsesFile"]);n!=null&&d(t,["fileName"],n);let r=u(e,["inlinedResponses","inlinedResponses"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>dR(s))),d(t,["inlinedResponses"],i)}let o=u(e,["inlinedEmbedContentResponses","inlinedResponses"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),d(t,["inlinedEmbedContentResponses"],i)}return t}function xM(e){let t={},n=u(e,["predictionsFormat"]);n!=null&&d(t,["format"],n);let r=u(e,["gcsDestination","outputUriPrefix"]);r!=null&&d(t,["gcsUri"],r);let o=u(e,["bigqueryDestination","outputUri"]);return o!=null&&d(t,["bigqueryUri"],o),t}function PM(e){let t={},n=u(e,["format"]);n!=null&&d(t,["predictionsFormat"],n);let r=u(e,["gcsUri"]);r!=null&&d(t,["gcsDestination","outputUriPrefix"],r);let o=u(e,["bigqueryUri"]);if(o!=null&&d(t,["bigqueryDestination","outputUri"],o),u(e,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(u(e,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(u(e,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return t}function Eu(e){let t={},n=u(e,["name"]);n!=null&&d(t,["name"],n);let r=u(e,["metadata","displayName"]);r!=null&&d(t,["displayName"],r);let o=u(e,["metadata","state"]);o!=null&&d(t,["state"],CC(o));let i=u(e,["metadata","createTime"]);i!=null&&d(t,["createTime"],i);let s=u(e,["metadata","endTime"]);s!=null&&d(t,["endTime"],s);let a=u(e,["metadata","updateTime"]);a!=null&&d(t,["updateTime"],a);let l=u(e,["metadata","model"]);l!=null&&d(t,["model"],l);let c=u(e,["metadata","output"]);return c!=null&&d(t,["dest"],NM(_C(c))),t}function ch(e){let t={},n=u(e,["name"]);n!=null&&d(t,["name"],n);let r=u(e,["displayName"]);r!=null&&d(t,["displayName"],r);let o=u(e,["state"]);o!=null&&d(t,["state"],CC(o));let i=u(e,["error"]);i!=null&&d(t,["error"],i);let s=u(e,["createTime"]);s!=null&&d(t,["createTime"],s);let a=u(e,["startTime"]);a!=null&&d(t,["startTime"],a);let l=u(e,["endTime"]);l!=null&&d(t,["endTime"],l);let c=u(e,["updateTime"]);c!=null&&d(t,["updateTime"],c);let f=u(e,["model"]);f!=null&&d(t,["model"],f);let p=u(e,["inputConfig"]);p!=null&&d(t,["src"],kM(p));let h=u(e,["outputConfig"]);h!=null&&d(t,["dest"],xM(_C(h)));let g=u(e,["completionStats"]);return g!=null&&d(t,["completionStats"],g),t}function kM(e){let t={},n=u(e,["instancesFormat"]);n!=null&&d(t,["format"],n);let r=u(e,["gcsSource","uris"]);r!=null&&d(t,["gcsUri"],r);let o=u(e,["bigquerySource","inputUri"]);return o!=null&&d(t,["bigqueryUri"],o),t}function OM(e,t){let n={};if(u(t,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(u(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(u(t,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");let r=u(t,["fileName"]);r!=null&&d(n,["fileName"],r);let o=u(t,["inlinedRequests"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>cR(e,s))),d(n,["requests","requests"],i)}return n}function FM(e){let t={},n=u(e,["format"]);n!=null&&d(t,["instancesFormat"],n);let r=u(e,["gcsUri"]);r!=null&&d(t,["gcsSource","uris"],r);let o=u(e,["bigqueryUri"]);if(o!=null&&d(t,["bigquerySource","inputUri"],o),u(e,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(u(e,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return t}function LM(e){let t={},n=u(e,["data"]);if(n!=null&&d(t,["data"],n),u(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let r=u(e,["mimeType"]);return r!=null&&d(t,["mimeType"],r),t}function UM(e,t){let n={},r=u(t,["name"]);return r!=null&&d(n,["_url","name"],oi(e,r)),n}function BM(e,t){let n={},r=u(t,["name"]);return r!=null&&d(n,["_url","name"],oi(e,r)),n}function VM(e){let t={},n=u(e,["content"]);n!=null&&d(t,["content"],n);let r=u(e,["citationMetadata"]);r!=null&&d(t,["citationMetadata"],HM(r));let o=u(e,["tokenCount"]);o!=null&&d(t,["tokenCount"],o);let i=u(e,["finishReason"]);i!=null&&d(t,["finishReason"],i);let s=u(e,["avgLogprobs"]);s!=null&&d(t,["avgLogprobs"],s);let a=u(e,["groundingMetadata"]);a!=null&&d(t,["groundingMetadata"],a);let l=u(e,["index"]);l!=null&&d(t,["index"],l);let c=u(e,["logprobsResult"]);c!=null&&d(t,["logprobsResult"],c);let f=u(e,["safetyRatings"]);if(f!=null){let h=f;Array.isArray(h)&&(h=h.map(g=>g)),d(t,["safetyRatings"],h)}let p=u(e,["urlContextMetadata"]);return p!=null&&d(t,["urlContextMetadata"],p),t}function HM(e){let t={},n=u(e,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>o)),d(t,["citations"],r)}return t}function IC(e){let t={},n=u(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(i=>vR(i))),d(t,["parts"],o)}let r=u(e,["role"]);return r!=null&&d(t,["role"],r),t}function $M(e,t){let n={},r=u(e,["displayName"]);if(t!==void 0&&r!=null&&d(t,["batch","displayName"],r),u(e,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function GM(e,t){let n={},r=u(e,["displayName"]);t!==void 0&&r!=null&&d(t,["displayName"],r);let o=u(e,["dest"]);return t!==void 0&&o!=null&&d(t,["outputConfig"],PM(RM(o))),n}function V_(e,t){let n={},r=u(t,["model"]);r!=null&&d(n,["_url","model"],Te(e,r));let o=u(t,["src"]);o!=null&&d(n,["batch","inputConfig"],OM(e,EC(e,o)));let i=u(t,["config"]);return i!=null&&$M(i,n),n}function zM(e,t){let n={},r=u(t,["model"]);r!=null&&d(n,["model"],Te(e,r));let o=u(t,["src"]);o!=null&&d(n,["inputConfig"],FM(EC(e,o)));let i=u(t,["config"]);return i!=null&&GM(i,n),n}function qM(e,t){let n={},r=u(e,["displayName"]);return t!==void 0&&r!=null&&d(t,["batch","displayName"],r),n}function jM(e,t){let n={},r=u(t,["model"]);r!=null&&d(n,["_url","model"],Te(e,r));let o=u(t,["src"]);o!=null&&d(n,["batch","inputConfig"],XM(e,o));let i=u(t,["config"]);return i!=null&&qM(i,n),n}function WM(e,t){let n={},r=u(t,["name"]);return r!=null&&d(n,["_url","name"],oi(e,r)),n}function JM(e,t){let n={},r=u(t,["name"]);return r!=null&&d(n,["_url","name"],oi(e,r)),n}function YM(e){let t={},n=u(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);let r=u(e,["name"]);r!=null&&d(t,["name"],r);let o=u(e,["done"]);o!=null&&d(t,["done"],o);let i=u(e,["error"]);return i!=null&&d(t,["error"],i),t}function ZM(e){let t={},n=u(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);let r=u(e,["name"]);r!=null&&d(t,["name"],r);let o=u(e,["done"]);o!=null&&d(t,["done"],o);let i=u(e,["error"]);return i!=null&&d(t,["error"],i),t}function KM(e,t){let n={},r=u(t,["contents"]);if(r!=null){let i=qh(e,r);Array.isArray(i)&&(i=i.map(s=>s)),d(n,["requests[]","request","content"],i)}let o=u(t,["config"]);return o!=null&&(d(n,["_self"],QM(o,n)),aM(n,{"requests[].*":"requests[].request.*"})),n}function QM(e,t){let n={},r=u(e,["taskType"]);t!==void 0&&r!=null&&d(t,["requests[]","taskType"],r);let o=u(e,["title"]);t!==void 0&&o!=null&&d(t,["requests[]","title"],o);let i=u(e,["outputDimensionality"]);if(t!==void 0&&i!=null&&d(t,["requests[]","outputDimensionality"],i),u(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(u(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function XM(e,t){let n={},r=u(t,["fileName"]);r!=null&&d(n,["file_name"],r);let o=u(t,["inlinedRequests"]);return o!=null&&d(n,["requests"],KM(e,o)),n}function eR(e){let t={};if(u(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=u(e,["fileUri"]);n!=null&&d(t,["fileUri"],n);let r=u(e,["mimeType"]);return r!=null&&d(t,["mimeType"],r),t}function tR(e){let t={},n=u(e,["id"]);n!=null&&d(t,["id"],n);let r=u(e,["args"]);r!=null&&d(t,["args"],r);let o=u(e,["name"]);if(o!=null&&d(t,["name"],o),u(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function nR(e){let t={},n=u(e,["allowedFunctionNames"]);n!=null&&d(t,["allowedFunctionNames"],n);let r=u(e,["mode"]);if(r!=null&&d(t,["mode"],r),u(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function rR(e,t,n){let r={},o=u(t,["systemInstruction"]);n!==void 0&&o!=null&&d(n,["systemInstruction"],IC(mt(o)));let i=u(t,["temperature"]);i!=null&&d(r,["temperature"],i);let s=u(t,["topP"]);s!=null&&d(r,["topP"],s);let a=u(t,["topK"]);a!=null&&d(r,["topK"],a);let l=u(t,["candidateCount"]);l!=null&&d(r,["candidateCount"],l);let c=u(t,["maxOutputTokens"]);c!=null&&d(r,["maxOutputTokens"],c);let f=u(t,["stopSequences"]);f!=null&&d(r,["stopSequences"],f);let p=u(t,["responseLogprobs"]);p!=null&&d(r,["responseLogprobs"],p);let h=u(t,["logprobs"]);h!=null&&d(r,["logprobs"],h);let g=u(t,["presencePenalty"]);g!=null&&d(r,["presencePenalty"],g);let m=u(t,["frequencyPenalty"]);m!=null&&d(r,["frequencyPenalty"],m);let y=u(t,["seed"]);y!=null&&d(r,["seed"],y);let E=u(t,["responseMimeType"]);E!=null&&d(r,["responseMimeType"],E);let C=u(t,["responseSchema"]);C!=null&&d(r,["responseSchema"],jh(C));let T=u(t,["responseJsonSchema"]);if(T!=null&&d(r,["responseJsonSchema"],T),u(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(u(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");let D=u(t,["safetySettings"]);if(n!==void 0&&D!=null){let L=D;Array.isArray(L)&&(L=L.map(ee=>ER(ee))),d(n,["safetySettings"],L)}let A=u(t,["tools"]);if(n!==void 0&&A!=null){let L=ri(A);Array.isArray(L)&&(L=L.map(ee=>CR(ni(ee)))),d(n,["tools"],L)}let b=u(t,["toolConfig"]);if(n!==void 0&&b!=null&&d(n,["toolConfig"],_R(b)),u(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");let O=u(t,["cachedContent"]);n!==void 0&&O!=null&&d(n,["cachedContent"],rr(e,O));let R=u(t,["responseModalities"]);R!=null&&d(r,["responseModalities"],R);let B=u(t,["mediaResolution"]);B!=null&&d(r,["mediaResolution"],B);let G=u(t,["speechConfig"]);if(G!=null&&d(r,["speechConfig"],Wh(G)),u(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");let S=u(t,["thinkingConfig"]);S!=null&&d(r,["thinkingConfig"],S);let k=u(t,["imageConfig"]);k!=null&&d(r,["imageConfig"],uR(k));let _=u(t,["enableEnhancedCivicAnswers"]);if(_!=null&&d(r,["enableEnhancedCivicAnswers"],_),u(t,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return r}function oR(e){let t={},n=u(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);let r=u(e,["candidates"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>VM(c))),d(t,["candidates"],l)}let o=u(e,["modelVersion"]);o!=null&&d(t,["modelVersion"],o);let i=u(e,["promptFeedback"]);i!=null&&d(t,["promptFeedback"],i);let s=u(e,["responseId"]);s!=null&&d(t,["responseId"],s);let a=u(e,["usageMetadata"]);return a!=null&&d(t,["usageMetadata"],a),t}function iR(e,t){let n={},r=u(t,["name"]);return r!=null&&d(n,["_url","name"],oi(e,r)),n}function sR(e,t){let n={},r=u(t,["name"]);return r!=null&&d(n,["_url","name"],oi(e,r)),n}function aR(e){let t={};if(u(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let n=u(e,["enableWidget"]);return n!=null&&d(t,["enableWidget"],n),t}function lR(e){let t={};if(u(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let n=u(e,["timeRangeFilter"]);return n!=null&&d(t,["timeRangeFilter"],n),t}function uR(e){let t={},n=u(e,["aspectRatio"]);n!=null&&d(t,["aspectRatio"],n);let r=u(e,["imageSize"]);if(r!=null&&d(t,["imageSize"],r),u(e,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(u(e,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(u(e,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function cR(e,t){let n={},r=u(t,["model"]);r!=null&&d(n,["request","model"],Te(e,r));let o=u(t,["contents"]);if(o!=null){let a=Jt(o);Array.isArray(a)&&(a=a.map(l=>IC(l))),d(n,["request","contents"],a)}let i=u(t,["metadata"]);i!=null&&d(n,["metadata"],i);let s=u(t,["config"]);return s!=null&&d(n,["request","generationConfig"],rR(e,s,u(n,["request"],{}))),n}function dR(e){let t={},n=u(e,["response"]);n!=null&&d(t,["response"],oR(n));let r=u(e,["metadata"]);r!=null&&d(t,["metadata"],r);let o=u(e,["error"]);return o!=null&&d(t,["error"],o),t}function fR(e,t){let n={},r=u(e,["pageSize"]);t!==void 0&&r!=null&&d(t,["_query","pageSize"],r);let o=u(e,["pageToken"]);if(t!==void 0&&o!=null&&d(t,["_query","pageToken"],o),u(e,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function pR(e,t){let n={},r=u(e,["pageSize"]);t!==void 0&&r!=null&&d(t,["_query","pageSize"],r);let o=u(e,["pageToken"]);t!==void 0&&o!=null&&d(t,["_query","pageToken"],o);let i=u(e,["filter"]);return t!==void 0&&i!=null&&d(t,["_query","filter"],i),n}function hR(e){let t={},n=u(e,["config"]);return n!=null&&fR(n,t),t}function gR(e){let t={},n=u(e,["config"]);return n!=null&&pR(n,t),t}function mR(e){let t={},n=u(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);let r=u(e,["nextPageToken"]);r!=null&&d(t,["nextPageToken"],r);let o=u(e,["operations"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>Eu(s))),d(t,["batchJobs"],i)}return t}function yR(e){let t={},n=u(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);let r=u(e,["nextPageToken"]);r!=null&&d(t,["nextPageToken"],r);let o=u(e,["batchPredictionJobs"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>ch(s))),d(t,["batchJobs"],i)}return t}function vR(e){let t={},n=u(e,["mediaResolution"]);n!=null&&d(t,["mediaResolution"],n);let r=u(e,["codeExecutionResult"]);r!=null&&d(t,["codeExecutionResult"],r);let o=u(e,["executableCode"]);o!=null&&d(t,["executableCode"],o);let i=u(e,["fileData"]);i!=null&&d(t,["fileData"],eR(i));let s=u(e,["functionCall"]);s!=null&&d(t,["functionCall"],tR(s));let a=u(e,["functionResponse"]);a!=null&&d(t,["functionResponse"],a);let l=u(e,["inlineData"]);l!=null&&d(t,["inlineData"],LM(l));let c=u(e,["text"]);c!=null&&d(t,["text"],c);let f=u(e,["thought"]);f!=null&&d(t,["thought"],f);let p=u(e,["thoughtSignature"]);p!=null&&d(t,["thoughtSignature"],p);let h=u(e,["videoMetadata"]);return h!=null&&d(t,["videoMetadata"],h),t}function ER(e){let t={},n=u(e,["category"]);if(n!=null&&d(t,["category"],n),u(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");let r=u(e,["threshold"]);return r!=null&&d(t,["threshold"],r),t}function _R(e){let t={},n=u(e,["retrievalConfig"]);n!=null&&d(t,["retrievalConfig"],n);let r=u(e,["functionCallingConfig"]);return r!=null&&d(t,["functionCallingConfig"],nR(r)),t}function CR(e){let t={};if(u(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let n=u(e,["computerUse"]);n!=null&&d(t,["computerUse"],n);let r=u(e,["fileSearch"]);r!=null&&d(t,["fileSearch"],r);let o=u(e,["codeExecution"]);if(o!=null&&d(t,["codeExecution"],o),u(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let i=u(e,["functionDeclarations"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(p=>p)),d(t,["functionDeclarations"],f)}let s=u(e,["googleMaps"]);s!=null&&d(t,["googleMaps"],aR(s));let a=u(e,["googleSearch"]);a!=null&&d(t,["googleSearch"],lR(a));let l=u(e,["googleSearchRetrieval"]);l!=null&&d(t,["googleSearchRetrieval"],l);let c=u(e,["urlContext"]);return c!=null&&d(t,["urlContext"],c),t}var Er=(function(e){return e.PAGED_ITEM_BATCH_JOBS="batchJobs",e.PAGED_ITEM_MODELS="models",e.PAGED_ITEM_TUNING_JOBS="tuningJobs",e.PAGED_ITEM_FILES="files",e.PAGED_ITEM_CACHED_CONTENTS="cachedContents",e.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",e.PAGED_ITEM_DOCUMENTS="documents",e})(Er||{}),nr=class{constructor(t,n,r,o){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(t,r,o)}init(t,n,r){var o,i;this.nameInternal=t,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n?.sdkHttpResponse,this.idxInternal=0;let s={config:{}};!r||Object.keys(r).length===0?s={config:{}}:typeof r=="object"?s=Object.assign({},r):s=r,s.config&&(s.config.pageToken=n.nextPageToken),this.paramsInternal=s,this.pageInternalSize=(i=(o=s.config)===null||o===void 0?void 0:o.pageSize)!==null&&i!==void 0?i:this.pageInternal.length}initNextPage(t){this.init(this.nameInternal,t,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(t){return this.pageInternal[t]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};let t=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:t,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");let t=await this.requestInternal(this.params);return this.initNextPage(t),this.page}hasNextPage(){var t;return((t=this.params.config)===null||t===void 0?void 0:t.pageToken)!==void 0}};var dh=class extends yn{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new nr(Er.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(t){let n=V_(this.apiClient,t),r=n._url,o=Y("{model}:batchGenerateContent",r),a=n.batch.inputConfig.requests,l=a.requests,c=[];for(let f of l){let p=Object.assign({},f);if(p.systemInstruction){let h=p.systemInstruction;delete p.systemInstruction;let g=p.request;g.systemInstruction=h,p.request=g}c.push(p)}return a.requests=c,delete n.config,delete n._url,delete n._query,{path:o,body:n}}getGcsUri(t){if(typeof t=="string")return t.startsWith("gs://")?t:void 0;if(!Array.isArray(t)&&t.gcsUri&&t.gcsUri.length>0)return t.gcsUri[0]}getBigqueryUri(t){if(typeof t=="string")return t.startsWith("bq://")?t:void 0;if(!Array.isArray(t))return t.bigqueryUri}formatDestination(t,n){let r=n?Object.assign({},n):{},o=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${o}`),r.dest===void 0){let i=this.getGcsUri(t),s=this.getBigqueryUri(t);if(i)i.endsWith(".jsonl")?r.dest=`${i.slice(0,-6)}/dest`:r.dest=`${i}_dest_${o}`;else if(s)r.dest=`${s}_dest_${o}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(t){var n,r,o,i;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=zM(this.apiClient,t);return a=Y("batchPredictionJobs",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>ch(f))}else{let c=V_(this.apiClient,t);return a=Y("{model}:batchGenerateContent",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>Eu(f))}}async createEmbeddingsInternal(t){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=jM(this.apiClient,t);return i=Y("{model}:asyncBatchEmbedContent",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),o.then(l=>Eu(l))}}async get(t){var n,r,o,i;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=sR(this.apiClient,t);return a=Y("batchPredictionJobs/{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>ch(f))}else{let c=iR(this.apiClient,t);return a=Y("batches/{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>Eu(f))}}async cancel(t){var n,r,o,i;let s="",a={};if(this.apiClient.isVertexAI()){let l=BM(this.apiClient,t);s=Y("batchPredictionJobs/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal})}else{let l=UM(this.apiClient,t);s=Y("batches/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(t){var n,r,o,i;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=gR(t);return a=Y("batchPredictionJobs",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{let p=yR(f),h=new Nu;return Object.assign(h,p),h})}else{let c=hR(t);return a=Y("batches",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{let p=mR(f),h=new Nu;return Object.assign(h,p),h})}}async delete(t){var n,r,o,i;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=JM(this.apiClient,t);return a=Y("batchPredictionJobs/{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>ZM(f))}else{let c=WM(this.apiClient,t);return a=Y("batches/{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>YM(f))}}};function IR(e){let t={},n=u(e,["data"]);if(n!=null&&d(t,["data"],n),u(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let r=u(e,["mimeType"]);return r!=null&&d(t,["mimeType"],r),t}function H_(e){let t={},n=u(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(i=>qR(i))),d(t,["parts"],o)}let r=u(e,["role"]);return r!=null&&d(t,["role"],r),t}function TR(e,t){let n={},r=u(e,["ttl"]);t!==void 0&&r!=null&&d(t,["ttl"],r);let o=u(e,["expireTime"]);t!==void 0&&o!=null&&d(t,["expireTime"],o);let i=u(e,["displayName"]);t!==void 0&&i!=null&&d(t,["displayName"],i);let s=u(e,["contents"]);if(t!==void 0&&s!=null){let f=Jt(s);Array.isArray(f)&&(f=f.map(p=>H_(p))),d(t,["contents"],f)}let a=u(e,["systemInstruction"]);t!==void 0&&a!=null&&d(t,["systemInstruction"],H_(mt(a)));let l=u(e,["tools"]);if(t!==void 0&&l!=null){let f=l;Array.isArray(f)&&(f=f.map(p=>WR(p))),d(t,["tools"],f)}let c=u(e,["toolConfig"]);if(t!==void 0&&c!=null&&d(t,["toolConfig"],jR(c)),u(e,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function wR(e,t){let n={},r=u(e,["ttl"]);t!==void 0&&r!=null&&d(t,["ttl"],r);let o=u(e,["expireTime"]);t!==void 0&&o!=null&&d(t,["expireTime"],o);let i=u(e,["displayName"]);t!==void 0&&i!=null&&d(t,["displayName"],i);let s=u(e,["contents"]);if(t!==void 0&&s!=null){let p=Jt(s);Array.isArray(p)&&(p=p.map(h=>h)),d(t,["contents"],p)}let a=u(e,["systemInstruction"]);t!==void 0&&a!=null&&d(t,["systemInstruction"],mt(a));let l=u(e,["tools"]);if(t!==void 0&&l!=null){let p=l;Array.isArray(p)&&(p=p.map(h=>JR(h))),d(t,["tools"],p)}let c=u(e,["toolConfig"]);t!==void 0&&c!=null&&d(t,["toolConfig"],c);let f=u(e,["kmsKeyName"]);return t!==void 0&&f!=null&&d(t,["encryption_spec","kmsKeyName"],f),n}function DR(e,t){let n={},r=u(t,["model"]);r!=null&&d(n,["model"],cC(e,r));let o=u(t,["config"]);return o!=null&&TR(o,n),n}function SR(e,t){let n={},r=u(t,["model"]);r!=null&&d(n,["model"],cC(e,r));let o=u(t,["config"]);return o!=null&&wR(o,n),n}function bR(e,t){let n={},r=u(t,["name"]);return r!=null&&d(n,["_url","name"],rr(e,r)),n}function AR(e,t){let n={},r=u(t,["name"]);return r!=null&&d(n,["_url","name"],rr(e,r)),n}function MR(e){let t={},n=u(e,["sdkHttpResponse"]);return n!=null&&d(t,["sdkHttpResponse"],n),t}function RR(e){let t={},n=u(e,["sdkHttpResponse"]);return n!=null&&d(t,["sdkHttpResponse"],n),t}function NR(e){let t={};if(u(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=u(e,["fileUri"]);n!=null&&d(t,["fileUri"],n);let r=u(e,["mimeType"]);return r!=null&&d(t,["mimeType"],r),t}function xR(e){let t={},n=u(e,["id"]);n!=null&&d(t,["id"],n);let r=u(e,["args"]);r!=null&&d(t,["args"],r);let o=u(e,["name"]);if(o!=null&&d(t,["name"],o),u(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function PR(e){let t={},n=u(e,["allowedFunctionNames"]);n!=null&&d(t,["allowedFunctionNames"],n);let r=u(e,["mode"]);if(r!=null&&d(t,["mode"],r),u(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function kR(e){let t={},n=u(e,["description"]);n!=null&&d(t,["description"],n);let r=u(e,["name"]);r!=null&&d(t,["name"],r);let o=u(e,["parameters"]);o!=null&&d(t,["parameters"],o);let i=u(e,["parametersJsonSchema"]);i!=null&&d(t,["parametersJsonSchema"],i);let s=u(e,["response"]);s!=null&&d(t,["response"],s);let a=u(e,["responseJsonSchema"]);if(a!=null&&d(t,["responseJsonSchema"],a),u(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return t}function OR(e,t){let n={},r=u(t,["name"]);return r!=null&&d(n,["_url","name"],rr(e,r)),n}function FR(e,t){let n={},r=u(t,["name"]);return r!=null&&d(n,["_url","name"],rr(e,r)),n}function LR(e){let t={};if(u(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let n=u(e,["enableWidget"]);return n!=null&&d(t,["enableWidget"],n),t}function UR(e){let t={};if(u(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let n=u(e,["timeRangeFilter"]);return n!=null&&d(t,["timeRangeFilter"],n),t}function BR(e,t){let n={},r=u(e,["pageSize"]);t!==void 0&&r!=null&&d(t,["_query","pageSize"],r);let o=u(e,["pageToken"]);return t!==void 0&&o!=null&&d(t,["_query","pageToken"],o),n}function VR(e,t){let n={},r=u(e,["pageSize"]);t!==void 0&&r!=null&&d(t,["_query","pageSize"],r);let o=u(e,["pageToken"]);return t!==void 0&&o!=null&&d(t,["_query","pageToken"],o),n}function HR(e){let t={},n=u(e,["config"]);return n!=null&&BR(n,t),t}function $R(e){let t={},n=u(e,["config"]);return n!=null&&VR(n,t),t}function GR(e){let t={},n=u(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);let r=u(e,["nextPageToken"]);r!=null&&d(t,["nextPageToken"],r);let o=u(e,["cachedContents"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),d(t,["cachedContents"],i)}return t}function zR(e){let t={},n=u(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);let r=u(e,["nextPageToken"]);r!=null&&d(t,["nextPageToken"],r);let o=u(e,["cachedContents"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),d(t,["cachedContents"],i)}return t}function qR(e){let t={},n=u(e,["mediaResolution"]);n!=null&&d(t,["mediaResolution"],n);let r=u(e,["codeExecutionResult"]);r!=null&&d(t,["codeExecutionResult"],r);let o=u(e,["executableCode"]);o!=null&&d(t,["executableCode"],o);let i=u(e,["fileData"]);i!=null&&d(t,["fileData"],NR(i));let s=u(e,["functionCall"]);s!=null&&d(t,["functionCall"],xR(s));let a=u(e,["functionResponse"]);a!=null&&d(t,["functionResponse"],a);let l=u(e,["inlineData"]);l!=null&&d(t,["inlineData"],IR(l));let c=u(e,["text"]);c!=null&&d(t,["text"],c);let f=u(e,["thought"]);f!=null&&d(t,["thought"],f);let p=u(e,["thoughtSignature"]);p!=null&&d(t,["thoughtSignature"],p);let h=u(e,["videoMetadata"]);return h!=null&&d(t,["videoMetadata"],h),t}function jR(e){let t={},n=u(e,["retrievalConfig"]);n!=null&&d(t,["retrievalConfig"],n);let r=u(e,["functionCallingConfig"]);return r!=null&&d(t,["functionCallingConfig"],PR(r)),t}function WR(e){let t={};if(u(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let n=u(e,["computerUse"]);n!=null&&d(t,["computerUse"],n);let r=u(e,["fileSearch"]);r!=null&&d(t,["fileSearch"],r);let o=u(e,["codeExecution"]);if(o!=null&&d(t,["codeExecution"],o),u(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let i=u(e,["functionDeclarations"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(p=>p)),d(t,["functionDeclarations"],f)}let s=u(e,["googleMaps"]);s!=null&&d(t,["googleMaps"],LR(s));let a=u(e,["googleSearch"]);a!=null&&d(t,["googleSearch"],UR(a));let l=u(e,["googleSearchRetrieval"]);l!=null&&d(t,["googleSearchRetrieval"],l);let c=u(e,["urlContext"]);return c!=null&&d(t,["urlContext"],c),t}function JR(e){let t={},n=u(e,["retrieval"]);n!=null&&d(t,["retrieval"],n);let r=u(e,["computerUse"]);if(r!=null&&d(t,["computerUse"],r),u(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");let o=u(e,["codeExecution"]);o!=null&&d(t,["codeExecution"],o);let i=u(e,["enterpriseWebSearch"]);i!=null&&d(t,["enterpriseWebSearch"],i);let s=u(e,["functionDeclarations"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(h=>kR(h))),d(t,["functionDeclarations"],p)}let a=u(e,["googleMaps"]);a!=null&&d(t,["googleMaps"],a);let l=u(e,["googleSearch"]);l!=null&&d(t,["googleSearch"],l);let c=u(e,["googleSearchRetrieval"]);c!=null&&d(t,["googleSearchRetrieval"],c);let f=u(e,["urlContext"]);return f!=null&&d(t,["urlContext"],f),t}function YR(e,t){let n={},r=u(e,["ttl"]);t!==void 0&&r!=null&&d(t,["ttl"],r);let o=u(e,["expireTime"]);return t!==void 0&&o!=null&&d(t,["expireTime"],o),n}function ZR(e,t){let n={},r=u(e,["ttl"]);t!==void 0&&r!=null&&d(t,["ttl"],r);let o=u(e,["expireTime"]);return t!==void 0&&o!=null&&d(t,["expireTime"],o),n}function KR(e,t){let n={},r=u(t,["name"]);r!=null&&d(n,["_url","name"],rr(e,r));let o=u(t,["config"]);return o!=null&&YR(o,n),n}function QR(e,t){let n={},r=u(t,["name"]);r!=null&&d(n,["_url","name"],rr(e,r));let o=u(t,["config"]);return o!=null&&ZR(o,n),n}var fh=class extends yn{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new nr(Er.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(t){var n,r,o,i;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=SR(this.apiClient,t);return a=Y("cachedContents",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>f)}else{let c=DR(this.apiClient,t);return a=Y("cachedContents",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async get(t){var n,r,o,i;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=FR(this.apiClient,t);return a=Y("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>f)}else{let c=OR(this.apiClient,t);return a=Y("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async delete(t){var n,r,o,i;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=AR(this.apiClient,t);return a=Y("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{let p=RR(f),h=new Mu;return Object.assign(h,p),h})}else{let c=bR(this.apiClient,t);return a=Y("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{let p=MR(f),h=new Mu;return Object.assign(h,p),h})}}async update(t){var n,r,o,i;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=QR(this.apiClient,t);return a=Y("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>f)}else{let c=KR(this.apiClient,t);return a=Y("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async listInternal(t){var n,r,o,i;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=$R(t);return a=Y("cachedContents",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{let p=zR(f),h=new Ru;return Object.assign(h,p),h})}else{let c=HR(t);return a=Y("cachedContents",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{let p=GR(f),h=new Ru;return Object.assign(h,p),h})}}};function Pu(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n}function $_(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function de(e){return this instanceof de?(this.v=e,this):new de(e)}function gn(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),o,i=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),o[Symbol.asyncIterator]=function(){return this},o;function s(g){return function(m){return Promise.resolve(m).then(g,p)}}function a(g,m){r[g]&&(o[g]=function(y){return new Promise(function(E,C){i.push([g,y,E,C])>1||l(g,y)})},m&&(o[g]=m(o[g])))}function l(g,m){try{c(r[g](m))}catch(y){h(i[0][3],y)}}function c(g){g.value instanceof de?Promise.resolve(g.value.v).then(f,p):h(i[0][2],g)}function f(g){l("next",g)}function p(g){l("throw",g)}function h(g,m){g(m),i.shift(),i.length&&l(i[0][0],i[0][1])}}function mn(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof $_=="function"?$_(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=e[i]&&function(s){return new Promise(function(a,l){s=e[i](s),o(a,l,s.done,s.value)})}}function o(i,s,a,l){Promise.resolve(l).then(function(c){i({value:c,done:a})},s)}}function XR(e){var t;if(e.candidates==null||e.candidates.length===0)return!1;let n=(t=e.candidates[0])===null||t===void 0?void 0:t.content;return n===void 0?!1:TC(n)}function TC(e){if(e.parts===void 0||e.parts.length===0)return!1;for(let t of e.parts)if(t===void 0||Object.keys(t).length===0)return!1;return!0}function eN(e){if(e.length!==0){for(let t of e)if(t.role!=="user"&&t.role!=="model")throw new Error(`Role must be user or model, but got ${t.role}.`)}}function G_(e){if(e===void 0||e.length===0)return[];let t=[],n=e.length,r=0;for(;r<n;)if(e[r].role==="user")t.push(e[r]),r++;else{let o=[],i=!0;for(;r<n&&e[r].role==="model";)o.push(e[r]),i&&!TC(e[r])&&(i=!1),r++;i?t.push(...o):t.pop()}return t}var ph=class{constructor(t,n){this.modelsModule=t,this.apiClient=n}create(t){return new hh(this.apiClient,this.modelsModule,t.model,t.config,structuredClone(t.history))}},hh=class{constructor(t,n,r,o={},i=[]){this.apiClient=t,this.modelsModule=n,this.model=r,this.config=o,this.history=i,this.sendPromise=Promise.resolve(),eN(i)}async sendMessage(t){var n;await this.sendPromise;let r=mt(t.message),o=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=t.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var i,s,a;let l=await o,c=(s=(i=l.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content,f=l.automaticFunctionCallingHistory,p=this.getHistory(!0).length,h=[];f!=null&&(h=(a=f.slice(p))!==null&&a!==void 0?a:[]);let g=c?[c]:[];this.recordHistory(r,g,h)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),o}async sendMessageStream(t){var n;await this.sendPromise;let r=mt(t.message),o=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=t.config)!==null&&n!==void 0?n:this.config});this.sendPromise=o.then(()=>{}).catch(()=>{});let i=await o;return this.processStreamResponse(i,r)}getHistory(t=!1){let n=t?G_(this.history):this.history;return structuredClone(n)}processStreamResponse(t,n){return gn(this,arguments,function*(){var o,i,s,a,l,c;let f=[];try{for(var p=!0,h=mn(t),g;g=yield de(h.next()),o=g.done,!o;p=!0){a=g.value,p=!1;let m=a;if(XR(m)){let y=(c=(l=m.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content;y!==void 0&&f.push(y)}yield yield de(m)}}catch(m){i={error:m}}finally{try{!p&&!o&&(s=h.return)&&(yield de(s.call(h)))}finally{if(i)throw i.error}}this.recordHistory(n,f)})}recordHistory(t,n,r){let o=[];n.length>0&&n.every(i=>i.role!==void 0)?o=n:o.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...G_(r)):this.history.push(t),this.history.push(...o)}};var ks=class e extends Error{constructor(t){super(t.message),this.name="ApiError",this.status=t.status,Object.setPrototypeOf(this,e.prototype)}};function tN(e){let t={},n=u(e,["file"]);return n!=null&&d(t,["file"],n),t}function nN(e){let t={},n=u(e,["sdkHttpResponse"]);return n!=null&&d(t,["sdkHttpResponse"],n),t}function rN(e){let t={},n=u(e,["name"]);return n!=null&&d(t,["_url","file"],mC(n)),t}function oN(e){let t={},n=u(e,["sdkHttpResponse"]);return n!=null&&d(t,["sdkHttpResponse"],n),t}function iN(e){let t={},n=u(e,["name"]);return n!=null&&d(t,["_url","file"],mC(n)),t}function sN(e){let t={},n=u(e,["uris"]);return n!=null&&d(t,["uris"],n),t}function aN(e,t){let n={},r=u(e,["pageSize"]);t!==void 0&&r!=null&&d(t,["_query","pageSize"],r);let o=u(e,["pageToken"]);return t!==void 0&&o!=null&&d(t,["_query","pageToken"],o),n}function lN(e){let t={},n=u(e,["config"]);return n!=null&&aN(n,t),t}function uN(e){let t={},n=u(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);let r=u(e,["nextPageToken"]);r!=null&&d(t,["nextPageToken"],r);let o=u(e,["files"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),d(t,["files"],i)}return t}function cN(e){let t={},n=u(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);let r=u(e,["files"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(i=>i)),d(t,["files"],o)}return t}var gh=class extends yn{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new nr(Er.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(t.file,t.config).then(n=>n)}async download(t){await this.apiClient.downloadFile(t)}async registerFiles(t){throw new Error("registerFiles is only supported in Node.js environments.")}async _registerFiles(t){return this.registerFilesInternal(t)}async listInternal(t){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=lN(t);return i=Y("files",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{let f=c;return f.sdkHttpResponse={headers:l.headers},f})),o.then(l=>{let c=uN(l),f=new nh;return Object.assign(f,c),f})}}async createInternal(t){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=tN(t);return i=Y("upload/v1beta/files",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),o.then(l=>{let c=nN(l),f=new rh;return Object.assign(f,c),f})}}async get(t){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=iN(t);return i=Y("files/{file}",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),o.then(l=>l)}}async delete(t){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=rN(t);return i=Y("files/{file}",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{let f=c;return f.sdkHttpResponse={headers:l.headers},f})),o.then(l=>{let c=oN(l),f=new oh;return Object.assign(f,c),f})}}async registerFilesInternal(t){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=sN(t);return i=Y("files:register",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),o.then(l=>{let c=cN(l),f=new ih;return Object.assign(f,c),f})}}};function _u(e){let t={},n=u(e,["data"]);if(n!=null&&d(t,["data"],n),u(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let r=u(e,["mimeType"]);return r!=null&&d(t,["mimeType"],r),t}function dN(e){let t={},n=u(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(i=>bN(i))),d(t,["parts"],o)}let r=u(e,["role"]);return r!=null&&d(t,["role"],r),t}function fN(e){let t={};if(u(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=u(e,["fileUri"]);n!=null&&d(t,["fileUri"],n);let r=u(e,["mimeType"]);return r!=null&&d(t,["mimeType"],r),t}function pN(e){let t={},n=u(e,["id"]);n!=null&&d(t,["id"],n);let r=u(e,["args"]);r!=null&&d(t,["args"],r);let o=u(e,["name"]);if(o!=null&&d(t,["name"],o),u(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function hN(e){let t={},n=u(e,["description"]);n!=null&&d(t,["description"],n);let r=u(e,["name"]);r!=null&&d(t,["name"],r);let o=u(e,["parameters"]);o!=null&&d(t,["parameters"],o);let i=u(e,["parametersJsonSchema"]);i!=null&&d(t,["parametersJsonSchema"],i);let s=u(e,["response"]);s!=null&&d(t,["response"],s);let a=u(e,["responseJsonSchema"]);if(a!=null&&d(t,["responseJsonSchema"],a),u(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return t}function gN(e){let t={},n=u(e,["modelSelectionConfig"]);n!=null&&d(t,["modelConfig"],n);let r=u(e,["responseJsonSchema"]);r!=null&&d(t,["responseJsonSchema"],r);let o=u(e,["audioTimestamp"]);o!=null&&d(t,["audioTimestamp"],o);let i=u(e,["candidateCount"]);i!=null&&d(t,["candidateCount"],i);let s=u(e,["enableAffectiveDialog"]);s!=null&&d(t,["enableAffectiveDialog"],s);let a=u(e,["frequencyPenalty"]);a!=null&&d(t,["frequencyPenalty"],a);let l=u(e,["logprobs"]);l!=null&&d(t,["logprobs"],l);let c=u(e,["maxOutputTokens"]);c!=null&&d(t,["maxOutputTokens"],c);let f=u(e,["mediaResolution"]);f!=null&&d(t,["mediaResolution"],f);let p=u(e,["presencePenalty"]);p!=null&&d(t,["presencePenalty"],p);let h=u(e,["responseLogprobs"]);h!=null&&d(t,["responseLogprobs"],h);let g=u(e,["responseMimeType"]);g!=null&&d(t,["responseMimeType"],g);let m=u(e,["responseModalities"]);m!=null&&d(t,["responseModalities"],m);let y=u(e,["responseSchema"]);y!=null&&d(t,["responseSchema"],y);let E=u(e,["routingConfig"]);E!=null&&d(t,["routingConfig"],E);let C=u(e,["seed"]);C!=null&&d(t,["seed"],C);let T=u(e,["speechConfig"]);T!=null&&d(t,["speechConfig"],T);let D=u(e,["stopSequences"]);D!=null&&d(t,["stopSequences"],D);let A=u(e,["temperature"]);A!=null&&d(t,["temperature"],A);let b=u(e,["thinkingConfig"]);b!=null&&d(t,["thinkingConfig"],b);let O=u(e,["topK"]);O!=null&&d(t,["topK"],O);let R=u(e,["topP"]);if(R!=null&&d(t,["topP"],R),u(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function mN(e){let t={};if(u(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let n=u(e,["enableWidget"]);return n!=null&&d(t,["enableWidget"],n),t}function yN(e){let t={};if(u(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let n=u(e,["timeRangeFilter"]);return n!=null&&d(t,["timeRangeFilter"],n),t}function vN(e,t){let n={},r=u(e,["generationConfig"]);t!==void 0&&r!=null&&d(t,["setup","generationConfig"],r);let o=u(e,["responseModalities"]);t!==void 0&&o!=null&&d(t,["setup","generationConfig","responseModalities"],o);let i=u(e,["temperature"]);t!==void 0&&i!=null&&d(t,["setup","generationConfig","temperature"],i);let s=u(e,["topP"]);t!==void 0&&s!=null&&d(t,["setup","generationConfig","topP"],s);let a=u(e,["topK"]);t!==void 0&&a!=null&&d(t,["setup","generationConfig","topK"],a);let l=u(e,["maxOutputTokens"]);t!==void 0&&l!=null&&d(t,["setup","generationConfig","maxOutputTokens"],l);let c=u(e,["mediaResolution"]);t!==void 0&&c!=null&&d(t,["setup","generationConfig","mediaResolution"],c);let f=u(e,["seed"]);t!==void 0&&f!=null&&d(t,["setup","generationConfig","seed"],f);let p=u(e,["speechConfig"]);t!==void 0&&p!=null&&d(t,["setup","generationConfig","speechConfig"],Jh(p));let h=u(e,["thinkingConfig"]);t!==void 0&&h!=null&&d(t,["setup","generationConfig","thinkingConfig"],h);let g=u(e,["enableAffectiveDialog"]);t!==void 0&&g!=null&&d(t,["setup","generationConfig","enableAffectiveDialog"],g);let m=u(e,["systemInstruction"]);t!==void 0&&m!=null&&d(t,["setup","systemInstruction"],dN(mt(m)));let y=u(e,["tools"]);if(t!==void 0&&y!=null){let O=ri(y);Array.isArray(O)&&(O=O.map(R=>MN(ni(R)))),d(t,["setup","tools"],O)}let E=u(e,["sessionResumption"]);t!==void 0&&E!=null&&d(t,["setup","sessionResumption"],AN(E));let C=u(e,["inputAudioTranscription"]);t!==void 0&&C!=null&&d(t,["setup","inputAudioTranscription"],C);let T=u(e,["outputAudioTranscription"]);t!==void 0&&T!=null&&d(t,["setup","outputAudioTranscription"],T);let D=u(e,["realtimeInputConfig"]);t!==void 0&&D!=null&&d(t,["setup","realtimeInputConfig"],D);let A=u(e,["contextWindowCompression"]);t!==void 0&&A!=null&&d(t,["setup","contextWindowCompression"],A);let b=u(e,["proactivity"]);if(t!==void 0&&b!=null&&d(t,["setup","proactivity"],b),u(e,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function EN(e,t){let n={},r=u(e,["generationConfig"]);t!==void 0&&r!=null&&d(t,["setup","generationConfig"],gN(r));let o=u(e,["responseModalities"]);t!==void 0&&o!=null&&d(t,["setup","generationConfig","responseModalities"],o);let i=u(e,["temperature"]);t!==void 0&&i!=null&&d(t,["setup","generationConfig","temperature"],i);let s=u(e,["topP"]);t!==void 0&&s!=null&&d(t,["setup","generationConfig","topP"],s);let a=u(e,["topK"]);t!==void 0&&a!=null&&d(t,["setup","generationConfig","topK"],a);let l=u(e,["maxOutputTokens"]);t!==void 0&&l!=null&&d(t,["setup","generationConfig","maxOutputTokens"],l);let c=u(e,["mediaResolution"]);t!==void 0&&c!=null&&d(t,["setup","generationConfig","mediaResolution"],c);let f=u(e,["seed"]);t!==void 0&&f!=null&&d(t,["setup","generationConfig","seed"],f);let p=u(e,["speechConfig"]);t!==void 0&&p!=null&&d(t,["setup","generationConfig","speechConfig"],Jh(p));let h=u(e,["thinkingConfig"]);t!==void 0&&h!=null&&d(t,["setup","generationConfig","thinkingConfig"],h);let g=u(e,["enableAffectiveDialog"]);t!==void 0&&g!=null&&d(t,["setup","generationConfig","enableAffectiveDialog"],g);let m=u(e,["systemInstruction"]);t!==void 0&&m!=null&&d(t,["setup","systemInstruction"],mt(m));let y=u(e,["tools"]);if(t!==void 0&&y!=null){let R=ri(y);Array.isArray(R)&&(R=R.map(B=>RN(ni(B)))),d(t,["setup","tools"],R)}let E=u(e,["sessionResumption"]);t!==void 0&&E!=null&&d(t,["setup","sessionResumption"],E);let C=u(e,["inputAudioTranscription"]);t!==void 0&&C!=null&&d(t,["setup","inputAudioTranscription"],C);let T=u(e,["outputAudioTranscription"]);t!==void 0&&T!=null&&d(t,["setup","outputAudioTranscription"],T);let D=u(e,["realtimeInputConfig"]);t!==void 0&&D!=null&&d(t,["setup","realtimeInputConfig"],D);let A=u(e,["contextWindowCompression"]);t!==void 0&&A!=null&&d(t,["setup","contextWindowCompression"],A);let b=u(e,["proactivity"]);t!==void 0&&b!=null&&d(t,["setup","proactivity"],b);let O=u(e,["explicitVadSignal"]);return t!==void 0&&O!=null&&d(t,["setup","explicitVadSignal"],O),n}function _N(e,t){let n={},r=u(t,["model"]);r!=null&&d(n,["setup","model"],Te(e,r));let o=u(t,["config"]);return o!=null&&d(n,["config"],vN(o,n)),n}function CN(e,t){let n={},r=u(t,["model"]);r!=null&&d(n,["setup","model"],Te(e,r));let o=u(t,["config"]);return o!=null&&d(n,["config"],EN(o,n)),n}function IN(e){let t={},n=u(e,["musicGenerationConfig"]);return n!=null&&d(t,["musicGenerationConfig"],n),t}function TN(e){let t={},n=u(e,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(o=>o)),d(t,["weightedPrompts"],r)}return t}function wN(e){let t={},n=u(e,["media"]);if(n!=null){let c=dC(n);Array.isArray(c)&&(c=c.map(f=>_u(f))),d(t,["mediaChunks"],c)}let r=u(e,["audio"]);r!=null&&d(t,["audio"],_u(pC(r)));let o=u(e,["audioStreamEnd"]);o!=null&&d(t,["audioStreamEnd"],o);let i=u(e,["video"]);i!=null&&d(t,["video"],_u(fC(i)));let s=u(e,["text"]);s!=null&&d(t,["text"],s);let a=u(e,["activityStart"]);a!=null&&d(t,["activityStart"],a);let l=u(e,["activityEnd"]);return l!=null&&d(t,["activityEnd"],l),t}function DN(e){let t={},n=u(e,["media"]);if(n!=null){let c=dC(n);Array.isArray(c)&&(c=c.map(f=>f)),d(t,["mediaChunks"],c)}let r=u(e,["audio"]);r!=null&&d(t,["audio"],pC(r));let o=u(e,["audioStreamEnd"]);o!=null&&d(t,["audioStreamEnd"],o);let i=u(e,["video"]);i!=null&&d(t,["video"],fC(i));let s=u(e,["text"]);s!=null&&d(t,["text"],s);let a=u(e,["activityStart"]);a!=null&&d(t,["activityStart"],a);let l=u(e,["activityEnd"]);return l!=null&&d(t,["activityEnd"],l),t}function SN(e){let t={},n=u(e,["setupComplete"]);n!=null&&d(t,["setupComplete"],n);let r=u(e,["serverContent"]);r!=null&&d(t,["serverContent"],r);let o=u(e,["toolCall"]);o!=null&&d(t,["toolCall"],o);let i=u(e,["toolCallCancellation"]);i!=null&&d(t,["toolCallCancellation"],i);let s=u(e,["usageMetadata"]);s!=null&&d(t,["usageMetadata"],NN(s));let a=u(e,["goAway"]);a!=null&&d(t,["goAway"],a);let l=u(e,["sessionResumptionUpdate"]);l!=null&&d(t,["sessionResumptionUpdate"],l);let c=u(e,["voiceActivityDetectionSignal"]);c!=null&&d(t,["voiceActivityDetectionSignal"],c);let f=u(e,["voiceActivity"]);return f!=null&&d(t,["voiceActivity"],xN(f)),t}function bN(e){let t={},n=u(e,["mediaResolution"]);n!=null&&d(t,["mediaResolution"],n);let r=u(e,["codeExecutionResult"]);r!=null&&d(t,["codeExecutionResult"],r);let o=u(e,["executableCode"]);o!=null&&d(t,["executableCode"],o);let i=u(e,["fileData"]);i!=null&&d(t,["fileData"],fN(i));let s=u(e,["functionCall"]);s!=null&&d(t,["functionCall"],pN(s));let a=u(e,["functionResponse"]);a!=null&&d(t,["functionResponse"],a);let l=u(e,["inlineData"]);l!=null&&d(t,["inlineData"],_u(l));let c=u(e,["text"]);c!=null&&d(t,["text"],c);let f=u(e,["thought"]);f!=null&&d(t,["thought"],f);let p=u(e,["thoughtSignature"]);p!=null&&d(t,["thoughtSignature"],p);let h=u(e,["videoMetadata"]);return h!=null&&d(t,["videoMetadata"],h),t}function AN(e){let t={},n=u(e,["handle"]);if(n!=null&&d(t,["handle"],n),u(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function MN(e){let t={};if(u(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let n=u(e,["computerUse"]);n!=null&&d(t,["computerUse"],n);let r=u(e,["fileSearch"]);r!=null&&d(t,["fileSearch"],r);let o=u(e,["codeExecution"]);if(o!=null&&d(t,["codeExecution"],o),u(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let i=u(e,["functionDeclarations"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(p=>p)),d(t,["functionDeclarations"],f)}let s=u(e,["googleMaps"]);s!=null&&d(t,["googleMaps"],mN(s));let a=u(e,["googleSearch"]);a!=null&&d(t,["googleSearch"],yN(a));let l=u(e,["googleSearchRetrieval"]);l!=null&&d(t,["googleSearchRetrieval"],l);let c=u(e,["urlContext"]);return c!=null&&d(t,["urlContext"],c),t}function RN(e){let t={},n=u(e,["retrieval"]);n!=null&&d(t,["retrieval"],n);let r=u(e,["computerUse"]);if(r!=null&&d(t,["computerUse"],r),u(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");let o=u(e,["codeExecution"]);o!=null&&d(t,["codeExecution"],o);let i=u(e,["enterpriseWebSearch"]);i!=null&&d(t,["enterpriseWebSearch"],i);let s=u(e,["functionDeclarations"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(h=>hN(h))),d(t,["functionDeclarations"],p)}let a=u(e,["googleMaps"]);a!=null&&d(t,["googleMaps"],a);let l=u(e,["googleSearch"]);l!=null&&d(t,["googleSearch"],l);let c=u(e,["googleSearchRetrieval"]);c!=null&&d(t,["googleSearchRetrieval"],c);let f=u(e,["urlContext"]);return f!=null&&d(t,["urlContext"],f),t}function NN(e){let t={},n=u(e,["promptTokenCount"]);n!=null&&d(t,["promptTokenCount"],n);let r=u(e,["cachedContentTokenCount"]);r!=null&&d(t,["cachedContentTokenCount"],r);let o=u(e,["candidatesTokenCount"]);o!=null&&d(t,["responseTokenCount"],o);let i=u(e,["toolUsePromptTokenCount"]);i!=null&&d(t,["toolUsePromptTokenCount"],i);let s=u(e,["thoughtsTokenCount"]);s!=null&&d(t,["thoughtsTokenCount"],s);let a=u(e,["totalTokenCount"]);a!=null&&d(t,["totalTokenCount"],a);let l=u(e,["promptTokensDetails"]);if(l!=null){let g=l;Array.isArray(g)&&(g=g.map(m=>m)),d(t,["promptTokensDetails"],g)}let c=u(e,["cacheTokensDetails"]);if(c!=null){let g=c;Array.isArray(g)&&(g=g.map(m=>m)),d(t,["cacheTokensDetails"],g)}let f=u(e,["candidatesTokensDetails"]);if(f!=null){let g=f;Array.isArray(g)&&(g=g.map(m=>m)),d(t,["responseTokensDetails"],g)}let p=u(e,["toolUsePromptTokensDetails"]);if(p!=null){let g=p;Array.isArray(g)&&(g=g.map(m=>m)),d(t,["toolUsePromptTokensDetails"],g)}let h=u(e,["trafficType"]);return h!=null&&d(t,["trafficType"],h),t}function xN(e){let t={},n=u(e,["type"]);return n!=null&&d(t,["voiceActivityType"],n),t}function PN(e,t){let n={},r=u(e,["data"]);if(r!=null&&d(n,["data"],r),u(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let o=u(e,["mimeType"]);return o!=null&&d(n,["mimeType"],o),n}function kN(e,t){let n={},r=u(e,["content"]);r!=null&&d(n,["content"],r);let o=u(e,["citationMetadata"]);o!=null&&d(n,["citationMetadata"],ON(o));let i=u(e,["tokenCount"]);i!=null&&d(n,["tokenCount"],i);let s=u(e,["finishReason"]);s!=null&&d(n,["finishReason"],s);let a=u(e,["avgLogprobs"]);a!=null&&d(n,["avgLogprobs"],a);let l=u(e,["groundingMetadata"]);l!=null&&d(n,["groundingMetadata"],l);let c=u(e,["index"]);c!=null&&d(n,["index"],c);let f=u(e,["logprobsResult"]);f!=null&&d(n,["logprobsResult"],f);let p=u(e,["safetyRatings"]);if(p!=null){let g=p;Array.isArray(g)&&(g=g.map(m=>m)),d(n,["safetyRatings"],g)}let h=u(e,["urlContextMetadata"]);return h!=null&&d(n,["urlContextMetadata"],h),n}function ON(e,t){let n={},r=u(e,["citationSources"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(i=>i)),d(n,["citations"],o)}return n}function FN(e,t,n){let r={},o=u(t,["model"]);o!=null&&d(r,["_url","model"],Te(e,o));let i=u(t,["contents"]);if(i!=null){let s=Jt(i);Array.isArray(s)&&(s=s.map(a=>a)),d(r,["contents"],s)}return r}function LN(e,t){let n={},r=u(e,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);let o=u(e,["tokensInfo"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),d(n,["tokensInfo"],i)}return n}function UN(e,t){let n={},r=u(e,["values"]);r!=null&&d(n,["values"],r);let o=u(e,["statistics"]);return o!=null&&d(n,["statistics"],BN(o)),n}function BN(e,t){let n={},r=u(e,["truncated"]);r!=null&&d(n,["truncated"],r);let o=u(e,["token_count"]);return o!=null&&d(n,["tokenCount"],o),n}function Ju(e,t){let n={},r=u(e,["parts"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>Jx(s))),d(n,["parts"],i)}let o=u(e,["role"]);return o!=null&&d(n,["role"],o),n}function VN(e,t){let n={},r=u(e,["controlType"]);r!=null&&d(n,["controlType"],r);let o=u(e,["enableControlImageComputation"]);return o!=null&&d(n,["computeControl"],o),n}function HN(e,t){let n={};if(u(e,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(u(e,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(u(e,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return n}function $N(e,t,n){let r={},o=u(e,["systemInstruction"]);t!==void 0&&o!=null&&d(t,["systemInstruction"],mt(o));let i=u(e,["tools"]);if(t!==void 0&&i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>bC(l))),d(t,["tools"],a)}let s=u(e,["generationConfig"]);return t!==void 0&&s!=null&&d(t,["generationConfig"],Px(s)),r}function GN(e,t,n){let r={},o=u(t,["model"]);o!=null&&d(r,["_url","model"],Te(e,o));let i=u(t,["contents"]);if(i!=null){let a=Jt(i);Array.isArray(a)&&(a=a.map(l=>Ju(l))),d(r,["contents"],a)}let s=u(t,["config"]);return s!=null&&HN(s),r}function zN(e,t,n){let r={},o=u(t,["model"]);o!=null&&d(r,["_url","model"],Te(e,o));let i=u(t,["contents"]);if(i!=null){let a=Jt(i);Array.isArray(a)&&(a=a.map(l=>l)),d(r,["contents"],a)}let s=u(t,["config"]);return s!=null&&$N(s,r),r}function qN(e,t){let n={},r=u(e,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);let o=u(e,["totalTokens"]);o!=null&&d(n,["totalTokens"],o);let i=u(e,["cachedContentTokenCount"]);return i!=null&&d(n,["cachedContentTokenCount"],i),n}function jN(e,t){let n={},r=u(e,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);let o=u(e,["totalTokens"]);return o!=null&&d(n,["totalTokens"],o),n}function WN(e,t,n){let r={},o=u(t,["model"]);return o!=null&&d(r,["_url","name"],Te(e,o)),r}function JN(e,t,n){let r={},o=u(t,["model"]);return o!=null&&d(r,["_url","name"],Te(e,o)),r}function YN(e,t){let n={},r=u(e,["sdkHttpResponse"]);return r!=null&&d(n,["sdkHttpResponse"],r),n}function ZN(e,t){let n={},r=u(e,["sdkHttpResponse"]);return r!=null&&d(n,["sdkHttpResponse"],r),n}function KN(e,t,n){let r={},o=u(e,["outputGcsUri"]);t!==void 0&&o!=null&&d(t,["parameters","storageUri"],o);let i=u(e,["negativePrompt"]);t!==void 0&&i!=null&&d(t,["parameters","negativePrompt"],i);let s=u(e,["numberOfImages"]);t!==void 0&&s!=null&&d(t,["parameters","sampleCount"],s);let a=u(e,["aspectRatio"]);t!==void 0&&a!=null&&d(t,["parameters","aspectRatio"],a);let l=u(e,["guidanceScale"]);t!==void 0&&l!=null&&d(t,["parameters","guidanceScale"],l);let c=u(e,["seed"]);t!==void 0&&c!=null&&d(t,["parameters","seed"],c);let f=u(e,["safetyFilterLevel"]);t!==void 0&&f!=null&&d(t,["parameters","safetySetting"],f);let p=u(e,["personGeneration"]);t!==void 0&&p!=null&&d(t,["parameters","personGeneration"],p);let h=u(e,["includeSafetyAttributes"]);t!==void 0&&h!=null&&d(t,["parameters","includeSafetyAttributes"],h);let g=u(e,["includeRaiReason"]);t!==void 0&&g!=null&&d(t,["parameters","includeRaiReason"],g);let m=u(e,["language"]);t!==void 0&&m!=null&&d(t,["parameters","language"],m);let y=u(e,["outputMimeType"]);t!==void 0&&y!=null&&d(t,["parameters","outputOptions","mimeType"],y);let E=u(e,["outputCompressionQuality"]);t!==void 0&&E!=null&&d(t,["parameters","outputOptions","compressionQuality"],E);let C=u(e,["addWatermark"]);t!==void 0&&C!=null&&d(t,["parameters","addWatermark"],C);let T=u(e,["labels"]);t!==void 0&&T!=null&&d(t,["labels"],T);let D=u(e,["editMode"]);t!==void 0&&D!=null&&d(t,["parameters","editMode"],D);let A=u(e,["baseSteps"]);return t!==void 0&&A!=null&&d(t,["parameters","editConfig","baseSteps"],A),r}function QN(e,t,n){let r={},o=u(t,["model"]);o!=null&&d(r,["_url","model"],Te(e,o));let i=u(t,["prompt"]);i!=null&&d(r,["instances[0]","prompt"],i);let s=u(t,["referenceImages"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(c=>eP(c))),d(r,["instances[0]","referenceImages"],l)}let a=u(t,["config"]);return a!=null&&KN(a,r),r}function XN(e,t){let n={},r=u(e,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);let o=u(e,["predictions"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>Yu(s))),d(n,["generatedImages"],i)}return n}function ex(e,t,n){let r={},o=u(e,["taskType"]);t!==void 0&&o!=null&&d(t,["requests[]","taskType"],o);let i=u(e,["title"]);t!==void 0&&i!=null&&d(t,["requests[]","title"],i);let s=u(e,["outputDimensionality"]);if(t!==void 0&&s!=null&&d(t,["requests[]","outputDimensionality"],s),u(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(u(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return r}function tx(e,t,n){let r={},o=u(e,["taskType"]);t!==void 0&&o!=null&&d(t,["instances[]","task_type"],o);let i=u(e,["title"]);t!==void 0&&i!=null&&d(t,["instances[]","title"],i);let s=u(e,["outputDimensionality"]);t!==void 0&&s!=null&&d(t,["parameters","outputDimensionality"],s);let a=u(e,["mimeType"]);t!==void 0&&a!=null&&d(t,["instances[]","mimeType"],a);let l=u(e,["autoTruncate"]);return t!==void 0&&l!=null&&d(t,["parameters","autoTruncate"],l),r}function nx(e,t,n){let r={},o=u(t,["model"]);o!=null&&d(r,["_url","model"],Te(e,o));let i=u(t,["contents"]);if(i!=null){let l=qh(e,i);Array.isArray(l)&&(l=l.map(c=>c)),d(r,["requests[]","content"],l)}let s=u(t,["config"]);s!=null&&ex(s,r);let a=u(t,["model"]);return a!==void 0&&d(r,["requests[]","model"],Te(e,a)),r}function rx(e,t,n){let r={},o=u(t,["model"]);o!=null&&d(r,["_url","model"],Te(e,o));let i=u(t,["contents"]);if(i!=null){let a=qh(e,i);Array.isArray(a)&&(a=a.map(l=>l)),d(r,["instances[]","content"],a)}let s=u(t,["config"]);return s!=null&&tx(s,r),r}function ox(e,t){let n={},r=u(e,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);let o=u(e,["embeddings"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>a)),d(n,["embeddings"],s)}let i=u(e,["metadata"]);return i!=null&&d(n,["metadata"],i),n}function ix(e,t){let n={},r=u(e,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);let o=u(e,["predictions[]","embeddings"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>UN(a))),d(n,["embeddings"],s)}let i=u(e,["metadata"]);return i!=null&&d(n,["metadata"],i),n}function sx(e,t){let n={},r=u(e,["endpoint"]);r!=null&&d(n,["name"],r);let o=u(e,["deployedModelId"]);return o!=null&&d(n,["deployedModelId"],o),n}function ax(e,t){let n={};if(u(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let r=u(e,["fileUri"]);r!=null&&d(n,["fileUri"],r);let o=u(e,["mimeType"]);return o!=null&&d(n,["mimeType"],o),n}function lx(e,t){let n={},r=u(e,["id"]);r!=null&&d(n,["id"],r);let o=u(e,["args"]);o!=null&&d(n,["args"],o);let i=u(e,["name"]);if(i!=null&&d(n,["name"],i),u(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return n}function ux(e,t){let n={},r=u(e,["allowedFunctionNames"]);r!=null&&d(n,["allowedFunctionNames"],r);let o=u(e,["mode"]);if(o!=null&&d(n,["mode"],o),u(e,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return n}function cx(e,t){let n={},r=u(e,["description"]);r!=null&&d(n,["description"],r);let o=u(e,["name"]);o!=null&&d(n,["name"],o);let i=u(e,["parameters"]);i!=null&&d(n,["parameters"],i);let s=u(e,["parametersJsonSchema"]);s!=null&&d(n,["parametersJsonSchema"],s);let a=u(e,["response"]);a!=null&&d(n,["response"],a);let l=u(e,["responseJsonSchema"]);if(l!=null&&d(n,["responseJsonSchema"],l),u(e,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return n}function dx(e,t,n,r){let o={},i=u(t,["systemInstruction"]);n!==void 0&&i!=null&&d(n,["systemInstruction"],Ju(mt(i)));let s=u(t,["temperature"]);s!=null&&d(o,["temperature"],s);let a=u(t,["topP"]);a!=null&&d(o,["topP"],a);let l=u(t,["topK"]);l!=null&&d(o,["topK"],l);let c=u(t,["candidateCount"]);c!=null&&d(o,["candidateCount"],c);let f=u(t,["maxOutputTokens"]);f!=null&&d(o,["maxOutputTokens"],f);let p=u(t,["stopSequences"]);p!=null&&d(o,["stopSequences"],p);let h=u(t,["responseLogprobs"]);h!=null&&d(o,["responseLogprobs"],h);let g=u(t,["logprobs"]);g!=null&&d(o,["logprobs"],g);let m=u(t,["presencePenalty"]);m!=null&&d(o,["presencePenalty"],m);let y=u(t,["frequencyPenalty"]);y!=null&&d(o,["frequencyPenalty"],y);let E=u(t,["seed"]);E!=null&&d(o,["seed"],E);let C=u(t,["responseMimeType"]);C!=null&&d(o,["responseMimeType"],C);let T=u(t,["responseSchema"]);T!=null&&d(o,["responseSchema"],jh(T));let D=u(t,["responseJsonSchema"]);if(D!=null&&d(o,["responseJsonSchema"],D),u(t,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(u(t,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");let A=u(t,["safetySettings"]);if(n!==void 0&&A!=null){let ee=A;Array.isArray(ee)&&(ee=ee.map(H=>tP(H))),d(n,["safetySettings"],ee)}let b=u(t,["tools"]);if(n!==void 0&&b!=null){let ee=ri(b);Array.isArray(ee)&&(ee=ee.map(H=>lP(ni(H)))),d(n,["tools"],ee)}let O=u(t,["toolConfig"]);if(n!==void 0&&O!=null&&d(n,["toolConfig"],aP(O)),u(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");let R=u(t,["cachedContent"]);n!==void 0&&R!=null&&d(n,["cachedContent"],rr(e,R));let B=u(t,["responseModalities"]);B!=null&&d(o,["responseModalities"],B);let G=u(t,["mediaResolution"]);G!=null&&d(o,["mediaResolution"],G);let S=u(t,["speechConfig"]);if(S!=null&&d(o,["speechConfig"],Wh(S)),u(t,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");let k=u(t,["thinkingConfig"]);k!=null&&d(o,["thinkingConfig"],k);let _=u(t,["imageConfig"]);_!=null&&d(o,["imageConfig"],Ux(_));let L=u(t,["enableEnhancedCivicAnswers"]);if(L!=null&&d(o,["enableEnhancedCivicAnswers"],L),u(t,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return o}function fx(e,t,n,r){let o={},i=u(t,["systemInstruction"]);n!==void 0&&i!=null&&d(n,["systemInstruction"],mt(i));let s=u(t,["temperature"]);s!=null&&d(o,["temperature"],s);let a=u(t,["topP"]);a!=null&&d(o,["topP"],a);let l=u(t,["topK"]);l!=null&&d(o,["topK"],l);let c=u(t,["candidateCount"]);c!=null&&d(o,["candidateCount"],c);let f=u(t,["maxOutputTokens"]);f!=null&&d(o,["maxOutputTokens"],f);let p=u(t,["stopSequences"]);p!=null&&d(o,["stopSequences"],p);let h=u(t,["responseLogprobs"]);h!=null&&d(o,["responseLogprobs"],h);let g=u(t,["logprobs"]);g!=null&&d(o,["logprobs"],g);let m=u(t,["presencePenalty"]);m!=null&&d(o,["presencePenalty"],m);let y=u(t,["frequencyPenalty"]);y!=null&&d(o,["frequencyPenalty"],y);let E=u(t,["seed"]);E!=null&&d(o,["seed"],E);let C=u(t,["responseMimeType"]);C!=null&&d(o,["responseMimeType"],C);let T=u(t,["responseSchema"]);T!=null&&d(o,["responseSchema"],jh(T));let D=u(t,["responseJsonSchema"]);D!=null&&d(o,["responseJsonSchema"],D);let A=u(t,["routingConfig"]);A!=null&&d(o,["routingConfig"],A);let b=u(t,["modelSelectionConfig"]);b!=null&&d(o,["modelConfig"],b);let O=u(t,["safetySettings"]);if(n!==void 0&&O!=null){let ne=O;Array.isArray(ne)&&(ne=ne.map(P=>P)),d(n,["safetySettings"],ne)}let R=u(t,["tools"]);if(n!==void 0&&R!=null){let ne=ri(R);Array.isArray(ne)&&(ne=ne.map(P=>bC(ni(P)))),d(n,["tools"],ne)}let B=u(t,["toolConfig"]);n!==void 0&&B!=null&&d(n,["toolConfig"],B);let G=u(t,["labels"]);n!==void 0&&G!=null&&d(n,["labels"],G);let S=u(t,["cachedContent"]);n!==void 0&&S!=null&&d(n,["cachedContent"],rr(e,S));let k=u(t,["responseModalities"]);k!=null&&d(o,["responseModalities"],k);let _=u(t,["mediaResolution"]);_!=null&&d(o,["mediaResolution"],_);let L=u(t,["speechConfig"]);L!=null&&d(o,["speechConfig"],Wh(L));let ee=u(t,["audioTimestamp"]);ee!=null&&d(o,["audioTimestamp"],ee);let H=u(t,["thinkingConfig"]);H!=null&&d(o,["thinkingConfig"],H);let ge=u(t,["imageConfig"]);if(ge!=null&&d(o,["imageConfig"],Bx(ge)),u(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");let q=u(t,["modelArmorConfig"]);return n!==void 0&&q!=null&&d(n,["modelArmorConfig"],q),o}function z_(e,t,n){let r={},o=u(t,["model"]);o!=null&&d(r,["_url","model"],Te(e,o));let i=u(t,["contents"]);if(i!=null){let a=Jt(i);Array.isArray(a)&&(a=a.map(l=>Ju(l))),d(r,["contents"],a)}let s=u(t,["config"]);return s!=null&&d(r,["generationConfig"],dx(e,s,r)),r}function q_(e,t,n){let r={},o=u(t,["model"]);o!=null&&d(r,["_url","model"],Te(e,o));let i=u(t,["contents"]);if(i!=null){let a=Jt(i);Array.isArray(a)&&(a=a.map(l=>l)),d(r,["contents"],a)}let s=u(t,["config"]);return s!=null&&d(r,["generationConfig"],fx(e,s,r)),r}function j_(e,t){let n={},r=u(e,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);let o=u(e,["candidates"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(f=>kN(f))),d(n,["candidates"],c)}let i=u(e,["modelVersion"]);i!=null&&d(n,["modelVersion"],i);let s=u(e,["promptFeedback"]);s!=null&&d(n,["promptFeedback"],s);let a=u(e,["responseId"]);a!=null&&d(n,["responseId"],a);let l=u(e,["usageMetadata"]);return l!=null&&d(n,["usageMetadata"],l),n}function W_(e,t){let n={},r=u(e,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);let o=u(e,["candidates"]);if(o!=null){let f=o;Array.isArray(f)&&(f=f.map(p=>p)),d(n,["candidates"],f)}let i=u(e,["createTime"]);i!=null&&d(n,["createTime"],i);let s=u(e,["modelVersion"]);s!=null&&d(n,["modelVersion"],s);let a=u(e,["promptFeedback"]);a!=null&&d(n,["promptFeedback"],a);let l=u(e,["responseId"]);l!=null&&d(n,["responseId"],l);let c=u(e,["usageMetadata"]);return c!=null&&d(n,["usageMetadata"],c),n}function px(e,t,n){let r={};if(u(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(u(e,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");let o=u(e,["numberOfImages"]);t!==void 0&&o!=null&&d(t,["parameters","sampleCount"],o);let i=u(e,["aspectRatio"]);t!==void 0&&i!=null&&d(t,["parameters","aspectRatio"],i);let s=u(e,["guidanceScale"]);if(t!==void 0&&s!=null&&d(t,["parameters","guidanceScale"],s),u(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");let a=u(e,["safetyFilterLevel"]);t!==void 0&&a!=null&&d(t,["parameters","safetySetting"],a);let l=u(e,["personGeneration"]);t!==void 0&&l!=null&&d(t,["parameters","personGeneration"],l);let c=u(e,["includeSafetyAttributes"]);t!==void 0&&c!=null&&d(t,["parameters","includeSafetyAttributes"],c);let f=u(e,["includeRaiReason"]);t!==void 0&&f!=null&&d(t,["parameters","includeRaiReason"],f);let p=u(e,["language"]);t!==void 0&&p!=null&&d(t,["parameters","language"],p);let h=u(e,["outputMimeType"]);t!==void 0&&h!=null&&d(t,["parameters","outputOptions","mimeType"],h);let g=u(e,["outputCompressionQuality"]);if(t!==void 0&&g!=null&&d(t,["parameters","outputOptions","compressionQuality"],g),u(e,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(u(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");let m=u(e,["imageSize"]);if(t!==void 0&&m!=null&&d(t,["parameters","sampleImageSize"],m),u(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return r}function hx(e,t,n){let r={},o=u(e,["outputGcsUri"]);t!==void 0&&o!=null&&d(t,["parameters","storageUri"],o);let i=u(e,["negativePrompt"]);t!==void 0&&i!=null&&d(t,["parameters","negativePrompt"],i);let s=u(e,["numberOfImages"]);t!==void 0&&s!=null&&d(t,["parameters","sampleCount"],s);let a=u(e,["aspectRatio"]);t!==void 0&&a!=null&&d(t,["parameters","aspectRatio"],a);let l=u(e,["guidanceScale"]);t!==void 0&&l!=null&&d(t,["parameters","guidanceScale"],l);let c=u(e,["seed"]);t!==void 0&&c!=null&&d(t,["parameters","seed"],c);let f=u(e,["safetyFilterLevel"]);t!==void 0&&f!=null&&d(t,["parameters","safetySetting"],f);let p=u(e,["personGeneration"]);t!==void 0&&p!=null&&d(t,["parameters","personGeneration"],p);let h=u(e,["includeSafetyAttributes"]);t!==void 0&&h!=null&&d(t,["parameters","includeSafetyAttributes"],h);let g=u(e,["includeRaiReason"]);t!==void 0&&g!=null&&d(t,["parameters","includeRaiReason"],g);let m=u(e,["language"]);t!==void 0&&m!=null&&d(t,["parameters","language"],m);let y=u(e,["outputMimeType"]);t!==void 0&&y!=null&&d(t,["parameters","outputOptions","mimeType"],y);let E=u(e,["outputCompressionQuality"]);t!==void 0&&E!=null&&d(t,["parameters","outputOptions","compressionQuality"],E);let C=u(e,["addWatermark"]);t!==void 0&&C!=null&&d(t,["parameters","addWatermark"],C);let T=u(e,["labels"]);t!==void 0&&T!=null&&d(t,["labels"],T);let D=u(e,["imageSize"]);t!==void 0&&D!=null&&d(t,["parameters","sampleImageSize"],D);let A=u(e,["enhancePrompt"]);return t!==void 0&&A!=null&&d(t,["parameters","enhancePrompt"],A),r}function gx(e,t,n){let r={},o=u(t,["model"]);o!=null&&d(r,["_url","model"],Te(e,o));let i=u(t,["prompt"]);i!=null&&d(r,["instances[0]","prompt"],i);let s=u(t,["config"]);return s!=null&&px(s,r),r}function mx(e,t,n){let r={},o=u(t,["model"]);o!=null&&d(r,["_url","model"],Te(e,o));let i=u(t,["prompt"]);i!=null&&d(r,["instances[0]","prompt"],i);let s=u(t,["config"]);return s!=null&&hx(s,r),r}function yx(e,t){let n={},r=u(e,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);let o=u(e,["predictions"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>Mx(a))),d(n,["generatedImages"],s)}let i=u(e,["positivePromptSafetyAttributes"]);return i!=null&&d(n,["positivePromptSafetyAttributes"],DC(i)),n}function vx(e,t){let n={},r=u(e,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);let o=u(e,["predictions"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>Yu(a))),d(n,["generatedImages"],s)}let i=u(e,["positivePromptSafetyAttributes"]);return i!=null&&d(n,["positivePromptSafetyAttributes"],SC(i)),n}function Ex(e,t,n){let r={},o=u(e,["numberOfVideos"]);if(t!==void 0&&o!=null&&d(t,["parameters","sampleCount"],o),u(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(u(e,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");let i=u(e,["durationSeconds"]);if(t!==void 0&&i!=null&&d(t,["parameters","durationSeconds"],i),u(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");let s=u(e,["aspectRatio"]);t!==void 0&&s!=null&&d(t,["parameters","aspectRatio"],s);let a=u(e,["resolution"]);t!==void 0&&a!=null&&d(t,["parameters","resolution"],a);let l=u(e,["personGeneration"]);if(t!==void 0&&l!=null&&d(t,["parameters","personGeneration"],l),u(e,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");let c=u(e,["negativePrompt"]);t!==void 0&&c!=null&&d(t,["parameters","negativePrompt"],c);let f=u(e,["enhancePrompt"]);if(t!==void 0&&f!=null&&d(t,["parameters","enhancePrompt"],f),u(e,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");let p=u(e,["lastFrame"]);t!==void 0&&p!=null&&d(t,["instances[0]","lastFrame"],Zu(p));let h=u(e,["referenceImages"]);if(t!==void 0&&h!=null){let g=h;Array.isArray(g)&&(g=g.map(m=>CP(m))),d(t,["instances[0]","referenceImages"],g)}if(u(e,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(u(e,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return r}function _x(e,t,n){let r={},o=u(e,["numberOfVideos"]);t!==void 0&&o!=null&&d(t,["parameters","sampleCount"],o);let i=u(e,["outputGcsUri"]);t!==void 0&&i!=null&&d(t,["parameters","storageUri"],i);let s=u(e,["fps"]);t!==void 0&&s!=null&&d(t,["parameters","fps"],s);let a=u(e,["durationSeconds"]);t!==void 0&&a!=null&&d(t,["parameters","durationSeconds"],a);let l=u(e,["seed"]);t!==void 0&&l!=null&&d(t,["parameters","seed"],l);let c=u(e,["aspectRatio"]);t!==void 0&&c!=null&&d(t,["parameters","aspectRatio"],c);let f=u(e,["resolution"]);t!==void 0&&f!=null&&d(t,["parameters","resolution"],f);let p=u(e,["personGeneration"]);t!==void 0&&p!=null&&d(t,["parameters","personGeneration"],p);let h=u(e,["pubsubTopic"]);t!==void 0&&h!=null&&d(t,["parameters","pubsubTopic"],h);let g=u(e,["negativePrompt"]);t!==void 0&&g!=null&&d(t,["parameters","negativePrompt"],g);let m=u(e,["enhancePrompt"]);t!==void 0&&m!=null&&d(t,["parameters","enhancePrompt"],m);let y=u(e,["generateAudio"]);t!==void 0&&y!=null&&d(t,["parameters","generateAudio"],y);let E=u(e,["lastFrame"]);t!==void 0&&E!=null&&d(t,["instances[0]","lastFrame"],vn(E));let C=u(e,["referenceImages"]);if(t!==void 0&&C!=null){let A=C;Array.isArray(A)&&(A=A.map(b=>IP(b))),d(t,["instances[0]","referenceImages"],A)}let T=u(e,["mask"]);t!==void 0&&T!=null&&d(t,["instances[0]","mask"],_P(T));let D=u(e,["compressionQuality"]);return t!==void 0&&D!=null&&d(t,["parameters","compressionQuality"],D),r}function Cx(e,t){let n={},r=u(e,["name"]);r!=null&&d(n,["name"],r);let o=u(e,["metadata"]);o!=null&&d(n,["metadata"],o);let i=u(e,["done"]);i!=null&&d(n,["done"],i);let s=u(e,["error"]);s!=null&&d(n,["error"],s);let a=u(e,["response","generateVideoResponse"]);return a!=null&&d(n,["response"],Dx(a)),n}function Ix(e,t){let n={},r=u(e,["name"]);r!=null&&d(n,["name"],r);let o=u(e,["metadata"]);o!=null&&d(n,["metadata"],o);let i=u(e,["done"]);i!=null&&d(n,["done"],i);let s=u(e,["error"]);s!=null&&d(n,["error"],s);let a=u(e,["response"]);return a!=null&&d(n,["response"],Sx(a)),n}function Tx(e,t,n){let r={},o=u(t,["model"]);o!=null&&d(r,["_url","model"],Te(e,o));let i=u(t,["prompt"]);i!=null&&d(r,["instances[0]","prompt"],i);let s=u(t,["image"]);s!=null&&d(r,["instances[0]","image"],Zu(s));let a=u(t,["video"]);a!=null&&d(r,["instances[0]","video"],AC(a));let l=u(t,["source"]);l!=null&&bx(l,r);let c=u(t,["config"]);return c!=null&&Ex(c,r),r}function wx(e,t,n){let r={},o=u(t,["model"]);o!=null&&d(r,["_url","model"],Te(e,o));let i=u(t,["prompt"]);i!=null&&d(r,["instances[0]","prompt"],i);let s=u(t,["image"]);s!=null&&d(r,["instances[0]","image"],vn(s));let a=u(t,["video"]);a!=null&&d(r,["instances[0]","video"],MC(a));let l=u(t,["source"]);l!=null&&Ax(l,r);let c=u(t,["config"]);return c!=null&&_x(c,r),r}function Dx(e,t){let n={},r=u(e,["generatedSamples"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>Nx(a))),d(n,["generatedVideos"],s)}let o=u(e,["raiMediaFilteredCount"]);o!=null&&d(n,["raiMediaFilteredCount"],o);let i=u(e,["raiMediaFilteredReasons"]);return i!=null&&d(n,["raiMediaFilteredReasons"],i),n}function Sx(e,t){let n={},r=u(e,["videos"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(a=>xx(a))),d(n,["generatedVideos"],s)}let o=u(e,["raiMediaFilteredCount"]);o!=null&&d(n,["raiMediaFilteredCount"],o);let i=u(e,["raiMediaFilteredReasons"]);return i!=null&&d(n,["raiMediaFilteredReasons"],i),n}function bx(e,t,n){let r={},o=u(e,["prompt"]);t!==void 0&&o!=null&&d(t,["instances[0]","prompt"],o);let i=u(e,["image"]);t!==void 0&&i!=null&&d(t,["instances[0]","image"],Zu(i));let s=u(e,["video"]);return t!==void 0&&s!=null&&d(t,["instances[0]","video"],AC(s)),r}function Ax(e,t,n){let r={},o=u(e,["prompt"]);t!==void 0&&o!=null&&d(t,["instances[0]","prompt"],o);let i=u(e,["image"]);t!==void 0&&i!=null&&d(t,["instances[0]","image"],vn(i));let s=u(e,["video"]);return t!==void 0&&s!=null&&d(t,["instances[0]","video"],MC(s)),r}function Mx(e,t){let n={},r=u(e,["_self"]);r!=null&&d(n,["image"],Vx(r));let o=u(e,["raiFilteredReason"]);o!=null&&d(n,["raiFilteredReason"],o);let i=u(e,["_self"]);return i!=null&&d(n,["safetyAttributes"],DC(i)),n}function Yu(e,t){let n={},r=u(e,["_self"]);r!=null&&d(n,["image"],wC(r));let o=u(e,["raiFilteredReason"]);o!=null&&d(n,["raiFilteredReason"],o);let i=u(e,["_self"]);i!=null&&d(n,["safetyAttributes"],SC(i));let s=u(e,["prompt"]);return s!=null&&d(n,["enhancedPrompt"],s),n}function Rx(e,t){let n={},r=u(e,["_self"]);r!=null&&d(n,["mask"],wC(r));let o=u(e,["labels"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),d(n,["labels"],i)}return n}function Nx(e,t){let n={},r=u(e,["video"]);return r!=null&&d(n,["video"],vP(r)),n}function xx(e,t){let n={},r=u(e,["_self"]);return r!=null&&d(n,["video"],EP(r)),n}function Px(e,t){let n={},r=u(e,["modelSelectionConfig"]);r!=null&&d(n,["modelConfig"],r);let o=u(e,["responseJsonSchema"]);o!=null&&d(n,["responseJsonSchema"],o);let i=u(e,["audioTimestamp"]);i!=null&&d(n,["audioTimestamp"],i);let s=u(e,["candidateCount"]);s!=null&&d(n,["candidateCount"],s);let a=u(e,["enableAffectiveDialog"]);a!=null&&d(n,["enableAffectiveDialog"],a);let l=u(e,["frequencyPenalty"]);l!=null&&d(n,["frequencyPenalty"],l);let c=u(e,["logprobs"]);c!=null&&d(n,["logprobs"],c);let f=u(e,["maxOutputTokens"]);f!=null&&d(n,["maxOutputTokens"],f);let p=u(e,["mediaResolution"]);p!=null&&d(n,["mediaResolution"],p);let h=u(e,["presencePenalty"]);h!=null&&d(n,["presencePenalty"],h);let g=u(e,["responseLogprobs"]);g!=null&&d(n,["responseLogprobs"],g);let m=u(e,["responseMimeType"]);m!=null&&d(n,["responseMimeType"],m);let y=u(e,["responseModalities"]);y!=null&&d(n,["responseModalities"],y);let E=u(e,["responseSchema"]);E!=null&&d(n,["responseSchema"],E);let C=u(e,["routingConfig"]);C!=null&&d(n,["routingConfig"],C);let T=u(e,["seed"]);T!=null&&d(n,["seed"],T);let D=u(e,["speechConfig"]);D!=null&&d(n,["speechConfig"],D);let A=u(e,["stopSequences"]);A!=null&&d(n,["stopSequences"],A);let b=u(e,["temperature"]);b!=null&&d(n,["temperature"],b);let O=u(e,["thinkingConfig"]);O!=null&&d(n,["thinkingConfig"],O);let R=u(e,["topK"]);R!=null&&d(n,["topK"],R);let B=u(e,["topP"]);if(B!=null&&d(n,["topP"],B),u(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return n}function kx(e,t,n){let r={},o=u(t,["model"]);return o!=null&&d(r,["_url","name"],Te(e,o)),r}function Ox(e,t,n){let r={},o=u(t,["model"]);return o!=null&&d(r,["_url","name"],Te(e,o)),r}function Fx(e,t){let n={};if(u(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let r=u(e,["enableWidget"]);return r!=null&&d(n,["enableWidget"],r),n}function Lx(e,t){let n={};if(u(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let r=u(e,["timeRangeFilter"]);return r!=null&&d(n,["timeRangeFilter"],r),n}function Ux(e,t){let n={},r=u(e,["aspectRatio"]);r!=null&&d(n,["aspectRatio"],r);let o=u(e,["imageSize"]);if(o!=null&&d(n,["imageSize"],o),u(e,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(u(e,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(u(e,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return n}function Bx(e,t){let n={},r=u(e,["aspectRatio"]);r!=null&&d(n,["aspectRatio"],r);let o=u(e,["imageSize"]);o!=null&&d(n,["imageSize"],o);let i=u(e,["personGeneration"]);i!=null&&d(n,["personGeneration"],i);let s=u(e,["outputMimeType"]);s!=null&&d(n,["imageOutputOptions","mimeType"],s);let a=u(e,["outputCompressionQuality"]);return a!=null&&d(n,["imageOutputOptions","compressionQuality"],a),n}function Vx(e,t){let n={},r=u(e,["bytesBase64Encoded"]);r!=null&&d(n,["imageBytes"],vr(r));let o=u(e,["mimeType"]);return o!=null&&d(n,["mimeType"],o),n}function wC(e,t){let n={},r=u(e,["gcsUri"]);r!=null&&d(n,["gcsUri"],r);let o=u(e,["bytesBase64Encoded"]);o!=null&&d(n,["imageBytes"],vr(o));let i=u(e,["mimeType"]);return i!=null&&d(n,["mimeType"],i),n}function Zu(e,t){let n={};if(u(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");let r=u(e,["imageBytes"]);r!=null&&d(n,["bytesBase64Encoded"],vr(r));let o=u(e,["mimeType"]);return o!=null&&d(n,["mimeType"],o),n}function vn(e,t){let n={},r=u(e,["gcsUri"]);r!=null&&d(n,["gcsUri"],r);let o=u(e,["imageBytes"]);o!=null&&d(n,["bytesBase64Encoded"],vr(o));let i=u(e,["mimeType"]);return i!=null&&d(n,["mimeType"],i),n}function Hx(e,t,n,r){let o={},i=u(t,["pageSize"]);n!==void 0&&i!=null&&d(n,["_query","pageSize"],i);let s=u(t,["pageToken"]);n!==void 0&&s!=null&&d(n,["_query","pageToken"],s);let a=u(t,["filter"]);n!==void 0&&a!=null&&d(n,["_query","filter"],a);let l=u(t,["queryBase"]);return n!==void 0&&l!=null&&d(n,["_url","models_url"],yC(e,l)),o}function $x(e,t,n,r){let o={},i=u(t,["pageSize"]);n!==void 0&&i!=null&&d(n,["_query","pageSize"],i);let s=u(t,["pageToken"]);n!==void 0&&s!=null&&d(n,["_query","pageToken"],s);let a=u(t,["filter"]);n!==void 0&&a!=null&&d(n,["_query","filter"],a);let l=u(t,["queryBase"]);return n!==void 0&&l!=null&&d(n,["_url","models_url"],yC(e,l)),o}function Gx(e,t,n){let r={},o=u(t,["config"]);return o!=null&&Hx(e,o,r),r}function zx(e,t,n){let r={},o=u(t,["config"]);return o!=null&&$x(e,o,r),r}function qx(e,t){let n={},r=u(e,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);let o=u(e,["nextPageToken"]);o!=null&&d(n,["nextPageToken"],o);let i=u(e,["_self"]);if(i!=null){let s=vC(i);Array.isArray(s)&&(s=s.map(a=>mh(a))),d(n,["models"],s)}return n}function jx(e,t){let n={},r=u(e,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);let o=u(e,["nextPageToken"]);o!=null&&d(n,["nextPageToken"],o);let i=u(e,["_self"]);if(i!=null){let s=vC(i);Array.isArray(s)&&(s=s.map(a=>yh(a))),d(n,["models"],s)}return n}function Wx(e,t){let n={},r=u(e,["maskMode"]);r!=null&&d(n,["maskMode"],r);let o=u(e,["segmentationClasses"]);o!=null&&d(n,["maskClasses"],o);let i=u(e,["maskDilation"]);return i!=null&&d(n,["dilation"],i),n}function mh(e,t){let n={},r=u(e,["name"]);r!=null&&d(n,["name"],r);let o=u(e,["displayName"]);o!=null&&d(n,["displayName"],o);let i=u(e,["description"]);i!=null&&d(n,["description"],i);let s=u(e,["version"]);s!=null&&d(n,["version"],s);let a=u(e,["_self"]);a!=null&&d(n,["tunedModelInfo"],uP(a));let l=u(e,["inputTokenLimit"]);l!=null&&d(n,["inputTokenLimit"],l);let c=u(e,["outputTokenLimit"]);c!=null&&d(n,["outputTokenLimit"],c);let f=u(e,["supportedGenerationMethods"]);f!=null&&d(n,["supportedActions"],f);let p=u(e,["temperature"]);p!=null&&d(n,["temperature"],p);let h=u(e,["maxTemperature"]);h!=null&&d(n,["maxTemperature"],h);let g=u(e,["topP"]);g!=null&&d(n,["topP"],g);let m=u(e,["topK"]);m!=null&&d(n,["topK"],m);let y=u(e,["thinking"]);return y!=null&&d(n,["thinking"],y),n}function yh(e,t){let n={},r=u(e,["name"]);r!=null&&d(n,["name"],r);let o=u(e,["displayName"]);o!=null&&d(n,["displayName"],o);let i=u(e,["description"]);i!=null&&d(n,["description"],i);let s=u(e,["versionId"]);s!=null&&d(n,["version"],s);let a=u(e,["deployedModels"]);if(a!=null){let h=a;Array.isArray(h)&&(h=h.map(g=>sx(g))),d(n,["endpoints"],h)}let l=u(e,["labels"]);l!=null&&d(n,["labels"],l);let c=u(e,["_self"]);c!=null&&d(n,["tunedModelInfo"],cP(c));let f=u(e,["defaultCheckpointId"]);f!=null&&d(n,["defaultCheckpointId"],f);let p=u(e,["checkpoints"]);if(p!=null){let h=p;Array.isArray(h)&&(h=h.map(g=>g)),d(n,["checkpoints"],h)}return n}function Jx(e,t){let n={},r=u(e,["mediaResolution"]);r!=null&&d(n,["mediaResolution"],r);let o=u(e,["codeExecutionResult"]);o!=null&&d(n,["codeExecutionResult"],o);let i=u(e,["executableCode"]);i!=null&&d(n,["executableCode"],i);let s=u(e,["fileData"]);s!=null&&d(n,["fileData"],ax(s));let a=u(e,["functionCall"]);a!=null&&d(n,["functionCall"],lx(a));let l=u(e,["functionResponse"]);l!=null&&d(n,["functionResponse"],l);let c=u(e,["inlineData"]);c!=null&&d(n,["inlineData"],PN(c));let f=u(e,["text"]);f!=null&&d(n,["text"],f);let p=u(e,["thought"]);p!=null&&d(n,["thought"],p);let h=u(e,["thoughtSignature"]);h!=null&&d(n,["thoughtSignature"],h);let g=u(e,["videoMetadata"]);return g!=null&&d(n,["videoMetadata"],g),n}function Yx(e,t){let n={},r=u(e,["productImage"]);return r!=null&&d(n,["image"],vn(r)),n}function Zx(e,t,n){let r={},o=u(e,["numberOfImages"]);t!==void 0&&o!=null&&d(t,["parameters","sampleCount"],o);let i=u(e,["baseSteps"]);t!==void 0&&i!=null&&d(t,["parameters","baseSteps"],i);let s=u(e,["outputGcsUri"]);t!==void 0&&s!=null&&d(t,["parameters","storageUri"],s);let a=u(e,["seed"]);t!==void 0&&a!=null&&d(t,["parameters","seed"],a);let l=u(e,["safetyFilterLevel"]);t!==void 0&&l!=null&&d(t,["parameters","safetySetting"],l);let c=u(e,["personGeneration"]);t!==void 0&&c!=null&&d(t,["parameters","personGeneration"],c);let f=u(e,["addWatermark"]);t!==void 0&&f!=null&&d(t,["parameters","addWatermark"],f);let p=u(e,["outputMimeType"]);t!==void 0&&p!=null&&d(t,["parameters","outputOptions","mimeType"],p);let h=u(e,["outputCompressionQuality"]);t!==void 0&&h!=null&&d(t,["parameters","outputOptions","compressionQuality"],h);let g=u(e,["enhancePrompt"]);t!==void 0&&g!=null&&d(t,["parameters","enhancePrompt"],g);let m=u(e,["labels"]);return t!==void 0&&m!=null&&d(t,["labels"],m),r}function Kx(e,t,n){let r={},o=u(t,["model"]);o!=null&&d(r,["_url","model"],Te(e,o));let i=u(t,["source"]);i!=null&&Xx(i,r);let s=u(t,["config"]);return s!=null&&Zx(s,r),r}function Qx(e,t){let n={},r=u(e,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(i=>Yu(i))),d(n,["generatedImages"],o)}return n}function Xx(e,t,n){let r={},o=u(e,["prompt"]);t!==void 0&&o!=null&&d(t,["instances[0]","prompt"],o);let i=u(e,["personImage"]);t!==void 0&&i!=null&&d(t,["instances[0]","personImage","image"],vn(i));let s=u(e,["productImages"]);if(t!==void 0&&s!=null){let a=s;Array.isArray(a)&&(a=a.map(l=>Yx(l))),d(t,["instances[0]","productImages"],a)}return r}function eP(e,t){let n={},r=u(e,["referenceImage"]);r!=null&&d(n,["referenceImage"],vn(r));let o=u(e,["referenceId"]);o!=null&&d(n,["referenceId"],o);let i=u(e,["referenceType"]);i!=null&&d(n,["referenceType"],i);let s=u(e,["maskImageConfig"]);s!=null&&d(n,["maskImageConfig"],Wx(s));let a=u(e,["controlImageConfig"]);a!=null&&d(n,["controlImageConfig"],VN(a));let l=u(e,["styleImageConfig"]);l!=null&&d(n,["styleImageConfig"],l);let c=u(e,["subjectImageConfig"]);return c!=null&&d(n,["subjectImageConfig"],c),n}function DC(e,t){let n={},r=u(e,["safetyAttributes","categories"]);r!=null&&d(n,["categories"],r);let o=u(e,["safetyAttributes","scores"]);o!=null&&d(n,["scores"],o);let i=u(e,["contentType"]);return i!=null&&d(n,["contentType"],i),n}function SC(e,t){let n={},r=u(e,["safetyAttributes","categories"]);r!=null&&d(n,["categories"],r);let o=u(e,["safetyAttributes","scores"]);o!=null&&d(n,["scores"],o);let i=u(e,["contentType"]);return i!=null&&d(n,["contentType"],i),n}function tP(e,t){let n={},r=u(e,["category"]);if(r!=null&&d(n,["category"],r),u(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");let o=u(e,["threshold"]);return o!=null&&d(n,["threshold"],o),n}function nP(e,t){let n={},r=u(e,["image"]);return r!=null&&d(n,["image"],vn(r)),n}function rP(e,t,n){let r={},o=u(e,["mode"]);t!==void 0&&o!=null&&d(t,["parameters","mode"],o);let i=u(e,["maxPredictions"]);t!==void 0&&i!=null&&d(t,["parameters","maxPredictions"],i);let s=u(e,["confidenceThreshold"]);t!==void 0&&s!=null&&d(t,["parameters","confidenceThreshold"],s);let a=u(e,["maskDilation"]);t!==void 0&&a!=null&&d(t,["parameters","maskDilation"],a);let l=u(e,["binaryColorThreshold"]);t!==void 0&&l!=null&&d(t,["parameters","binaryColorThreshold"],l);let c=u(e,["labels"]);return t!==void 0&&c!=null&&d(t,["labels"],c),r}function oP(e,t,n){let r={},o=u(t,["model"]);o!=null&&d(r,["_url","model"],Te(e,o));let i=u(t,["source"]);i!=null&&sP(i,r);let s=u(t,["config"]);return s!=null&&rP(s,r),r}function iP(e,t){let n={},r=u(e,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(i=>Rx(i))),d(n,["generatedMasks"],o)}return n}function sP(e,t,n){let r={},o=u(e,["prompt"]);t!==void 0&&o!=null&&d(t,["instances[0]","prompt"],o);let i=u(e,["image"]);t!==void 0&&i!=null&&d(t,["instances[0]","image"],vn(i));let s=u(e,["scribbleImage"]);return t!==void 0&&s!=null&&d(t,["instances[0]","scribble"],nP(s)),r}function aP(e,t){let n={},r=u(e,["retrievalConfig"]);r!=null&&d(n,["retrievalConfig"],r);let o=u(e,["functionCallingConfig"]);return o!=null&&d(n,["functionCallingConfig"],ux(o)),n}function lP(e,t){let n={};if(u(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let r=u(e,["computerUse"]);r!=null&&d(n,["computerUse"],r);let o=u(e,["fileSearch"]);o!=null&&d(n,["fileSearch"],o);let i=u(e,["codeExecution"]);if(i!=null&&d(n,["codeExecution"],i),u(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let s=u(e,["functionDeclarations"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(h=>h)),d(n,["functionDeclarations"],p)}let a=u(e,["googleMaps"]);a!=null&&d(n,["googleMaps"],Fx(a));let l=u(e,["googleSearch"]);l!=null&&d(n,["googleSearch"],Lx(l));let c=u(e,["googleSearchRetrieval"]);c!=null&&d(n,["googleSearchRetrieval"],c);let f=u(e,["urlContext"]);return f!=null&&d(n,["urlContext"],f),n}function bC(e,t){let n={},r=u(e,["retrieval"]);r!=null&&d(n,["retrieval"],r);let o=u(e,["computerUse"]);if(o!=null&&d(n,["computerUse"],o),u(e,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");let i=u(e,["codeExecution"]);i!=null&&d(n,["codeExecution"],i);let s=u(e,["enterpriseWebSearch"]);s!=null&&d(n,["enterpriseWebSearch"],s);let a=u(e,["functionDeclarations"]);if(a!=null){let h=a;Array.isArray(h)&&(h=h.map(g=>cx(g))),d(n,["functionDeclarations"],h)}let l=u(e,["googleMaps"]);l!=null&&d(n,["googleMaps"],l);let c=u(e,["googleSearch"]);c!=null&&d(n,["googleSearch"],c);let f=u(e,["googleSearchRetrieval"]);f!=null&&d(n,["googleSearchRetrieval"],f);let p=u(e,["urlContext"]);return p!=null&&d(n,["urlContext"],p),n}function uP(e,t){let n={},r=u(e,["baseModel"]);r!=null&&d(n,["baseModel"],r);let o=u(e,["createTime"]);o!=null&&d(n,["createTime"],o);let i=u(e,["updateTime"]);return i!=null&&d(n,["updateTime"],i),n}function cP(e,t){let n={},r=u(e,["labels","google-vertex-llm-tuning-base-model-id"]);r!=null&&d(n,["baseModel"],r);let o=u(e,["createTime"]);o!=null&&d(n,["createTime"],o);let i=u(e,["updateTime"]);return i!=null&&d(n,["updateTime"],i),n}function dP(e,t,n){let r={},o=u(e,["displayName"]);t!==void 0&&o!=null&&d(t,["displayName"],o);let i=u(e,["description"]);t!==void 0&&i!=null&&d(t,["description"],i);let s=u(e,["defaultCheckpointId"]);return t!==void 0&&s!=null&&d(t,["defaultCheckpointId"],s),r}function fP(e,t,n){let r={},o=u(e,["displayName"]);t!==void 0&&o!=null&&d(t,["displayName"],o);let i=u(e,["description"]);t!==void 0&&i!=null&&d(t,["description"],i);let s=u(e,["defaultCheckpointId"]);return t!==void 0&&s!=null&&d(t,["defaultCheckpointId"],s),r}function pP(e,t,n){let r={},o=u(t,["model"]);o!=null&&d(r,["_url","name"],Te(e,o));let i=u(t,["config"]);return i!=null&&dP(i,r),r}function hP(e,t,n){let r={},o=u(t,["model"]);o!=null&&d(r,["_url","model"],Te(e,o));let i=u(t,["config"]);return i!=null&&fP(i,r),r}function gP(e,t,n){let r={},o=u(e,["outputGcsUri"]);t!==void 0&&o!=null&&d(t,["parameters","storageUri"],o);let i=u(e,["safetyFilterLevel"]);t!==void 0&&i!=null&&d(t,["parameters","safetySetting"],i);let s=u(e,["personGeneration"]);t!==void 0&&s!=null&&d(t,["parameters","personGeneration"],s);let a=u(e,["includeRaiReason"]);t!==void 0&&a!=null&&d(t,["parameters","includeRaiReason"],a);let l=u(e,["outputMimeType"]);t!==void 0&&l!=null&&d(t,["parameters","outputOptions","mimeType"],l);let c=u(e,["outputCompressionQuality"]);t!==void 0&&c!=null&&d(t,["parameters","outputOptions","compressionQuality"],c);let f=u(e,["enhanceInputImage"]);t!==void 0&&f!=null&&d(t,["parameters","upscaleConfig","enhanceInputImage"],f);let p=u(e,["imagePreservationFactor"]);t!==void 0&&p!=null&&d(t,["parameters","upscaleConfig","imagePreservationFactor"],p);let h=u(e,["labels"]);t!==void 0&&h!=null&&d(t,["labels"],h);let g=u(e,["numberOfImages"]);t!==void 0&&g!=null&&d(t,["parameters","sampleCount"],g);let m=u(e,["mode"]);return t!==void 0&&m!=null&&d(t,["parameters","mode"],m),r}function mP(e,t,n){let r={},o=u(t,["model"]);o!=null&&d(r,["_url","model"],Te(e,o));let i=u(t,["image"]);i!=null&&d(r,["instances[0]","image"],vn(i));let s=u(t,["upscaleFactor"]);s!=null&&d(r,["parameters","upscaleConfig","upscaleFactor"],s);let a=u(t,["config"]);return a!=null&&gP(a,r),r}function yP(e,t){let n={},r=u(e,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);let o=u(e,["predictions"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>Yu(s))),d(n,["generatedImages"],i)}return n}function vP(e,t){let n={},r=u(e,["uri"]);r!=null&&d(n,["uri"],r);let o=u(e,["encodedVideo"]);o!=null&&d(n,["videoBytes"],vr(o));let i=u(e,["encoding"]);return i!=null&&d(n,["mimeType"],i),n}function EP(e,t){let n={},r=u(e,["gcsUri"]);r!=null&&d(n,["uri"],r);let o=u(e,["bytesBase64Encoded"]);o!=null&&d(n,["videoBytes"],vr(o));let i=u(e,["mimeType"]);return i!=null&&d(n,["mimeType"],i),n}function _P(e,t){let n={},r=u(e,["image"]);r!=null&&d(n,["_self"],vn(r));let o=u(e,["maskMode"]);return o!=null&&d(n,["maskMode"],o),n}function CP(e,t){let n={},r=u(e,["image"]);r!=null&&d(n,["image"],Zu(r));let o=u(e,["referenceType"]);return o!=null&&d(n,["referenceType"],o),n}function IP(e,t){let n={},r=u(e,["image"]);r!=null&&d(n,["image"],vn(r));let o=u(e,["referenceType"]);return o!=null&&d(n,["referenceType"],o),n}function AC(e,t){let n={},r=u(e,["uri"]);r!=null&&d(n,["uri"],r);let o=u(e,["videoBytes"]);o!=null&&d(n,["encodedVideo"],vr(o));let i=u(e,["mimeType"]);return i!=null&&d(n,["encoding"],i),n}function MC(e,t){let n={},r=u(e,["uri"]);r!=null&&d(n,["gcsUri"],r);let o=u(e,["videoBytes"]);o!=null&&d(n,["bytesBase64Encoded"],vr(o));let i=u(e,["mimeType"]);return i!=null&&d(n,["mimeType"],i),n}function TP(e,t){let n={},r=u(e,["displayName"]);return t!==void 0&&r!=null&&d(t,["displayName"],r),n}function wP(e){let t={},n=u(e,["config"]);return n!=null&&TP(n,t),t}function DP(e,t){let n={},r=u(e,["force"]);return t!==void 0&&r!=null&&d(t,["_query","force"],r),n}function SP(e){let t={},n=u(e,["name"]);n!=null&&d(t,["_url","name"],n);let r=u(e,["config"]);return r!=null&&DP(r,t),t}function bP(e){let t={},n=u(e,["name"]);return n!=null&&d(t,["_url","name"],n),t}function AP(e,t){let n={},r=u(e,["customMetadata"]);if(t!==void 0&&r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),d(t,["customMetadata"],i)}let o=u(e,["chunkingConfig"]);return t!==void 0&&o!=null&&d(t,["chunkingConfig"],o),n}function MP(e){let t={},n=u(e,["name"]);n!=null&&d(t,["name"],n);let r=u(e,["metadata"]);r!=null&&d(t,["metadata"],r);let o=u(e,["done"]);o!=null&&d(t,["done"],o);let i=u(e,["error"]);i!=null&&d(t,["error"],i);let s=u(e,["response"]);return s!=null&&d(t,["response"],NP(s)),t}function RP(e){let t={},n=u(e,["fileSearchStoreName"]);n!=null&&d(t,["_url","file_search_store_name"],n);let r=u(e,["fileName"]);r!=null&&d(t,["fileName"],r);let o=u(e,["config"]);return o!=null&&AP(o,t),t}function NP(e){let t={},n=u(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);let r=u(e,["parent"]);r!=null&&d(t,["parent"],r);let o=u(e,["documentName"]);return o!=null&&d(t,["documentName"],o),t}function xP(e,t){let n={},r=u(e,["pageSize"]);t!==void 0&&r!=null&&d(t,["_query","pageSize"],r);let o=u(e,["pageToken"]);return t!==void 0&&o!=null&&d(t,["_query","pageToken"],o),n}function PP(e){let t={},n=u(e,["config"]);return n!=null&&xP(n,t),t}function kP(e){let t={},n=u(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);let r=u(e,["nextPageToken"]);r!=null&&d(t,["nextPageToken"],r);let o=u(e,["fileSearchStores"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),d(t,["fileSearchStores"],i)}return t}function RC(e,t){let n={},r=u(e,["mimeType"]);t!==void 0&&r!=null&&d(t,["mimeType"],r);let o=u(e,["displayName"]);t!==void 0&&o!=null&&d(t,["displayName"],o);let i=u(e,["customMetadata"]);if(t!==void 0&&i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>l)),d(t,["customMetadata"],a)}let s=u(e,["chunkingConfig"]);return t!==void 0&&s!=null&&d(t,["chunkingConfig"],s),n}function OP(e){let t={},n=u(e,["fileSearchStoreName"]);n!=null&&d(t,["_url","file_search_store_name"],n);let r=u(e,["config"]);return r!=null&&RC(r,t),t}function FP(e){let t={},n=u(e,["sdkHttpResponse"]);return n!=null&&d(t,["sdkHttpResponse"],n),t}var LP="Content-Type",UP="X-Server-Timeout",BP="User-Agent",vh="x-goog-api-client",VP="1.39.0",HP=`google-genai-sdk/${VP}`,$P="v1beta1",GP="v1beta",Eh=class{constructor(t){var n,r,o;this.clientOptions=Object.assign({},t),this.customBaseUrl=(n=t.httpOptions)===null||n===void 0?void 0:n.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));let i={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");let a=t.project&&t.location||!!t.apiKey;this.customBaseUrl&&!a?(i.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?i.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(i.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),i.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:$P}else{if(!this.clientOptions.apiKey)throw new ks({message:"API key must be set when using the Gemini API.",status:403});i.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:GP,i.baseUrl="https://generativelanguage.googleapis.com/"}i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,t.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,t.httpOptions))}isVertexAI(){var t;return(t=this.clientOptions.vertexai)!==null&&t!==void 0?t:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){let t=new Headers;return await this.clientOptions.auth.addAuthHeaders(t),t}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(t){if(!t||t.baseUrl===void 0||t.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");let r=[t.baseUrl.endsWith("/")?t.baseUrl.slice(0,-1):t.baseUrl];return t.apiVersion&&t.apiVersion!==""&&r.push(t.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){let t=this.getBaseUrl(),n=new URL(t);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(t){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=t;else throw new Error("HTTP options are not correctly set.")}constructUrl(t,n,r){let o=[this.getRequestUrlInternal(n)];return r&&o.push(this.getBaseResourcePath()),t!==""&&o.push(t),new URL(`${o.join("/")}`)}shouldPrependVertexProjectPath(t,n){return!(n.baseUrl&&n.baseUrlResourceScope===uC.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||t.path.startsWith("projects/")||t.httpMethod==="GET"&&t.path.startsWith("publishers/google/models"))}async request(t){let n=this.clientOptions.httpOptions;t.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));let r=this.shouldPrependVertexProjectPath(t,n),o=this.constructUrl(t.path,n,r);if(t.queryParams)for(let[s,a]of Object.entries(t.queryParams))o.searchParams.append(s,String(a));let i={};if(t.httpMethod==="GET"){if(t.body&&t.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else i.body=t.body;return i=await this.includeExtraHttpOptionsToRequestInit(i,n,o.toString(),t.abortSignal),this.unaryApiCall(o,i,t.httpMethod)}patchHttpOptions(t,n){let r=JSON.parse(JSON.stringify(t));for(let[o,i]of Object.entries(n))typeof i=="object"?r[o]=Object.assign(Object.assign({},r[o]),i):i!==void 0&&(r[o]=i);return r}async requestStream(t){let n=this.clientOptions.httpOptions;t.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,t.httpOptions));let r=this.shouldPrependVertexProjectPath(t,n),o=this.constructUrl(t.path,n,r);(!o.searchParams.has("alt")||o.searchParams.get("alt")!=="sse")&&o.searchParams.set("alt","sse");let i={};return i.body=t.body,i=await this.includeExtraHttpOptionsToRequestInit(i,n,o.toString(),t.abortSignal),this.streamApiCall(o,i,t.httpMethod)}async includeExtraHttpOptionsToRequestInit(t,n,r,o){if(n&&n.timeout||o){let i=new AbortController,s=i.signal;if(n.timeout&&n?.timeout>0){let a=setTimeout(()=>i.abort(),n.timeout);a&&typeof a.unref=="function"&&a.unref()}o&&o.addEventListener("abort",()=>{i.abort()}),t.signal=s}return n&&n.extraBody!==null&&zP(t,n.extraBody),t.headers=await this.getHeadersInternal(n,r),t}async unaryApiCall(t,n,r){return this.apiCall(t.toString(),Object.assign(Object.assign({},n),{method:r})).then(async o=>(await J_(o),new Ps(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}async streamApiCall(t,n,r){return this.apiCall(t.toString(),Object.assign(Object.assign({},n),{method:r})).then(async o=>(await J_(o),this.processStreamResponse(o))).catch(o=>{throw o instanceof Error?o:new Error(JSON.stringify(o))})}processStreamResponse(t){return gn(this,arguments,function*(){var r;let o=(r=t?.body)===null||r===void 0?void 0:r.getReader(),i=new TextDecoder("utf-8");if(!o)throw new Error("Response body is empty");try{let s="",a="data:",l=[`

`,"\r\r",`\r
\r
`];for(;;){let{done:c,value:f}=yield de(o.read());if(c){if(s.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}let p=i.decode(f,{stream:!0});try{let m=JSON.parse(p);if("error"in m){let y=JSON.parse(JSON.stringify(m.error)),E=y.status,C=y.code,T=`got status: ${E}. ${JSON.stringify(m)}`;if(C>=400&&C<600)throw new ks({message:T,status:C})}}catch(m){if(m.name==="ApiError")throw m}s+=p;let h=-1,g=0;for(;;){h=-1,g=0;for(let E of l){let C=s.indexOf(E);C!==-1&&(h===-1||C<h)&&(h=C,g=E.length)}if(h===-1)break;let m=s.substring(0,h);s=s.substring(h+g);let y=m.trim();if(y.startsWith(a)){let E=y.substring(a.length).trim();try{let C=new Response(E,{headers:t?.headers,status:t?.status,statusText:t?.statusText});yield yield de(new Ps(C))}catch(C){throw new Error(`exception parsing stream chunk ${E}. ${C}`)}}}}}finally{o.releaseLock()}})}async apiCall(t,n){return fetch(t,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){let t={},n=HP+" "+this.clientOptions.userAgentExtra;return t[BP]=n,t[vh]=n,t[LP]="application/json",t}async getHeadersInternal(t,n){let r=new Headers;if(t&&t.headers){for(let[o,i]of Object.entries(t.headers))r.append(o,i);t.timeout&&t.timeout>0&&r.append(UP,String(Math.ceil(t.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,n),r}getFileName(t){var n;let r="";return typeof t=="string"&&(r=t.replace(/[/\\]+$/,""),r=(n=r.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),r}async uploadFile(t,n){var r;let o={};n!=null&&(o.mimeType=n.mimeType,o.name=n.name,o.displayName=n.displayName),o.name&&!o.name.startsWith("files/")&&(o.name=`files/${o.name}`);let i=this.clientOptions.uploader,s=await i.stat(t);o.sizeBytes=String(s.size);let a=(r=n?.mimeType)!==null&&r!==void 0?r:s.type;if(a===void 0||a==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");o.mimeType=a;let l={file:o},c=this.getFileName(t),f=Y("upload/v1beta/files",l._url),p=await this.fetchUploadUrl(f,o.sizeBytes,o.mimeType,c,l,n?.httpOptions);return i.upload(t,p,this)}async uploadFileToFileSearchStore(t,n,r){var o;let i=this.clientOptions.uploader,s=await i.stat(n),a=String(s.size),l=(o=r?.mimeType)!==null&&o!==void 0?o:s.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");let c=`upload/v1beta/${t}:uploadToFileSearchStore`,f=this.getFileName(n),p={};r!=null&&RC(r,p);let h=await this.fetchUploadUrl(c,a,l,f,p,r?.httpOptions);return i.uploadToFileSearchStore(n,h,this)}async downloadFile(t){await this.clientOptions.downloader.download(t,this)}async fetchUploadUrl(t,n,r,o,i,s){var a;let l={};s?l=s:l={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${r}`},o?{"X-Goog-Upload-File-Name":o}:{})};let c=await this.request({path:t,body:JSON.stringify(i),httpMethod:"POST",httpOptions:l});if(!c||!c?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");let f=(a=c?.headers)===null||a===void 0?void 0:a["x-goog-upload-url"];if(f===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return f}};async function J_(e){var t;if(e===void 0)throw new Error("response is undefined");if(!e.ok){let n=e.status,r;!((t=e.headers.get("content-type"))===null||t===void 0)&&t.includes("application/json")?r=await e.json():r={error:{message:await e.text(),code:e.status,status:e.statusText}};let o=JSON.stringify(r);throw n>=400&&n<600?new ks({message:o,status:n}):new Error(o)}}function zP(e,t){if(!t||Object.keys(t).length===0)return;if(e.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof e.body=="string"&&e.body.length>0)try{let i=JSON.parse(e.body);if(typeof i=="object"&&i!==null&&!Array.isArray(i))n=i;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(i,s){let a=Object.assign({},i);for(let l in s)if(Object.prototype.hasOwnProperty.call(s,l)){let c=s[l],f=a[l];c&&typeof c=="object"&&!Array.isArray(c)&&f&&typeof f=="object"&&!Array.isArray(f)?a[l]=r(f,c):(f&&c&&typeof f!=typeof c&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${l}". Original type: ${typeof f}, New type: ${typeof c}. Overwriting.`),a[l]=c)}return a}let o=r(n,t);e.body=JSON.stringify(o)}var qP="mcp_used/unknown",jP=!1;function NC(e){for(let t of e)if(WP(t)||typeof t=="object"&&"inputSchema"in t)return!0;return jP}function xC(e){var t;let n=(t=e[vh])!==null&&t!==void 0?t:"";e[vh]=(n+` ${qP}`).trimStart()}function WP(e){return e!==null&&typeof e=="object"&&e instanceof _h}function JP(e){return gn(this,arguments,function*(n,r=100){let o,i=0;for(;i<r;){let s=yield de(n.listTools({cursor:o}));for(let a of s.tools)yield yield de(a),i++;if(!s.nextCursor)break;o=s.nextCursor}})}var _h=class e{constructor(t=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=t,this.config=n}static create(t,n){return new e(t,n)}async initialize(){var t,n,r,o;if(this.mcpTools.length>0)return;let i={},s=[];for(let f of this.mcpClients)try{for(var a=!0,l=(n=void 0,mn(JP(f))),c;c=await l.next(),t=c.done,!t;a=!0){o=c.value,a=!1;let p=o;s.push(p);let h=p.name;if(i[h])throw new Error(`Duplicate function name ${h} found in MCP tools. Please ensure function names are unique.`);i[h]=f}}catch(p){n={error:p}}finally{try{!a&&!t&&(r=l.return)&&await r.call(l)}finally{if(n)throw n.error}}this.mcpTools=s,this.functionNameToMcpClient=i}async tool(){return await this.initialize(),MM(this.mcpTools,this.config)}async callTool(t){await this.initialize();let n=[];for(let r of t)if(r.name in this.functionNameToMcpClient){let o=this.functionNameToMcpClient[r.name],i;this.config.timeout&&(i={timeout:this.config.timeout});let s=await o.callTool({name:r.name,arguments:r.args},void 0,i);n.push({functionResponse:{name:r.name,response:s.isError?{error:s}:s}})}return n}};async function YP(e,t,n){let r=new ah,o;n.data instanceof Blob?o=JSON.parse(await n.data.text()):o=JSON.parse(n.data),Object.assign(r,o),t(r)}var Ch=class{constructor(t,n,r){this.apiClient=t,this.auth=n,this.webSocketFactory=r}async connect(t){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");let o=this.apiClient.getWebsocketBaseUrl(),i=this.apiClient.getApiVersion(),s=KP(this.apiClient.getDefaultHeaders()),a=this.apiClient.getApiKey(),l=`${o}/ws/google.ai.generativelanguage.${i}.GenerativeService.BidiGenerateMusic?key=${a}`,c=()=>{},f=new Promise(D=>{c=D}),p=t.callbacks,h=function(){c({})},g=this.apiClient,m={onopen:h,onmessage:D=>{YP(g,p.onmessage,D)},onerror:(n=p?.onerror)!==null&&n!==void 0?n:function(D){},onclose:(r=p?.onclose)!==null&&r!==void 0?r:function(D){}},y=this.webSocketFactory.create(l,ZP(s),m);y.connect(),await f;let T={setup:{model:Te(this.apiClient,t.model)}};return y.send(JSON.stringify(T)),new Ih(y,this.apiClient)}},Ih=class{constructor(t,n){this.conn=t,this.apiClient=n}async setWeightedPrompts(t){if(!t.weightedPrompts||Object.keys(t.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");let n=TN(t);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(t){t.musicGenerationConfig||(t.musicGenerationConfig={});let n=IN(t);this.conn.send(JSON.stringify(n))}sendPlaybackControl(t){let n={playbackControl:t};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Ns.PLAY)}pause(){this.sendPlaybackControl(Ns.PAUSE)}stop(){this.sendPlaybackControl(Ns.STOP)}resetContext(){this.sendPlaybackControl(Ns.RESET_CONTEXT)}close(){this.conn.close()}};function ZP(e){let t={};return e.forEach((n,r)=>{t[r]=n}),t}function KP(e){let t=new Headers;for(let[n,r]of Object.entries(e))t.append(n,r);return t}var QP="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function XP(e,t,n){let r=new sh,o;n.data instanceof Blob?o=await n.data.text():n.data instanceof ArrayBuffer?o=new TextDecoder().decode(n.data):o=n.data;let i=JSON.parse(o);if(e.isVertexAI()){let s=SN(i);Object.assign(r,s)}else Object.assign(r,i);t(r)}var Th=class{constructor(t,n,r){this.apiClient=t,this.auth=n,this.webSocketFactory=r,this.music=new Ch(this.apiClient,this.auth,this.webSocketFactory)}async connect(t){var n,r,o,i,s,a;if(t.config&&t.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");let l=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion(),f,p=this.apiClient.getHeaders();t.config&&t.config.tools&&NC(t.config.tools)&&xC(p);let h=nk(p);if(this.apiClient.isVertexAI()){let G=this.apiClient.getProject(),S=this.apiClient.getLocation(),k=this.apiClient.getApiKey(),_=!!G&&!!S||!!k;this.apiClient.getCustomBaseUrl()&&!_?f=l:(f=`${l}/ws/google.cloud.aiplatform.${c}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(h,f))}else{let G=this.apiClient.getApiKey(),S="BidiGenerateContent",k="key";G?.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),c!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),S="BidiGenerateContentConstrained",k="access_token"),f=`${l}/ws/google.ai.generativelanguage.${c}.GenerativeService.${S}?${k}=${G}`}let g=()=>{},m=new Promise(G=>{g=G}),y=t.callbacks,E=function(){var G;(G=y?.onopen)===null||G===void 0||G.call(y),g({})},C=this.apiClient,T={onopen:E,onmessage:G=>{XP(C,y.onmessage,G)},onerror:(n=y?.onerror)!==null&&n!==void 0?n:function(G){},onclose:(r=y?.onclose)!==null&&r!==void 0?r:function(G){}},D=this.webSocketFactory.create(f,tk(h),T);D.connect(),await m;let A=Te(this.apiClient,t.model);if(this.apiClient.isVertexAI()&&A.startsWith("publishers/")){let G=this.apiClient.getProject(),S=this.apiClient.getLocation();G&&S&&(A=`projects/${G}/locations/${S}/`+A)}let b={};this.apiClient.isVertexAI()&&((o=t.config)===null||o===void 0?void 0:o.responseModalities)===void 0&&(t.config===void 0?t.config={responseModalities:[jp.AUDIO]}:t.config.responseModalities=[jp.AUDIO]),!((i=t.config)===null||i===void 0)&&i.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");let O=(a=(s=t.config)===null||s===void 0?void 0:s.tools)!==null&&a!==void 0?a:[],R=[];for(let G of O)if(this.isCallableTool(G)){let S=G;R.push(await S.tool())}else R.push(G);R.length>0&&(t.config.tools=R);let B={model:A,config:t.config,callbacks:t.callbacks};return this.apiClient.isVertexAI()?b=CN(this.apiClient,B):b=_N(this.apiClient,B),delete b.config,D.send(JSON.stringify(b)),new wh(D,this.apiClient)}isCallableTool(t){return"callTool"in t&&typeof t.callTool=="function"}},ek={turnComplete:!0},wh=class{constructor(t,n){this.conn=t,this.apiClient=n}tLiveClientContent(t,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=Jt(n.turns),t.isVertexAI()||(r=r.map(o=>Ju(o)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(t,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(let i of r){if(typeof i!="object"||i===null||!("name"in i)||!("response"in i))throw new Error(`Could not parse function response, type '${typeof i}'.`);if(!t.isVertexAI()&&!("id"in i))throw new Error(QP)}return{toolResponse:{functionResponses:r}}}sendClientContent(t){t=Object.assign(Object.assign({},ek),t);let n=this.tLiveClientContent(this.apiClient,t);this.conn.send(JSON.stringify(n))}sendRealtimeInput(t){let n={};this.apiClient.isVertexAI()?n={realtimeInput:DN(t)}:n={realtimeInput:wN(t)},this.conn.send(JSON.stringify(n))}sendToolResponse(t){if(t.functionResponses==null)throw new Error("Tool response parameters are required.");let n=this.tLiveClienttToolResponse(this.apiClient,t);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}};function tk(e){let t={};return e.forEach((n,r)=>{t[r]=n}),t}function nk(e){let t=new Headers;for(let[n,r]of Object.entries(e))t.append(n,r);return t}var Y_=10;function Z_(e){var t,n,r;if(!((t=e?.automaticFunctionCalling)===null||t===void 0)&&t.disable)return!0;let o=!1;for(let s of(n=e?.tools)!==null&&n!==void 0?n:[])if(Xo(s)){o=!0;break}if(!o)return!0;let i=(r=e?.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return i&&(i<0||!Number.isInteger(i))||i==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",i),!0):!1}function Xo(e){return"callTool"in e&&typeof e.callTool=="function"}function rk(e){var t,n,r;return(r=(n=(t=e.config)===null||t===void 0?void 0:t.tools)===null||n===void 0?void 0:n.some(o=>Xo(o)))!==null&&r!==void 0?r:!1}function K_(e){var t;let n=[];return!((t=e?.config)===null||t===void 0)&&t.tools&&e.config.tools.forEach((r,o)=>{if(Xo(r))return;let i=r;i.functionDeclarations&&i.functionDeclarations.length>0&&n.push(o)}),n}function Q_(e){var t;return!(!((t=e?.automaticFunctionCalling)===null||t===void 0)&&t.ignoreCallHistory)}var Dh=class extends yn{constructor(t){super(),this.apiClient=t,this.generateContent=async n=>{var r,o,i,s,a;let l=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!rk(n)||Z_(n.config))return await this.generateContentInternal(l);let c=K_(n);if(c.length>0){let y=c.map(E=>`tools[${E}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${y}.`)}let f,p,h=Jt(l.contents),g=(i=(o=(r=l.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&i!==void 0?i:Y_,m=0;for(;m<g&&(f=await this.generateContentInternal(l),!(!f.functionCalls||f.functionCalls.length===0));){let y=f.candidates[0].content,E=[];for(let C of(a=(s=n.config)===null||s===void 0?void 0:s.tools)!==null&&a!==void 0?a:[])if(Xo(C)){let D=await C.callTool(f.functionCalls);E.push(...D)}m++,p={role:"user",parts:E},l.contents=Jt(l.contents),l.contents.push(y),l.contents.push(p),Q_(l.config)&&(h.push(y),h.push(p))}return Q_(l.config)&&(f.automaticFunctionCallingHistory=h),f},this.generateContentStream=async n=>{var r,o,i,s,a;if(this.maybeMoveToResponseJsonSchem(n),Z_(n.config)){let p=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(p)}let l=K_(n);if(l.length>0){let p=l.map(h=>`tools[${h}]`).join(", ");throw new Error(`Incompatible tools found at ${p}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}let c=(i=(o=(r=n?.config)===null||r===void 0?void 0:r.toolConfig)===null||o===void 0?void 0:o.functionCallingConfig)===null||i===void 0?void 0:i.streamFunctionCallArguments,f=(a=(s=n?.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||a===void 0?void 0:a.disable;if(c&&!f)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var o;let i,s=[];if(r?.generatedImages)for(let l of r.generatedImages)l&&l?.safetyAttributes&&((o=l?.safetyAttributes)===null||o===void 0?void 0:o.contentType)==="Positive Prompt"?i=l?.safetyAttributes:s.push(l);let a;return i?a={generatedImages:s,positivePromptSafetyAttributes:i,sdkHttpResponse:r.sdkHttpResponse}:a={generatedImages:s,sdkHttpResponse:r.sdkHttpResponse},a}),this.list=async n=>{var r;let s={config:Object.assign(Object.assign({},{queryBase:!0}),n?.config)};if(this.apiClient.isVertexAI()&&!s.config.queryBase){if(!((r=s.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");s.config.filter="labels.tune-type:*"}return new nr(Er.PAGED_ITEM_MODELS,a=>this.listInternal(a),await this.listInternal(s),s)},this.editImage=async n=>{let r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(o=>o.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));let o={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(o)},this.generateVideos=async n=>{var r,o,i,s,a,l;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=n.video)===null||r===void 0)&&r.uri&&(!((o=n.video)===null||o===void 0)&&o.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((s=(i=n.source)===null||i===void 0?void 0:i.video)===null||s===void 0)&&s.uri&&(!((l=(a=n.source)===null||a===void 0?void 0:a.video)===null||l===void 0)&&l.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(t){t.config&&t.config.responseSchema&&(t.config.responseJsonSchema||Object.keys(t.config.responseSchema).includes("$schema")&&(t.config.responseJsonSchema=t.config.responseSchema,delete t.config.responseSchema))}async processParamsMaybeAddMcpUsage(t){var n,r,o;let i=(n=t.config)===null||n===void 0?void 0:n.tools;if(!i)return t;let s=await Promise.all(i.map(async l=>Xo(l)?await l.tool():l)),a={model:t.model,contents:t.contents,config:Object.assign(Object.assign({},t.config),{tools:s})};if(a.config.tools=s,t.config&&t.config.tools&&NC(t.config.tools)){let l=(o=(r=t.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&o!==void 0?o:{},c=Object.assign({},l);Object.keys(c).length===0&&(c=this.apiClient.getDefaultHeaders()),xC(c),a.config.httpOptions=Object.assign(Object.assign({},t.config.httpOptions),{headers:c})}return a}async initAfcToolsMap(t){var n,r,o;let i=new Map;for(let s of(r=(n=t.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(Xo(s)){let a=s,l=await a.tool();for(let c of(o=l.functionDeclarations)!==null&&o!==void 0?o:[]){if(!c.name)throw new Error("Function declaration name is required.");if(i.has(c.name))throw new Error(`Duplicate tool declaration name: ${c.name}`);i.set(c.name,a)}}return i}async processAfcStream(t){var n,r,o;let i=(o=(r=(n=t.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&o!==void 0?o:Y_,s=!1,a=0,l=await this.initAfcToolsMap(t);return(function(c,f,p){return gn(this,arguments,function*(){for(var h,g,m,y,E,C;a<i;){s&&(a++,s=!1);let b=yield de(c.processParamsMaybeAddMcpUsage(p)),O=yield de(c.generateContentStreamInternal(b)),R=[],B=[];try{for(var T=!0,D=(g=void 0,mn(O)),A;A=yield de(D.next()),h=A.done,!h;T=!0){y=A.value,T=!1;let G=y;if(yield yield de(G),G.candidates&&(!((E=G.candidates[0])===null||E===void 0)&&E.content)){B.push(G.candidates[0].content);for(let S of(C=G.candidates[0].content.parts)!==null&&C!==void 0?C:[])if(a<i&&S.functionCall){if(!S.functionCall.name)throw new Error("Function call name was not returned by the model.");if(f.has(S.functionCall.name)){let k=yield de(f.get(S.functionCall.name).callTool([S.functionCall]));R.push(...k)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${f.keys()}, mising tool: ${S.functionCall.name}`)}}}}catch(G){g={error:G}}finally{try{!T&&!h&&(m=D.return)&&(yield de(m.call(D)))}finally{if(g)throw g.error}}if(R.length>0){s=!0;let G=new lo;G.candidates=[{content:{role:"user",parts:R}}],yield yield de(G);let S=[];S.push(...B),S.push({role:"user",parts:R});let k=Jt(p.contents).concat(S);p.contents=k}else break}})})(this,l,t)}async generateContentInternal(t){var n,r,o,i;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=q_(this.apiClient,t);return a=Y("{model}:generateContent",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{let p=W_(f),h=new lo;return Object.assign(h,p),h})}else{let c=z_(this.apiClient,t);return a=Y("{model}:generateContent",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{let p=j_(f),h=new lo;return Object.assign(h,p),h})}}async generateContentStreamInternal(t){var n,r,o,i;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=q_(this.apiClient,t);return a=Y("{model}:streamGenerateContent?alt=sse",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}),s.then(function(p){return gn(this,arguments,function*(){var h,g,m,y;try{for(var E=!0,C=mn(p),T;T=yield de(C.next()),h=T.done,!h;E=!0){y=T.value,E=!1;let D=y,A=W_(yield de(D.json()),t);A.sdkHttpResponse={headers:D.headers};let b=new lo;Object.assign(b,A),yield yield de(b)}}catch(D){g={error:D}}finally{try{!E&&!h&&(m=C.return)&&(yield de(m.call(C)))}finally{if(g)throw g.error}}})})}else{let c=z_(this.apiClient,t);return a=Y("{model}:streamGenerateContent?alt=sse",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}),s.then(function(p){return gn(this,arguments,function*(){var h,g,m,y;try{for(var E=!0,C=mn(p),T;T=yield de(C.next()),h=T.done,!h;E=!0){y=T.value,E=!1;let D=y,A=j_(yield de(D.json()),t);A.sdkHttpResponse={headers:D.headers};let b=new lo;Object.assign(b,A),yield yield de(b)}}catch(D){g={error:D}}finally{try{!E&&!h&&(m=C.return)&&(yield de(m.call(C)))}finally{if(g)throw g.error}}})})}}async embedContent(t){var n,r,o,i;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=rx(this.apiClient,t);return a=Y("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{let p=ix(f),h=new Cu;return Object.assign(h,p),h})}else{let c=nx(this.apiClient,t);return a=Y("{model}:batchEmbedContents",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{let p=ox(f),h=new Cu;return Object.assign(h,p),h})}}async generateImagesInternal(t){var n,r,o,i;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=mx(this.apiClient,t);return a=Y("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{let p=vx(f),h=new Iu;return Object.assign(h,p),h})}else{let c=gx(this.apiClient,t);return a=Y("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{let p=yx(f),h=new Iu;return Object.assign(h,p),h})}}async editImageInternal(t){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI()){let a=QN(this.apiClient,t);return i=Y("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{let f=c;return f.sdkHttpResponse={headers:l.headers},f})),o.then(l=>{let c=XN(l),f=new Wp;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(t){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI()){let a=mP(this.apiClient,t);return i=Y("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{let f=c;return f.sdkHttpResponse={headers:l.headers},f})),o.then(l=>{let c=yP(l),f=new Jp;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(t){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI()){let a=Kx(this.apiClient,t);return i=Y("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),o.then(l=>{let c=Qx(l),f=new Yp;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(t){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI()){let a=oP(this.apiClient,t);return i=Y("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),o.then(l=>{let c=iP(l),f=new Zp;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async get(t){var n,r,o,i;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=Ox(this.apiClient,t);return a=Y("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>yh(f))}else{let c=kx(this.apiClient,t);return a=Y("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>mh(f))}}async listInternal(t){var n,r,o,i;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=zx(this.apiClient,t);return a=Y("{models_url}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{let p=jx(f),h=new Tu;return Object.assign(h,p),h})}else{let c=Gx(this.apiClient,t);return a=Y("{models_url}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{let p=qx(f),h=new Tu;return Object.assign(h,p),h})}}async update(t){var n,r,o,i;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=hP(this.apiClient,t);return a=Y("{model}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>yh(f))}else{let c=pP(this.apiClient,t);return a=Y("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>mh(f))}}async delete(t){var n,r,o,i;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=JN(this.apiClient,t);return a=Y("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{let p=ZN(f),h=new wu;return Object.assign(h,p),h})}else{let c=WN(this.apiClient,t);return a=Y("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{let p=YN(f),h=new wu;return Object.assign(h,p),h})}}async countTokens(t){var n,r,o,i;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=zN(this.apiClient,t);return a=Y("{model}:countTokens",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{let p=jN(f),h=new Du;return Object.assign(h,p),h})}else{let c=GN(this.apiClient,t);return a=Y("{model}:countTokens",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{let p=qN(f),h=new Du;return Object.assign(h,p),h})}}async computeTokens(t){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI()){let a=FN(this.apiClient,t);return i=Y("{model}:computeTokens",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{let f=c;return f.sdkHttpResponse={headers:l.headers},f})),o.then(l=>{let c=LN(l),f=new Kp;return Object.assign(f,c),f})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(t){var n,r,o,i;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=wx(this.apiClient,t);return a=Y("{model}:predictLongRunning",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>{let p=Ix(f),h=new Su;return Object.assign(h,p),h})}else{let c=Tx(this.apiClient,t);return a=Y("{model}:predictLongRunning",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>{let p=Cx(f),h=new Su;return Object.assign(h,p),h})}}};var Sh=class extends yn{constructor(t){super(),this.apiClient=t}async getVideosOperation(t){let n=t.operation,r=t.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){let o=n.name.split("/operations/")[0],i;r&&"httpOptions"in r&&(i=r.httpOptions);let s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:o,config:{httpOptions:i}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{let o=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async get(t){let n=t.operation,r=t.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){let o=n.name.split("/operations/")[0],i;r&&"httpOptions"in r&&(i=r.httpOptions);let s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:o,config:{httpOptions:i}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{let o=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!1})}}async getVideosOperationInternal(t){var n,r,o,i;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=mM(t);return a=Y("{operationName}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s}else{let c=gM(t);return a=Y("{operationName}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s}}async fetchPredictVideosOperationInternal(t){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI()){let a=lM(t);return i=Y("{resourceName}:fetchPredictOperation",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),o}else throw new Error("This method is only supported by the Vertex AI.")}};function ok(e){let t={},n=u(e,["data"]);if(n!=null&&d(t,["data"],n),u(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let r=u(e,["mimeType"]);return r!=null&&d(t,["mimeType"],r),t}function ik(e){let t={},n=u(e,["parts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(i=>hk(i))),d(t,["parts"],o)}let r=u(e,["role"]);return r!=null&&d(t,["role"],r),t}function sk(e,t,n){let r={},o=u(t,["expireTime"]);n!==void 0&&o!=null&&d(n,["expireTime"],o);let i=u(t,["newSessionExpireTime"]);n!==void 0&&i!=null&&d(n,["newSessionExpireTime"],i);let s=u(t,["uses"]);n!==void 0&&s!=null&&d(n,["uses"],s);let a=u(t,["liveConnectConstraints"]);n!==void 0&&a!=null&&d(n,["bidiGenerateContentSetup"],pk(e,a));let l=u(t,["lockAdditionalFields"]);return n!==void 0&&l!=null&&d(n,["fieldMask"],l),r}function ak(e,t){let n={},r=u(t,["config"]);return r!=null&&d(n,["config"],sk(e,r,n)),n}function lk(e){let t={};if(u(e,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=u(e,["fileUri"]);n!=null&&d(t,["fileUri"],n);let r=u(e,["mimeType"]);return r!=null&&d(t,["mimeType"],r),t}function uk(e){let t={},n=u(e,["id"]);n!=null&&d(t,["id"],n);let r=u(e,["args"]);r!=null&&d(t,["args"],r);let o=u(e,["name"]);if(o!=null&&d(t,["name"],o),u(e,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(e,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function ck(e){let t={};if(u(e,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let n=u(e,["enableWidget"]);return n!=null&&d(t,["enableWidget"],n),t}function dk(e){let t={};if(u(e,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(e,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let n=u(e,["timeRangeFilter"]);return n!=null&&d(t,["timeRangeFilter"],n),t}function fk(e,t){let n={},r=u(e,["generationConfig"]);t!==void 0&&r!=null&&d(t,["setup","generationConfig"],r);let o=u(e,["responseModalities"]);t!==void 0&&o!=null&&d(t,["setup","generationConfig","responseModalities"],o);let i=u(e,["temperature"]);t!==void 0&&i!=null&&d(t,["setup","generationConfig","temperature"],i);let s=u(e,["topP"]);t!==void 0&&s!=null&&d(t,["setup","generationConfig","topP"],s);let a=u(e,["topK"]);t!==void 0&&a!=null&&d(t,["setup","generationConfig","topK"],a);let l=u(e,["maxOutputTokens"]);t!==void 0&&l!=null&&d(t,["setup","generationConfig","maxOutputTokens"],l);let c=u(e,["mediaResolution"]);t!==void 0&&c!=null&&d(t,["setup","generationConfig","mediaResolution"],c);let f=u(e,["seed"]);t!==void 0&&f!=null&&d(t,["setup","generationConfig","seed"],f);let p=u(e,["speechConfig"]);t!==void 0&&p!=null&&d(t,["setup","generationConfig","speechConfig"],Jh(p));let h=u(e,["thinkingConfig"]);t!==void 0&&h!=null&&d(t,["setup","generationConfig","thinkingConfig"],h);let g=u(e,["enableAffectiveDialog"]);t!==void 0&&g!=null&&d(t,["setup","generationConfig","enableAffectiveDialog"],g);let m=u(e,["systemInstruction"]);t!==void 0&&m!=null&&d(t,["setup","systemInstruction"],ik(mt(m)));let y=u(e,["tools"]);if(t!==void 0&&y!=null){let O=ri(y);Array.isArray(O)&&(O=O.map(R=>mk(ni(R)))),d(t,["setup","tools"],O)}let E=u(e,["sessionResumption"]);t!==void 0&&E!=null&&d(t,["setup","sessionResumption"],gk(E));let C=u(e,["inputAudioTranscription"]);t!==void 0&&C!=null&&d(t,["setup","inputAudioTranscription"],C);let T=u(e,["outputAudioTranscription"]);t!==void 0&&T!=null&&d(t,["setup","outputAudioTranscription"],T);let D=u(e,["realtimeInputConfig"]);t!==void 0&&D!=null&&d(t,["setup","realtimeInputConfig"],D);let A=u(e,["contextWindowCompression"]);t!==void 0&&A!=null&&d(t,["setup","contextWindowCompression"],A);let b=u(e,["proactivity"]);if(t!==void 0&&b!=null&&d(t,["setup","proactivity"],b),u(e,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function pk(e,t){let n={},r=u(t,["model"]);r!=null&&d(n,["setup","model"],Te(e,r));let o=u(t,["config"]);return o!=null&&d(n,["config"],fk(o,n)),n}function hk(e){let t={},n=u(e,["mediaResolution"]);n!=null&&d(t,["mediaResolution"],n);let r=u(e,["codeExecutionResult"]);r!=null&&d(t,["codeExecutionResult"],r);let o=u(e,["executableCode"]);o!=null&&d(t,["executableCode"],o);let i=u(e,["fileData"]);i!=null&&d(t,["fileData"],lk(i));let s=u(e,["functionCall"]);s!=null&&d(t,["functionCall"],uk(s));let a=u(e,["functionResponse"]);a!=null&&d(t,["functionResponse"],a);let l=u(e,["inlineData"]);l!=null&&d(t,["inlineData"],ok(l));let c=u(e,["text"]);c!=null&&d(t,["text"],c);let f=u(e,["thought"]);f!=null&&d(t,["thought"],f);let p=u(e,["thoughtSignature"]);p!=null&&d(t,["thoughtSignature"],p);let h=u(e,["videoMetadata"]);return h!=null&&d(t,["videoMetadata"],h),t}function gk(e){let t={},n=u(e,["handle"]);if(n!=null&&d(t,["handle"],n),u(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function mk(e){let t={};if(u(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let n=u(e,["computerUse"]);n!=null&&d(t,["computerUse"],n);let r=u(e,["fileSearch"]);r!=null&&d(t,["fileSearch"],r);let o=u(e,["codeExecution"]);if(o!=null&&d(t,["codeExecution"],o),u(e,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let i=u(e,["functionDeclarations"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(p=>p)),d(t,["functionDeclarations"],f)}let s=u(e,["googleMaps"]);s!=null&&d(t,["googleMaps"],ck(s));let a=u(e,["googleSearch"]);a!=null&&d(t,["googleSearch"],dk(a));let l=u(e,["googleSearchRetrieval"]);l!=null&&d(t,["googleSearchRetrieval"],l);let c=u(e,["urlContext"]);return c!=null&&d(t,["urlContext"],c),t}function yk(e){let t=[];for(let n in e)if(Object.prototype.hasOwnProperty.call(e,n)){let r=e[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){let o=Object.keys(r).map(i=>`${n}.${i}`);t.push(...o)}else t.push(n)}return t.join(",")}function vk(e,t){let n=null,r=e.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){let i=r.setup;typeof i=="object"&&i!==null?(e.bidiGenerateContentSetup=i,n=i):delete e.bidiGenerateContentSetup}else r!==void 0&&delete e.bidiGenerateContentSetup;let o=e.fieldMask;if(n){let i=yk(n);if(Array.isArray(t?.lockAdditionalFields)&&t?.lockAdditionalFields.length===0)i?e.fieldMask=i:delete e.fieldMask;else if(t?.lockAdditionalFields&&t.lockAdditionalFields.length>0&&o!==null&&Array.isArray(o)&&o.length>0){let s=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"],a=[];o.length>0&&(a=o.map(c=>s.includes(c)?`generationConfig.${c}`:c));let l=[];i&&l.push(i),a.length>0&&l.push(...a),l.length>0?e.fieldMask=l.join(","):delete e.fieldMask}else delete e.fieldMask}else o!==null&&Array.isArray(o)&&o.length>0?e.fieldMask=o.join(","):delete e.fieldMask;return e}var bh=class extends yn{constructor(t){super(),this.apiClient=t}async create(t){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{let a=ak(this.apiClient,t);i=Y("auth_tokens",a._url),s=a._query,delete a.config,delete a._url,delete a._query;let l=vk(a,t.config);return o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),o.then(c=>c)}}};function Ek(e,t){let n={},r=u(e,["force"]);return t!==void 0&&r!=null&&d(t,["_query","force"],r),n}function _k(e){let t={},n=u(e,["name"]);n!=null&&d(t,["_url","name"],n);let r=u(e,["config"]);return r!=null&&Ek(r,t),t}function Ck(e){let t={},n=u(e,["name"]);return n!=null&&d(t,["_url","name"],n),t}function Ik(e,t){let n={},r=u(e,["pageSize"]);t!==void 0&&r!=null&&d(t,["_query","pageSize"],r);let o=u(e,["pageToken"]);return t!==void 0&&o!=null&&d(t,["_query","pageToken"],o),n}function Tk(e){let t={},n=u(e,["parent"]);n!=null&&d(t,["_url","parent"],n);let r=u(e,["config"]);return r!=null&&Ik(r,t),t}function wk(e){let t={},n=u(e,["sdkHttpResponse"]);n!=null&&d(t,["sdkHttpResponse"],n);let r=u(e,["nextPageToken"]);r!=null&&d(t,["nextPageToken"],r);let o=u(e,["documents"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),d(t,["documents"],i)}return t}var Ah=class extends yn{constructor(t){super(),this.apiClient=t,this.list=async n=>new nr(Er.PAGED_ITEM_DOCUMENTS,r=>this.listInternal({parent:n.parent,config:r.config}),await this.listInternal(n),n)}async get(t){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=Ck(t);return i=Y("{name}",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),o.then(l=>l)}}async delete(t){var n,r;let o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let s=_k(t);o=Y("{name}",s._url),i=s._query,delete s._url,delete s._query,await this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(t){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=Tk(t);return i=Y("{parent}/documents",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),o.then(l=>{let c=wk(l),f=new Qp;return Object.assign(f,c),f})}}};var Mh=class extends yn{constructor(t,n=new Ah(t)){super(),this.apiClient=t,this.documents=n,this.list=async(r={})=>new nr(Er.PAGED_ITEM_FILE_SEARCH_STORES,o=>this.listInternal(o),await this.listInternal(r),r)}async uploadToFileSearchStore(t){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(t.fileSearchStoreName,t.file,t.config)}async create(t){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=wP(t);return i=Y("fileSearchStores",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),o.then(l=>l)}}async get(t){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=bP(t);return i=Y("{name}",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),o.then(l=>l)}}async delete(t){var n,r;let o="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let s=SP(t);o=Y("{name}",s._url),i=s._query,delete s._url,delete s._query,await this.apiClient.request({path:o,queryParams:i,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(t){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=PP(t);return i=Y("fileSearchStores",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),o.then(l=>{let c=kP(l),f=new Xp;return Object.assign(f,c),f})}}async uploadToFileSearchStoreInternal(t){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=OP(t);return i=Y("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),o.then(l=>{let c=FP(l),f=new eh;return Object.assign(f,c),f})}}async importFile(t){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=RP(t);return i=Y("{file_search_store_name}:importFile",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),o.then(l=>{let c=MP(l),f=new th;return Object.assign(f,c),f})}}};var PC=function(){let{crypto:e}=globalThis;if(e?.randomUUID)return PC=e.randomUUID.bind(e),e.randomUUID();let t=new Uint8Array(1),n=e?()=>e.getRandomValues(t)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))},Dk=()=>PC();function Rh(e){return typeof e=="object"&&e!==null&&("name"in e&&e.name==="AbortError"||"message"in e&&String(e.message).includes("FetchRequestCanceledException"))}var Nh=e=>{if(e instanceof Error)return e;if(typeof e=="object"&&e!==null){try{if(Object.prototype.toString.call(e)==="[object Error]"){let t=new Error(e.message,e.cause?{cause:e.cause}:{});return e.stack&&(t.stack=e.stack),e.cause&&!t.cause&&(t.cause=e.cause),e.name&&(t.name=e.name),t}}catch{}try{return new Error(JSON.stringify(e))}catch{}}return new Error(e)};var Mt=class extends Error{},Rt=class e extends Mt{constructor(t,n,r,o){super(`${e.makeMessage(t,n,r)}`),this.status=t,this.headers=o,this.error=n}static makeMessage(t,n,r){let o=n?.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return t&&o?`${t} ${o}`:t?`${t} status code (no body)`:o||"(no status code or body)"}static generate(t,n,r,o){if(!t||!o)return new ei({message:r,cause:Nh(n)});let i=n;return t===400?new Ou(t,i,r,o):t===401?new Fu(t,i,r,o):t===403?new Lu(t,i,r,o):t===404?new Uu(t,i,r,o):t===409?new Bu(t,i,r,o):t===422?new Vu(t,i,r,o):t===429?new Hu(t,i,r,o):t>=500?new $u(t,i,r,o):new e(t,i,r,o)}},Os=class extends Rt{constructor({message:t}={}){super(void 0,void 0,t||"Request was aborted.",void 0)}},ei=class extends Rt{constructor({message:t,cause:n}){super(void 0,void 0,t||"Connection error.",void 0),n&&(this.cause=n)}},ku=class extends ei{constructor({message:t}={}){super({message:t??"Request timed out."})}},Ou=class extends Rt{},Fu=class extends Rt{},Lu=class extends Rt{},Uu=class extends Rt{},Bu=class extends Rt{},Vu=class extends Rt{},Hu=class extends Rt{},$u=class extends Rt{};var Sk=/^[a-z][a-z0-9+.-]*:/i,bk=e=>Sk.test(e),xh=e=>(xh=Array.isArray,xh(e)),Ak=xh,Mk=Ak,X_=Mk;function Rk(e){if(!e)return!0;for(let t in e)return!1;return!0}function Nk(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var xk=(e,t)=>{if(typeof t!="number"||!Number.isInteger(t))throw new Mt(`${e} must be an integer`);if(t<0)throw new Mt(`${e} must be a positive integer`);return t},Pk=e=>{try{return JSON.parse(e)}catch{return}};var kk=e=>new Promise(t=>setTimeout(t,e));var Ko="0.0.1";function Ok(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}var Fk=()=>{var e,t,n,r,o;let i=Ok();if(i==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ko,"X-Stainless-OS":tC(Deno.build.os),"X-Stainless-Arch":eC(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(t=(e=Deno.version)===null||e===void 0?void 0:e.deno)!==null&&t!==void 0?t:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ko,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(i==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ko,"X-Stainless-OS":tC((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":eC((r=globalThis.process.arch)!==null&&r!==void 0?r:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(o=globalThis.process.version)!==null&&o!==void 0?o:"unknown"};let s=Lk();return s?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ko,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${s.browser}`,"X-Stainless-Runtime-Version":s.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Ko,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function Lk(){if(typeof navigator>"u"||!navigator)return null;let e=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(let{key:t,pattern:n}of e){let r=n.exec(navigator.userAgent);if(r){let o=r[1]||0,i=r[2]||0,s=r[3]||0;return{browser:t,version:`${o}.${i}.${s}`}}}return null}var eC=e=>e==="x32"?"x32":e==="x86_64"||e==="x64"?"x64":e==="arm"?"arm":e==="aarch64"||e==="arm64"?"arm64":e?`other:${e}`:"unknown",tC=e=>(e=e.toLowerCase(),e.includes("ios")?"iOS":e==="android"?"Android":e==="darwin"?"MacOS":e==="win32"?"Windows":e==="freebsd"?"FreeBSD":e==="openbsd"?"OpenBSD":e==="linux"?"Linux":e?`Other:${e}`:"Unknown"),hu,Uk=()=>hu??(hu=Fk());function Bk(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function kC(...e){let t=globalThis.ReadableStream;if(typeof t>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new t(...e)}function Vk(e){let t=Symbol.asyncIterator in e?e[Symbol.asyncIterator]():e[Symbol.iterator]();return kC({start(){},async pull(n){let{done:r,value:o}=await t.next();r?n.close():n.enqueue(o)},async cancel(){var n;await((n=t.return)===null||n===void 0?void 0:n.call(t))}})}function OC(e){if(e[Symbol.asyncIterator])return e;let t=e.getReader();return{async next(){try{let n=await t.read();return n?.done&&t.releaseLock(),n}catch(n){throw t.releaseLock(),n}},async return(){let n=t.cancel();return t.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function Hk(e){var t,n;if(e===null||typeof e!="object")return;if(e[Symbol.asyncIterator]){await((n=(t=e[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(t));return}let r=e.getReader(),o=r.cancel();r.releaseLock(),await o}var $k=({headers:e,body:t})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(t)});var FC=()=>{var e;if(typeof File>"u"){let{process:t}=globalThis,n=typeof((e=t?.versions)===null||e===void 0?void 0:e.node)=="string"&&parseInt(t.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function $p(e,t,n){return FC(),new File(e,t??"unknown_file",n)}function Gk(e){return(typeof e=="object"&&e!==null&&("name"in e&&e.name&&String(e.name)||"url"in e&&e.url&&String(e.url)||"filename"in e&&e.filename&&String(e.filename)||"path"in e&&e.path&&String(e.path))||"").split(/[\\/]/).pop()||void 0}var zk=e=>e!=null&&typeof e=="object"&&typeof e[Symbol.asyncIterator]=="function";var LC=e=>e!=null&&typeof e=="object"&&typeof e.size=="number"&&typeof e.type=="string"&&typeof e.text=="function"&&typeof e.slice=="function"&&typeof e.arrayBuffer=="function",qk=e=>e!=null&&typeof e=="object"&&typeof e.name=="string"&&typeof e.lastModified=="number"&&LC(e),jk=e=>e!=null&&typeof e=="object"&&typeof e.url=="string"&&typeof e.blob=="function";async function Wk(e,t,n){if(FC(),e=await e,qk(e))return e instanceof File?e:$p([await e.arrayBuffer()],e.name);if(jk(e)){let o=await e.blob();return t||(t=new URL(e.url).pathname.split(/[\\/]/).pop()),$p(await Ph(o),t,n)}let r=await Ph(e);if(t||(t=Gk(e)),!n?.type){let o=r.find(i=>typeof i=="object"&&"type"in i&&i.type);typeof o=="string"&&(n=Object.assign(Object.assign({},n),{type:o}))}return $p(r,t,n)}async function Ph(e){var t,n,r,o,i;let s=[];if(typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)s.push(e);else if(LC(e))s.push(e instanceof Blob?e:await e.arrayBuffer());else if(zk(e))try{for(var a=!0,l=mn(e),c;c=await l.next(),t=c.done,!t;a=!0){o=c.value,a=!1;let f=o;s.push(...await Ph(f))}}catch(f){n={error:f}}finally{try{!a&&!t&&(r=l.return)&&await r.call(l)}finally{if(n)throw n.error}}else{let f=(i=e?.constructor)===null||i===void 0?void 0:i.name;throw new Error(`Unexpected data type: ${typeof e}${f?`; constructor: ${f}`:""}${Jk(e)}`)}return s}function Jk(e){return typeof e!="object"||e===null?"":`; props: [${Object.getOwnPropertyNames(e).map(n=>`"${n}"`).join(", ")}]`}var Yk=(()=>{class e{constructor(n){this._client=n}}e._key=[];return e})();function UC(e){return e.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}var nC=Object.freeze(Object.create(null)),Zk=(e=UC)=>function(n,...r){if(n.length===1)return n[0];let o=!1,i=[],s=n.reduce((f,p,h)=>{var g,m,y;/[?#]/.test(p)&&(o=!0);let E=r[h],C=(o?encodeURIComponent:e)(""+E);return h!==r.length&&(E==null||typeof E=="object"&&E.toString===((y=Object.getPrototypeOf((m=Object.getPrototypeOf((g=E.hasOwnProperty)!==null&&g!==void 0?g:nC))!==null&&m!==void 0?m:nC))===null||y===void 0?void 0:y.toString))&&(C=E+"",i.push({start:f.length+p.length,length:C.length,error:`Value of type ${Object.prototype.toString.call(E).slice(8,-1)} is not a valid path parameter`})),f+p+(h===r.length?"":C)},""),a=s.split(/[?#]/,1)[0],l=/(?<=^|\/)(?:\.|%2e){1,2}(?=\/|$)/gi,c;for(;(c=l.exec(a))!==null;)i.push({start:c.index,length:c[0].length,error:`Value "${c[0]}" can't be safely passed as a path parameter`});if(i.sort((f,p)=>f.start-p.start),i.length>0){let f=0,p=i.reduce((h,g)=>{let m=" ".repeat(g.start-f),y="^".repeat(g.length);return f=g.start+g.length,h+m+y},"");throw new Mt(`Path parameters result in path with invalid segments:
${i.map(h=>h.error).join(`
`)}
${s}
${p}`)}return s},gu=Zk(UC);var Gu=class extends Yk{create(t,n){var r;let{api_version:o=this._client.apiVersion}=t,i=Pu(t,["api_version"]);if("model"in i&&"agent_config"in i)throw new Mt("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in i&&"generation_config"in i)throw new Mt("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(gu`/${o}/interactions`,Object.assign(Object.assign({body:i},n),{stream:(r=t.stream)!==null&&r!==void 0?r:!1}))}delete(t,n={},r){let{api_version:o=this._client.apiVersion}=n??{};return this._client.delete(gu`/${o}/interactions/${t}`,r)}cancel(t,n={},r){let{api_version:o=this._client.apiVersion}=n??{};return this._client.post(gu`/${o}/interactions/${t}/cancel`,r)}get(t,n={},r){var o;let i=n??{},{api_version:s=this._client.apiVersion}=i,a=Pu(i,["api_version"]);return this._client.get(gu`/${s}/interactions/${t}`,Object.assign(Object.assign({query:a},r),{stream:(o=n?.stream)!==null&&o!==void 0?o:!1}))}};Gu._key=Object.freeze(["interactions"]);var zu=class extends Gu{};function Kk(e){let t=0;for(let o of e)t+=o.length;let n=new Uint8Array(t),r=0;for(let o of e)n.set(o,r),r+=o.length;return n}var mu;function Yh(e){let t;return(mu??(t=new globalThis.TextEncoder,mu=t.encode.bind(t)))(e)}var yu;function rC(e){let t;return(yu??(t=new globalThis.TextDecoder,yu=t.decode.bind(t)))(e)}var ti=class{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(t){if(t==null)return[];let n=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?Yh(t):t;this.buffer=Kk([this.buffer,n]);let r=[],o;for(;(o=Qk(this.buffer,this.carriageReturnIndex))!=null;){if(o.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=o.index;continue}if(this.carriageReturnIndex!=null&&(o.index!==this.carriageReturnIndex+1||o.carriage)){r.push(rC(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}let i=this.carriageReturnIndex!==null?o.preceding-1:o.preceding,s=rC(this.buffer.subarray(0,i));r.push(s),this.buffer=this.buffer.subarray(o.index),this.carriageReturnIndex=null}return r}flush(){return this.buffer.length?this.decode(`
`):[]}};ti.NEWLINE_CHARS=new Set([`
`,"\r"]);ti.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function Qk(e,t){for(let o=t??0;o<e.length;o++){if(e[o]===10)return{preceding:o,index:o+1,carriage:!1};if(e[o]===13)return{preceding:o,index:o+1,carriage:!0}}return null}function Xk(e){for(let r=0;r<e.length-1;r++){if(e[r]===10&&e[r+1]===10||e[r]===13&&e[r+1]===13)return r+2;if(e[r]===13&&e[r+1]===10&&r+3<e.length&&e[r+2]===13&&e[r+3]===10)return r+4}return-1}var qu={off:0,error:200,warn:300,info:400,debug:500},oC=(e,t,n)=>{if(e){if(Nk(qu,e))return e;It(n).warn(`${t} was set to ${JSON.stringify(e)}, expected one of ${JSON.stringify(Object.keys(qu))}`)}};function xs(){}function vu(e,t,n){return!t||qu[e]>qu[n]?xs:t[e].bind(t)}var e1={error:xs,warn:xs,info:xs,debug:xs},iC=new WeakMap;function It(e){var t;let n=e.logger,r=(t=e.logLevel)!==null&&t!==void 0?t:"off";if(!n)return e1;let o=iC.get(n);if(o&&o[0]===r)return o[1];let i={error:vu("error",n,r),warn:vu("warn",n,r),info:vu("info",n,r),debug:vu("debug",n,r)};return iC.set(n,[r,i]),i}var ao=e=>(e.options&&(e.options=Object.assign({},e.options),delete e.options.headers),e.headers&&(e.headers=Object.fromEntries((e.headers instanceof Headers?[...e.headers]:Object.entries(e.headers)).map(([t,n])=>[t,t.toLowerCase()==="x-goog-api-key"||t.toLowerCase()==="authorization"||t.toLowerCase()==="cookie"||t.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in e&&(e.retryOfRequestLogID&&(e.retryOf=e.retryOfRequestLogID),delete e.retryOfRequestLogID),e);var kh=class e{constructor(t,n,r){this.iterator=t,this.controller=n,this.client=r}static fromSSEResponse(t,n,r){let o=!1,i=r?It(r):console;function s(){return gn(this,arguments,function*(){var l,c,f,p;if(o)throw new Mt("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let h=!1;try{try{for(var g=!0,m=mn(t1(t,n)),y;y=yield de(m.next()),l=y.done,!l;g=!0){p=y.value,g=!1;let E=p;if(!h)if(E.data.startsWith("[DONE]")){h=!0;continue}else try{yield yield de(JSON.parse(E.data))}catch(C){throw i.error("Could not parse message into JSON:",E.data),i.error("From chunk:",E.raw),C}}}catch(E){c={error:E}}finally{try{!g&&!l&&(f=m.return)&&(yield de(f.call(m)))}finally{if(c)throw c.error}}h=!0}catch(E){if(Rh(E))return yield de(void 0);throw E}finally{h||n.abort()}})}return new e(s,n,r)}static fromReadableStream(t,n,r){let o=!1;function i(){return gn(this,arguments,function*(){var l,c,f,p;let h=new ti,g=OC(t);try{for(var m=!0,y=mn(g),E;E=yield de(y.next()),l=E.done,!l;m=!0){p=E.value,m=!1;let C=p;for(let T of h.decode(C))yield yield de(T)}}catch(C){c={error:C}}finally{try{!m&&!l&&(f=y.return)&&(yield de(f.call(y)))}finally{if(c)throw c.error}}for(let C of h.flush())yield yield de(C)})}function s(){return gn(this,arguments,function*(){var l,c,f,p;if(o)throw new Mt("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let h=!1;try{try{for(var g=!0,m=mn(i()),y;y=yield de(m.next()),l=y.done,!l;g=!0){p=y.value,g=!1;let E=p;h||E&&(yield yield de(JSON.parse(E)))}}catch(E){c={error:E}}finally{try{!g&&!l&&(f=m.return)&&(yield de(f.call(m)))}finally{if(c)throw c.error}}h=!0}catch(E){if(Rh(E))return yield de(void 0);throw E}finally{h||n.abort()}})}return new e(s,n,r)}[Symbol.asyncIterator](){return this.iterator()}tee(){let t=[],n=[],r=this.iterator(),o=i=>({next:()=>{if(i.length===0){let s=r.next();t.push(s),n.push(s)}return i.shift()}});return[new e(()=>o(t),this.controller,this.client),new e(()=>o(n),this.controller,this.client)]}toReadableStream(){let t=this,n;return kC({async start(){n=t[Symbol.asyncIterator]()},async pull(r){try{let{value:o,done:i}=await n.next();if(i)return r.close();let s=Yh(JSON.stringify(o)+`
`);r.enqueue(s)}catch(o){r.error(o)}},async cancel(){var r;await((r=n.return)===null||r===void 0?void 0:r.call(n))}})}};function t1(e,t){return gn(this,arguments,function*(){var r,o,i,s;if(!e.body)throw t.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Mt("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Mt("Attempted to iterate over a response with no body");let a=new Oh,l=new ti,c=OC(e.body);try{for(var f=!0,p=mn(n1(c)),h;h=yield de(p.next()),r=h.done,!r;f=!0){s=h.value,f=!1;let g=s;for(let m of l.decode(g)){let y=a.decode(m);y&&(yield yield de(y))}}}catch(g){o={error:g}}finally{try{!f&&!r&&(i=p.return)&&(yield de(i.call(p)))}finally{if(o)throw o.error}}for(let g of l.flush()){let m=a.decode(g);m&&(yield yield de(m))}})}function n1(e){return gn(this,arguments,function*(){var n,r,o,i;let s=new Uint8Array;try{for(var a=!0,l=mn(e),c;c=yield de(l.next()),n=c.done,!n;a=!0){i=c.value,a=!1;let f=i;if(f==null)continue;let p=f instanceof ArrayBuffer?new Uint8Array(f):typeof f=="string"?Yh(f):f,h=new Uint8Array(s.length+p.length);h.set(s),h.set(p,s.length),s=h;let g;for(;(g=Xk(s))!==-1;)yield yield de(s.slice(0,g)),s=s.slice(g)}}catch(f){r={error:f}}finally{try{!a&&!n&&(o=l.return)&&(yield de(o.call(l)))}finally{if(r)throw r.error}}s.length>0&&(yield yield de(s))})}var Oh=class{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(t){if(t.endsWith("\r")&&(t=t.substring(0,t.length-1)),!t){if(!this.event&&!this.data.length)return null;let i={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],i}if(this.chunks.push(t),t.startsWith(":"))return null;let[n,r,o]=r1(t,":");return o.startsWith(" ")&&(o=o.substring(1)),n==="event"?this.event=o:n==="data"&&this.data.push(o),null}};function r1(e,t){let n=e.indexOf(t);return n!==-1?[e.substring(0,n),t,e.substring(n+t.length)]:[e,"",""]}async function o1(e,t){let{response:n,requestLogID:r,retryOfRequestLogID:o,startTime:i}=t,s=await(async()=>{var a;if(t.options.stream)return It(e).debug("response",n.status,n.url,n.headers,n.body),t.options.__streamClass?t.options.__streamClass.fromSSEResponse(n,t.controller,e):kh.fromSSEResponse(n,t.controller,e);if(n.status===204)return null;if(t.options.__binaryResponse)return n;let l=n.headers.get("content-type"),c=(a=l?.split(";")[0])===null||a===void 0?void 0:a.trim();return c?.includes("application/json")||c?.endsWith("+json")?await n.json():await n.text()})();return It(e).debug(`[${r}] response parsed`,ao({retryOfRequestLogID:o,url:n.url,status:n.status,body:s,durationMs:Date.now()-i})),s}var Fh=class e extends Promise{constructor(t,n,r=o1){super(o=>{o(null)}),this.responsePromise=n,this.parseResponse=r,this.client=t}_thenUnwrap(t){return new e(this.client,this.responsePromise,async(n,r)=>t(await this.parseResponse(n,r),r))}asResponse(){return this.responsePromise.then(t=>t.response)}async withResponse(){let[t,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:t,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(t=>this.parseResponse(this.client,t))),this.parsedPromise}then(t,n){return this.parse().then(t,n)}catch(t){return this.parse().catch(t)}finally(t){return this.parse().finally(t)}};var BC=Symbol("brand.privateNullableHeaders");function*i1(e){if(!e)return;if(BC in e){let{values:r,nulls:o}=e;yield*r.entries();for(let i of o)yield[i,null];return}let t=!1,n;e instanceof Headers?n=e.entries():X_(e)?n=e:(t=!0,n=Object.entries(e??{}));for(let r of n){let o=r[0];if(typeof o!="string")throw new TypeError("expected header name to be a string");let i=X_(r[1])?r[1]:[r[1]],s=!1;for(let a of i)a!==void 0&&(t&&!s&&(s=!0,yield[o,null]),yield[o,a])}}var Rs=e=>{let t=new Headers,n=new Set;for(let r of e){let o=new Set;for(let[i,s]of i1(r)){let a=i.toLowerCase();o.has(a)||(t.delete(i),o.add(a)),s===null?(t.delete(i),n.add(a)):(t.append(i,s),n.delete(a))}}return{[BC]:!0,values:t,nulls:n}};var Gp=e=>{var t,n,r,o,i,s;if(typeof globalThis.process<"u")return(r=(n=(t=globalThis.process.env)===null||t===void 0?void 0:t[e])===null||n===void 0?void 0:n.trim())!==null&&r!==void 0?r:void 0;if(typeof globalThis.Deno<"u")return(s=(i=(o=globalThis.Deno.env)===null||o===void 0?void 0:o.get)===null||i===void 0?void 0:i.call(o,e))===null||s===void 0?void 0:s.trim()};var VC,s1=(()=>{class e{constructor(n){var r,o,i,s,a,l,c,{baseURL:f=Gp("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:p=(r=Gp("GEMINI_API_KEY"))!==null&&r!==void 0?r:null,apiVersion:h="v1beta"}=n,g=Pu(n,["baseURL","apiKey","apiVersion"]);let m=Object.assign(Object.assign({apiKey:p,apiVersion:h},g),{baseURL:f||"https://generativelanguage.googleapis.com"});this.baseURL=m.baseURL,this.timeout=(o=m.timeout)!==null&&o!==void 0?o:e.DEFAULT_TIMEOUT,this.logger=(i=m.logger)!==null&&i!==void 0?i:console;let y="warn";this.logLevel=y,this.logLevel=(a=(s=oC(m.logLevel,"ClientOptions.logLevel",this))!==null&&s!==void 0?s:oC(Gp("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&a!==void 0?a:y,this.fetchOptions=m.fetchOptions,this.maxRetries=(l=m.maxRetries)!==null&&l!==void 0?l:2,this.fetch=(c=m.fetch)!==null&&c!==void 0?c:Bk(),this.encoder=$k,this._options=m,this.apiKey=p,this.apiVersion=h,this.clientAdapter=m.clientAdapter}withOptions(n){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),n))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:n,nulls:r}){if(!(n.has("authorization")||n.has("x-goog-api-key"))&&!(this.apiKey&&n.get("x-goog-api-key"))&&!r.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(n){let r=Rs([n.headers]);if(!(r.values.has("authorization")||r.values.has("x-goog-api-key"))){if(this.apiKey)return Rs([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Rs([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(n){return Object.entries(n).filter(([r,o])=>typeof o<"u").map(([r,o])=>{if(typeof o=="string"||typeof o=="number"||typeof o=="boolean")return`${encodeURIComponent(r)}=${encodeURIComponent(o)}`;if(o===null)return`${encodeURIComponent(r)}=`;throw new Mt(`Cannot stringify type ${typeof o}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Ko}`}defaultIdempotencyKey(){return`stainless-node-retry-${Dk()}`}makeStatusError(n,r,o,i){return Rt.generate(n,r,o,i)}buildURL(n,r,o){let i=!this.baseURLOverridden()&&o||this.baseURL,s=bk(n)?new URL(n):new URL(i+(i.endsWith("/")&&n.startsWith("/")?n.slice(1):n)),a=this.defaultQuery();return Rk(a)||(r=Object.assign(Object.assign({},a),r)),typeof r=="object"&&r&&!Array.isArray(r)&&(s.search=this.stringifyQuery(r)),s.toString()}async prepareOptions(n){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!n.path.startsWith(`/${this.apiVersion}/projects/`)){let r=n.path.slice(this.apiVersion.length+1);n.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${r}`}}async prepareRequest(n,{url:r,options:o}){}get(n,r){return this.methodRequest("get",n,r)}post(n,r){return this.methodRequest("post",n,r)}patch(n,r){return this.methodRequest("patch",n,r)}put(n,r){return this.methodRequest("put",n,r)}delete(n,r){return this.methodRequest("delete",n,r)}methodRequest(n,r,o){return this.request(Promise.resolve(o).then(i=>Object.assign({method:n,path:r},i)))}request(n,r=null){return new Fh(this,this.makeRequest(n,r,void 0))}async makeRequest(n,r,o){var i,s,a;let l=await n,c=(i=l.maxRetries)!==null&&i!==void 0?i:this.maxRetries;r==null&&(r=c),await this.prepareOptions(l);let{req:f,url:p,timeout:h}=await this.buildRequest(l,{retryCount:c-r});await this.prepareRequest(f,{url:p,options:l});let g="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),m=o===void 0?"":`, retryOf: ${o}`,y=Date.now();if(It(this).debug(`[${g}] sending request`,ao({retryOfRequestLogID:o,method:l.method,url:p,options:l,headers:f.headers})),!((s=l.signal)===null||s===void 0)&&s.aborted)throw new Os;let E=new AbortController,C=await this.fetchWithTimeout(p,f,h,E).catch(Nh),T=Date.now();if(C instanceof globalThis.Error){let A=`retrying, ${r} attempts remaining`;if(!((a=l.signal)===null||a===void 0)&&a.aborted)throw new Os;let b=Rh(C)||/timed? ?out/i.test(String(C)+("cause"in C?String(C.cause):""));if(r)return It(this).info(`[${g}] connection ${b?"timed out":"failed"} - ${A}`),It(this).debug(`[${g}] connection ${b?"timed out":"failed"} (${A})`,ao({retryOfRequestLogID:o,url:p,durationMs:T-y,message:C.message})),this.retryRequest(l,r,o??g);throw It(this).info(`[${g}] connection ${b?"timed out":"failed"} - error; no more retries left`),It(this).debug(`[${g}] connection ${b?"timed out":"failed"} (error; no more retries left)`,ao({retryOfRequestLogID:o,url:p,durationMs:T-y,message:C.message})),b?new ku:new ei({cause:C})}let D=`[${g}${m}] ${f.method} ${p} ${C.ok?"succeeded":"failed"} with status ${C.status} in ${T-y}ms`;if(!C.ok){let A=await this.shouldRetry(C);if(r&&A){let S=`retrying, ${r} attempts remaining`;return await Hk(C.body),It(this).info(`${D} - ${S}`),It(this).debug(`[${g}] response error (${S})`,ao({retryOfRequestLogID:o,url:C.url,status:C.status,headers:C.headers,durationMs:T-y})),this.retryRequest(l,r,o??g,C.headers)}let b=A?"error; no more retries left":"error; not retryable";It(this).info(`${D} - ${b}`);let O=await C.text().catch(S=>Nh(S).message),R=Pk(O),B=R?void 0:O;throw It(this).debug(`[${g}] response error (${b})`,ao({retryOfRequestLogID:o,url:C.url,status:C.status,headers:C.headers,message:B,durationMs:Date.now()-y})),this.makeStatusError(C.status,R,B,C.headers)}return It(this).info(D),It(this).debug(`[${g}] response start`,ao({retryOfRequestLogID:o,url:C.url,status:C.status,headers:C.headers,durationMs:T-y})),{response:C,options:l,controller:E,requestLogID:g,retryOfRequestLogID:o,startTime:y}}async fetchWithTimeout(n,r,o,i){let s=r||{},{signal:a,method:l}=s,c=Pu(s,["signal","method"]);a&&a.addEventListener("abort",()=>i.abort());let f=setTimeout(()=>i.abort(),o),p=globalThis.ReadableStream&&c.body instanceof globalThis.ReadableStream||typeof c.body=="object"&&c.body!==null&&Symbol.asyncIterator in c.body,h=Object.assign(Object.assign(Object.assign({signal:i.signal},p?{duplex:"half"}:{}),{method:"GET"}),c);l&&(h.method=l.toUpperCase());try{return await this.fetch.call(void 0,n,h)}finally{clearTimeout(f)}}async shouldRetry(n){let r=n.headers.get("x-should-retry");return r==="true"?!0:r==="false"?!1:n.status===408||n.status===409||n.status===429||n.status>=500}async retryRequest(n,r,o,i){var s;let a,l=i?.get("retry-after-ms");if(l){let f=parseFloat(l);Number.isNaN(f)||(a=f)}let c=i?.get("retry-after");if(c&&!a){let f=parseFloat(c);Number.isNaN(f)?a=Date.parse(c)-Date.now():a=f*1e3}if(!(a&&0<=a&&a<60*1e3)){let f=(s=n.maxRetries)!==null&&s!==void 0?s:this.maxRetries;a=this.calculateDefaultRetryTimeoutMillis(r,f)}return await kk(a),this.makeRequest(n,r-1,o)}calculateDefaultRetryTimeoutMillis(n,r){let s=r-n,a=Math.min(.5*Math.pow(2,s),8),l=1-Math.random()*.25;return a*l*1e3}async buildRequest(n,{retryCount:r=0}={}){var o,i,s;let a=Object.assign({},n),{method:l,path:c,query:f,defaultBaseURL:p}=a,h=this.buildURL(c,f,p);"timeout"in a&&xk("timeout",a.timeout),a.timeout=(o=a.timeout)!==null&&o!==void 0?o:this.timeout;let{bodyHeaders:g,body:m}=this.buildBody({options:a}),y=await this.buildHeaders({options:n,method:l,bodyHeaders:g,retryCount:r});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:l,headers:y},a.signal&&{signal:a.signal}),globalThis.ReadableStream&&m instanceof globalThis.ReadableStream&&{duplex:"half"}),m&&{body:m}),(i=this.fetchOptions)!==null&&i!==void 0?i:{}),(s=a.fetchOptions)!==null&&s!==void 0?s:{}),url:h,timeout:a.timeout}}async buildHeaders({options:n,method:r,bodyHeaders:o,retryCount:i}){let s={};this.idempotencyHeader&&r!=="get"&&(n.idempotencyKey||(n.idempotencyKey=this.defaultIdempotencyKey()),s[this.idempotencyHeader]=n.idempotencyKey);let a=await this.authHeaders(n),l=Rs([s,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(i)},n.timeout?{"X-Stainless-Timeout":String(Math.trunc(n.timeout/1e3))}:{}),Uk()),this._options.defaultHeaders,o,n.headers,a]);return this.validateHeaders(l),l.values}buildBody({options:{body:n,headers:r}}){if(!n)return{bodyHeaders:void 0,body:void 0};let o=Rs([r]);return ArrayBuffer.isView(n)||n instanceof ArrayBuffer||n instanceof DataView||typeof n=="string"&&o.values.has("content-type")||globalThis.Blob&&n instanceof globalThis.Blob||n instanceof FormData||n instanceof URLSearchParams||globalThis.ReadableStream&&n instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:n}:typeof n=="object"&&(Symbol.asyncIterator in n||Symbol.iterator in n&&"next"in n&&typeof n.next=="function")?{bodyHeaders:void 0,body:Vk(n)}:this.encoder({body:n,headers:o})}}return e.DEFAULT_TIMEOUT=6e4,e})(),Ye=class extends s1{constructor(){super(...arguments),this.interactions=new zu(this)}};VC=Ye;Ye.GeminiNextGenAPIClient=VC;Ye.GeminiNextGenAPIClientError=Mt;Ye.APIError=Rt;Ye.APIConnectionError=ei;Ye.APIConnectionTimeoutError=ku;Ye.APIUserAbortError=Os;Ye.NotFoundError=Uu;Ye.ConflictError=Bu;Ye.RateLimitError=Hu;Ye.BadRequestError=Ou;Ye.AuthenticationError=Fu;Ye.InternalServerError=$u;Ye.PermissionDeniedError=Lu;Ye.UnprocessableEntityError=Vu;Ye.toFile=Wk;Ye.Interactions=zu;function a1(e,t){let n={},r=u(e,["name"]);return r!=null&&d(n,["_url","name"],r),n}function l1(e,t){let n={},r=u(e,["name"]);return r!=null&&d(n,["_url","name"],r),n}function u1(e,t){let n={},r=u(e,["sdkHttpResponse"]);return r!=null&&d(n,["sdkHttpResponse"],r),n}function c1(e,t){let n={},r=u(e,["sdkHttpResponse"]);return r!=null&&d(n,["sdkHttpResponse"],r),n}function d1(e,t,n){let r={};if(u(e,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");let o=u(e,["tunedModelDisplayName"]);if(t!==void 0&&o!=null&&d(t,["displayName"],o),u(e,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");let i=u(e,["epochCount"]);t!==void 0&&i!=null&&d(t,["tuningTask","hyperparameters","epochCount"],i);let s=u(e,["learningRateMultiplier"]);if(s!=null&&d(r,["tuningTask","hyperparameters","learningRateMultiplier"],s),u(e,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(u(e,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(u(e,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");if(u(e,["tuningMode"])!==void 0)throw new Error("tuningMode parameter is not supported in Gemini API.");if(u(e,["customBaseModel"])!==void 0)throw new Error("customBaseModel parameter is not supported in Gemini API.");let a=u(e,["batchSize"]);t!==void 0&&a!=null&&d(t,["tuningTask","hyperparameters","batchSize"],a);let l=u(e,["learningRate"]);if(t!==void 0&&l!=null&&d(t,["tuningTask","hyperparameters","learningRate"],l),u(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(u(e,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");if(u(e,["baseTeacherModel"])!==void 0)throw new Error("baseTeacherModel parameter is not supported in Gemini API.");if(u(e,["tunedTeacherModelSource"])!==void 0)throw new Error("tunedTeacherModelSource parameter is not supported in Gemini API.");if(u(e,["sftLossWeightMultiplier"])!==void 0)throw new Error("sftLossWeightMultiplier parameter is not supported in Gemini API.");if(u(e,["outputUri"])!==void 0)throw new Error("outputUri parameter is not supported in Gemini API.");return r}function f1(e,t,n){let r={},o=u(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){let b=u(e,["validationDataset"]);t!==void 0&&b!=null&&d(t,["supervisedTuningSpec"],zp(b))}else if(o==="PREFERENCE_TUNING"){let b=u(e,["validationDataset"]);t!==void 0&&b!=null&&d(t,["preferenceOptimizationSpec"],zp(b))}else if(o==="DISTILLATION"){let b=u(e,["validationDataset"]);t!==void 0&&b!=null&&d(t,["distillationSpec"],zp(b))}let i=u(e,["tunedModelDisplayName"]);t!==void 0&&i!=null&&d(t,["tunedModelDisplayName"],i);let s=u(e,["description"]);t!==void 0&&s!=null&&d(t,["description"],s);let a=u(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){let b=u(e,["epochCount"]);t!==void 0&&b!=null&&d(t,["supervisedTuningSpec","hyperParameters","epochCount"],b)}else if(a==="PREFERENCE_TUNING"){let b=u(e,["epochCount"]);t!==void 0&&b!=null&&d(t,["preferenceOptimizationSpec","hyperParameters","epochCount"],b)}else if(a==="DISTILLATION"){let b=u(e,["epochCount"]);t!==void 0&&b!=null&&d(t,["distillationSpec","hyperParameters","epochCount"],b)}let l=u(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){let b=u(e,["learningRateMultiplier"]);t!==void 0&&b!=null&&d(t,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],b)}else if(l==="PREFERENCE_TUNING"){let b=u(e,["learningRateMultiplier"]);t!==void 0&&b!=null&&d(t,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],b)}else if(l==="DISTILLATION"){let b=u(e,["learningRateMultiplier"]);t!==void 0&&b!=null&&d(t,["distillationSpec","hyperParameters","learningRateMultiplier"],b)}let c=u(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){let b=u(e,["exportLastCheckpointOnly"]);t!==void 0&&b!=null&&d(t,["supervisedTuningSpec","exportLastCheckpointOnly"],b)}else if(c==="PREFERENCE_TUNING"){let b=u(e,["exportLastCheckpointOnly"]);t!==void 0&&b!=null&&d(t,["preferenceOptimizationSpec","exportLastCheckpointOnly"],b)}else if(c==="DISTILLATION"){let b=u(e,["exportLastCheckpointOnly"]);t!==void 0&&b!=null&&d(t,["distillationSpec","exportLastCheckpointOnly"],b)}let f=u(n,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){let b=u(e,["adapterSize"]);t!==void 0&&b!=null&&d(t,["supervisedTuningSpec","hyperParameters","adapterSize"],b)}else if(f==="PREFERENCE_TUNING"){let b=u(e,["adapterSize"]);t!==void 0&&b!=null&&d(t,["preferenceOptimizationSpec","hyperParameters","adapterSize"],b)}else if(f==="DISTILLATION"){let b=u(e,["adapterSize"]);t!==void 0&&b!=null&&d(t,["distillationSpec","hyperParameters","adapterSize"],b)}let p=u(n,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){let b=u(e,["tuningMode"]);t!==void 0&&b!=null&&d(t,["supervisedTuningSpec","tuningMode"],b)}let h=u(e,["customBaseModel"]);t!==void 0&&h!=null&&d(t,["customBaseModel"],h);let g=u(n,["config","method"]);if(g===void 0&&(g="SUPERVISED_FINE_TUNING"),g==="SUPERVISED_FINE_TUNING"){let b=u(e,["batchSize"]);t!==void 0&&b!=null&&d(t,["supervisedTuningSpec","hyperParameters","batchSize"],b)}let m=u(n,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){let b=u(e,["learningRate"]);t!==void 0&&b!=null&&d(t,["supervisedTuningSpec","hyperParameters","learningRate"],b)}let y=u(e,["labels"]);t!==void 0&&y!=null&&d(t,["labels"],y);let E=u(e,["beta"]);t!==void 0&&E!=null&&d(t,["preferenceOptimizationSpec","hyperParameters","beta"],E);let C=u(e,["baseTeacherModel"]);t!==void 0&&C!=null&&d(t,["distillationSpec","baseTeacherModel"],C);let T=u(e,["tunedTeacherModelSource"]);t!==void 0&&T!=null&&d(t,["distillationSpec","tunedTeacherModelSource"],T);let D=u(e,["sftLossWeightMultiplier"]);t!==void 0&&D!=null&&d(t,["distillationSpec","hyperParameters","sftLossWeightMultiplier"],D);let A=u(e,["outputUri"]);return t!==void 0&&A!=null&&d(t,["outputUri"],A),r}function p1(e,t){let n={},r=u(e,["baseModel"]);r!=null&&d(n,["baseModel"],r);let o=u(e,["preTunedModel"]);o!=null&&d(n,["preTunedModel"],o);let i=u(e,["trainingDataset"]);i!=null&&w1(i);let s=u(e,["config"]);return s!=null&&d1(s,n),n}function h1(e,t){let n={},r=u(e,["baseModel"]);r!=null&&d(n,["baseModel"],r);let o=u(e,["preTunedModel"]);o!=null&&d(n,["preTunedModel"],o);let i=u(e,["trainingDataset"]);i!=null&&D1(i,n,t);let s=u(e,["config"]);return s!=null&&f1(s,n,t),n}function g1(e,t){let n={},r=u(e,["name"]);return r!=null&&d(n,["_url","name"],r),n}function m1(e,t){let n={},r=u(e,["name"]);return r!=null&&d(n,["_url","name"],r),n}function y1(e,t,n){let r={},o=u(e,["pageSize"]);t!==void 0&&o!=null&&d(t,["_query","pageSize"],o);let i=u(e,["pageToken"]);t!==void 0&&i!=null&&d(t,["_query","pageToken"],i);let s=u(e,["filter"]);return t!==void 0&&s!=null&&d(t,["_query","filter"],s),r}function v1(e,t,n){let r={},o=u(e,["pageSize"]);t!==void 0&&o!=null&&d(t,["_query","pageSize"],o);let i=u(e,["pageToken"]);t!==void 0&&i!=null&&d(t,["_query","pageToken"],i);let s=u(e,["filter"]);return t!==void 0&&s!=null&&d(t,["_query","filter"],s),r}function E1(e,t){let n={},r=u(e,["config"]);return r!=null&&y1(r,n),n}function _1(e,t){let n={},r=u(e,["config"]);return r!=null&&v1(r,n),n}function C1(e,t){let n={},r=u(e,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);let o=u(e,["nextPageToken"]);o!=null&&d(n,["nextPageToken"],o);let i=u(e,["tunedModels"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>HC(a))),d(n,["tuningJobs"],s)}return n}function I1(e,t){let n={},r=u(e,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);let o=u(e,["nextPageToken"]);o!=null&&d(n,["nextPageToken"],o);let i=u(e,["tuningJobs"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>Lh(a))),d(n,["tuningJobs"],s)}return n}function T1(e,t){let n={},r=u(e,["name"]);r!=null&&d(n,["model"],r);let o=u(e,["name"]);return o!=null&&d(n,["endpoint"],o),n}function w1(e,t){let n={};if(u(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(u(e,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");let r=u(e,["examples"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(i=>i)),d(n,["examples","examples"],o)}return n}function D1(e,t,n){let r={},o=u(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){let s=u(e,["gcsUri"]);t!==void 0&&s!=null&&d(t,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(o==="PREFERENCE_TUNING"){let s=u(e,["gcsUri"]);t!==void 0&&s!=null&&d(t,["preferenceOptimizationSpec","trainingDatasetUri"],s)}else if(o==="DISTILLATION"){let s=u(e,["gcsUri"]);t!==void 0&&s!=null&&d(t,["distillationSpec","promptDatasetUri"],s)}let i=u(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){let s=u(e,["vertexDatasetResource"]);t!==void 0&&s!=null&&d(t,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(i==="PREFERENCE_TUNING"){let s=u(e,["vertexDatasetResource"]);t!==void 0&&s!=null&&d(t,["preferenceOptimizationSpec","trainingDatasetUri"],s)}else if(i==="DISTILLATION"){let s=u(e,["vertexDatasetResource"]);t!==void 0&&s!=null&&d(t,["distillationSpec","promptDatasetUri"],s)}if(u(e,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function HC(e,t){let n={},r=u(e,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);let o=u(e,["name"]);o!=null&&d(n,["name"],o);let i=u(e,["state"]);i!=null&&d(n,["state"],gC(i));let s=u(e,["createTime"]);s!=null&&d(n,["createTime"],s);let a=u(e,["tuningTask","startTime"]);a!=null&&d(n,["startTime"],a);let l=u(e,["tuningTask","completeTime"]);l!=null&&d(n,["endTime"],l);let c=u(e,["updateTime"]);c!=null&&d(n,["updateTime"],c);let f=u(e,["description"]);f!=null&&d(n,["description"],f);let p=u(e,["baseModel"]);p!=null&&d(n,["baseModel"],p);let h=u(e,["_self"]);return h!=null&&d(n,["tunedModel"],T1(h)),n}function Lh(e,t){let n={},r=u(e,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);let o=u(e,["name"]);o!=null&&d(n,["name"],o);let i=u(e,["state"]);i!=null&&d(n,["state"],gC(i));let s=u(e,["createTime"]);s!=null&&d(n,["createTime"],s);let a=u(e,["startTime"]);a!=null&&d(n,["startTime"],a);let l=u(e,["endTime"]);l!=null&&d(n,["endTime"],l);let c=u(e,["updateTime"]);c!=null&&d(n,["updateTime"],c);let f=u(e,["error"]);f!=null&&d(n,["error"],f);let p=u(e,["description"]);p!=null&&d(n,["description"],p);let h=u(e,["baseModel"]);h!=null&&d(n,["baseModel"],h);let g=u(e,["tunedModel"]);g!=null&&d(n,["tunedModel"],g);let m=u(e,["preTunedModel"]);m!=null&&d(n,["preTunedModel"],m);let y=u(e,["supervisedTuningSpec"]);y!=null&&d(n,["supervisedTuningSpec"],y);let E=u(e,["preferenceOptimizationSpec"]);E!=null&&d(n,["preferenceOptimizationSpec"],E);let C=u(e,["distillationSpec"]);C!=null&&d(n,["distillationSpec"],C);let T=u(e,["tuningDataStats"]);T!=null&&d(n,["tuningDataStats"],T);let D=u(e,["encryptionSpec"]);D!=null&&d(n,["encryptionSpec"],D);let A=u(e,["partnerModelTuningSpec"]);A!=null&&d(n,["partnerModelTuningSpec"],A);let b=u(e,["customBaseModel"]);b!=null&&d(n,["customBaseModel"],b);let O=u(e,["experiment"]);O!=null&&d(n,["experiment"],O);let R=u(e,["labels"]);R!=null&&d(n,["labels"],R);let B=u(e,["outputUri"]);B!=null&&d(n,["outputUri"],B);let G=u(e,["pipelineJob"]);G!=null&&d(n,["pipelineJob"],G);let S=u(e,["serviceAccount"]);S!=null&&d(n,["serviceAccount"],S);let k=u(e,["tunedModelDisplayName"]);k!=null&&d(n,["tunedModelDisplayName"],k);let _=u(e,["veoTuningSpec"]);return _!=null&&d(n,["veoTuningSpec"],_),n}function S1(e,t){let n={},r=u(e,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);let o=u(e,["name"]);o!=null&&d(n,["name"],o);let i=u(e,["metadata"]);i!=null&&d(n,["metadata"],i);let s=u(e,["done"]);s!=null&&d(n,["done"],s);let a=u(e,["error"]);return a!=null&&d(n,["error"],a),n}function zp(e,t){let n={},r=u(e,["gcsUri"]);r!=null&&d(n,["validationDatasetUri"],r);let o=u(e,["vertexDatasetResource"]);return o!=null&&d(n,["validationDatasetUri"],o),n}var Uh=class extends yn{constructor(t){super(),this.apiClient=t,this.list=async(n={})=>new nr(Er.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var r;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){let o={tunedModelName:n.baseModel};!((r=n.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(o.checkpointId=n.config.preTunedModelCheckpointId);let i=Object.assign(Object.assign({},n),{preTunedModel:o});return i.baseModel=void 0,await this.tuneInternal(i)}else{let o=Object.assign({},n);return await this.tuneInternal(o)}else{let o=Object.assign({},n),i=await this.tuneMldevInternal(o),s="";return i.metadata!==void 0&&i.metadata.tunedModel!==void 0?s=i.metadata.tunedModel:i.name!==void 0&&i.name.includes("/operations/")&&(s=i.name.split("/operations/")[0]),{name:s,state:lC.JOB_STATE_QUEUED}}}}async getInternal(t){var n,r,o,i;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=m1(t);return a=Y("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>Lh(f))}else{let c=g1(t);return a=Y("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>HC(f))}}async listInternal(t){var n,r,o,i;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=_1(t);return a=Y("tuningJobs",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{let p=I1(f),h=new bu;return Object.assign(h,p),h})}else{let c=E1(t);return a=Y("tunedModels",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{let p=C1(f),h=new bu;return Object.assign(h,p),h})}}async cancel(t){var n,r,o,i;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=l1(t);return a=Y("{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{let p=c1(f),h=new Au;return Object.assign(h,p),h})}else{let c=a1(t);return a=Y("{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(o=t.config)===null||o===void 0?void 0:o.httpOptions,abortSignal:(i=t.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{let p=u1(f),h=new Au;return Object.assign(h,p),h})}}async tuneInternal(t){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI()){let a=h1(t,t);return i=Y("tuningJobs",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{let f=c;return f.sdkHttpResponse={headers:l.headers},f})),o.then(l=>Lh(l))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(t){var n,r;let o,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=p1(t);return i=Y("tunedModels",a._url),s=a._query,delete a._url,delete a._query,o=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=t.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=t.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{let f=c;return f.sdkHttpResponse={headers:l.headers},f})),o.then(l=>S1(l))}}};var Bh=class{async download(t,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}},b1=1024*1024*8,A1=3,M1=1e3,R1=2,ju="x-goog-upload-status";async function N1(e,t,n){var r;let o=await $C(e,t,n),i=await o?.json();if(((r=o?.headers)===null||r===void 0?void 0:r[ju])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return i.file}async function x1(e,t,n){var r;let o=await $C(e,t,n),i=await o?.json();if(((r=o?.headers)===null||r===void 0?void 0:r[ju])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");let s=aC(i),a=new lh;return Object.assign(a,s),a}async function $C(e,t,n){var r,o;let i=0,s=0,a=new Ps(new Response),l="upload";for(i=e.size;s<i;){let c=Math.min(b1,i-s),f=e.slice(s,s+c);s+c>=i&&(l+=", finalize");let p=0,h=M1;for(;p<A1&&(a=await n.request({path:"",body:f,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:t,headers:{"X-Goog-Upload-Command":l,"X-Goog-Upload-Offset":String(s),"Content-Length":String(c)}}}),!(!((r=a?.headers)===null||r===void 0)&&r[ju]));)p++,await k1(h),h=h*R1;if(s+=c,((o=a?.headers)===null||o===void 0?void 0:o[ju])!=="active")break;if(i<=s)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return a}async function P1(e){return{size:e.size,type:e.type}}function k1(e){return new Promise(t=>setTimeout(t,e))}var Vh=class{async upload(t,n,r){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await N1(t,n,r)}async uploadToFileSearchStore(t,n,r){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await x1(t,n,r)}async stat(t){if(typeof t=="string")throw new Error("File path is not supported in browser uploader.");return await P1(t)}};var Hh=class{create(t,n,r){return new $h(t,n,r)}},$h=class{constructor(t,n,r){this.url=t,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(t){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(t)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}};var sC="x-goog-api-key",Gh=class{constructor(t){this.apiKey=t}async addAuthHeaders(t,n){if(t.get(sC)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");t.append(sC,this.apiKey)}}};var O1="gl-node/",Wu=class{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");let t=this.httpOptions;t?.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");let n=new Ye({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:t?.timeout});return this._interactions=n.interactions,this._interactions}constructor(t){var n;if(t.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(t.project||t.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=t.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=t.apiKey;let r=sM(t.httpOptions,t.vertexai,void 0,void 0);r&&(t.httpOptions?t.httpOptions.baseUrl=r:t.httpOptions={baseUrl:r}),this.apiVersion=t.apiVersion,this.httpOptions=t.httpOptions;let o=new Gh(this.apiKey);this.apiClient=new Eh({auth:o,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:O1+"web",uploader:new Vh,downloader:new Bh}),this.models=new Dh(this.apiClient),this.live=new Th(this.apiClient,o,new Hh),this.batches=new dh(this.apiClient),this.chats=new ph(this.models,this.apiClient),this.caches=new fh(this.apiClient),this.files=new gh(this.apiClient),this.operations=new Sh(this.apiClient),this.authTokens=new bh(this.apiClient),this.tunings=new Uh(this.apiClient),this.fileSearchStores=new Mh(this.apiClient)}};var Fs={production:!1,baseUrl:"http://localhost:8000/v1",apiKey:"AIzaSyCjajLAu1tUQzV01cMiR7auV_ieZqomeGU"};var Ku=class e{ai;constructor(){if(!Fs.apiKey)throw new Error("API_KEY environment variable not set");this.ai=new Wu({apiKey:Fs.apiKey})}async generateImage(t,n,r,o){try{if(o.toLowerCase().startsWith("gemini")){let s=(await this.ai.models.generateContent({model:o,contents:{parts:[{text:t}]},config:{imageConfig:{aspectRatio:n}}})).candidates?.[0]?.content?.parts?.find(a=>a.inlineData);if(s&&s.inlineData&&s.inlineData.data)return[`data:image/png;base64,${s.inlineData.data}`];throw new Error("No image content generated. The model might have returned only text.")}else{let i={numberOfImages:r,outputMimeType:"image/jpeg",aspectRatio:n},s=await this.ai.models.generateImages({model:o,prompt:t,config:i});if(s.generatedImages&&s.generatedImages.length>0)return s.generatedImages.map(a=>`data:image/jpeg;base64,${a?.image?.imageBytes}`);throw new Error("No images were generated.")}}catch(i){console.error("Error generating image:",i);let s=i instanceof Error?i.message:"An unknown error occurred";throw new Error(`API Error: ${s}`)}}static \u0275fac=function(n){return new(n||e)};static \u0275prov=te({token:e,factory:e.\u0275fac,providedIn:"root"})};var GC=[{label:"None (Raw Prompt)",value:""},{label:"Photorealistic (DSLR)",value:"photorealistic, 8k, highly detailed, shot on DSLR, realistic lighting, sharp focus"},{label:"Vintage Illustration",value:"vintage hand-drawn illustration, retro style, ink and paper texture, nostalgic aesthetic"},{label:"Oil Painting",value:"oil painting style, textured canvas, impasto brushstrokes, classical art"},{label:"Cinematic",value:"cinematic lighting, movie scene, dramatic atmosphere, 4k, anamorphic lens"},{label:"Anime/Manga",value:"anime style, vibrant colors, studio ghibli inspired, 2D cel shaded"},{label:"3D Render",value:"3D render, blender, octane render, unreal engine 5, ray tracing"},{label:"Digital Art",value:"digital art, concept art, trending on artstation, clean lines"},{label:"Watercolor",value:"watercolor painting, soft edges, artistic, bleeding colors, wet-on-wet"}];var zC=[{label:"Landscape (16:9)",value:"1792x1024"},{label:"Portrait (9:16)",value:"1024x1792"},{label:"Square (1:1)",value:"1024x1024"}],qC=[{label:"Nano Banana",value:"nano-banana"},{label:"Nano Banana R2I",value:"nano-banana-r2i"},{label:"Imagen 4.0",value:"IMAGEN_4"}];var Qu=class e{set(t,n){try{localStorage.setItem(t,JSON.stringify(n))}catch(r){console.error("LocalStorage set error",r)}}get(t){try{let n=localStorage.getItem(t);return n?JSON.parse(n):null}catch(n){return console.error("LocalStorage get error",n),null}}remove(t){localStorage.removeItem(t)}clear(){localStorage.clear()}has(t){return localStorage.getItem(t)!==null}static \u0275fac=function(n){return new(n||e)};static \u0275prov=te({token:e,factory:e.\u0275fac,providedIn:"root"})};var Zh=(e,t)=>t.value;function L1(e,t){if(e&1){let n=Qr();se(0,"button",25),pt("click",function(){dt(n);let o=We();return ft(o.clearPrompt())}),De(1," Clear "),ae()}}function U1(e,t){if(e&1&&(se(0,"option",18),De(1),ae()),e&2){let n=t.$implicit;at("value",n.value),ye(),An(n.label)}}function B1(e,t){if(e&1&&(se(0,"option",18),De(1),ae()),e&2){let n=t.$implicit;at("value",n.value),ye(),An(n.label)}}function V1(e,t){if(e&1&&(se(0,"option",18),De(1),ae()),e&2){let n=t.$implicit;at("value",n.value),ye(),An(n.label)}}function H1(e,t){e&1&&(Gn(),se(0,"svg",26),bt(1,"circle",27)(2,"path",28),ae(),zn(),se(3,"span"),De(4,"Generating..."),ae())}function $1(e,t){e&1&&(se(0,"span"),De(1,"Generate Images"),ae())}var Xu=class e{constructor(t){this.storage=t;this.token.set(this.storage.get("token")||"")}isLoading=dn.required();generate=Wv();stylePresets=GC;imageModels=qC;sizeOptions=zC;prompt=Le(`A photorealistic portrait of a pensive android in a neon-lit alley.
A majestic fantasy castle perched on a floating island at sunrise.
A cute, fluffy red panda enjoying a bowl of ramen noodles.`);size=Le("1792x1024");numberOfImages=Le(1);stylePreset=Le("");token=Le("");model=Le("nano-banana");onTokenChange(t){let r=t.target.value;this.token.set(r),this.storage.set("token",r)}onNumberOfImagesChange(t){let r=t.target.valueAsNumber;if(isNaN(r)){this.numberOfImages.set(1);return}let o=Math.max(1,Math.min(4,r));this.numberOfImages.set(o)}handleFileInput(t){let n=t.target,r=n.files?.[0];if(!r)return;if(r.type!=="text/plain"){console.error("Invalid file type. Please upload a .txt file."),n.value="";return}let o=new FileReader;o.onload=i=>{let s=i.target?.result;s&&this.prompt.set(s)},o.onerror=()=>{console.error("Error reading file:",o.error)},o.readAsText(r),n.value=""}clearPrompt(){this.prompt.set("")}submitGeneration(){this.prompt().trim()&&this.generate.emit({prompt:this.prompt(),size:this.size(),n:this.numberOfImages(),stylePreset:this.stylePreset(),model:this.model(),token:this.token()})}static \u0275fac=function(n){return new(n||e)(qt(Qu))};static \u0275cmp=cn({type:e,selectors:[["app-gen-img-form"]],inputs:{isLoading:[1,"isLoading"]},outputs:{generate:"generate"},decls:46,vars:9,consts:[["fileInput",""],[1,"bg-slate-800/50","rounded-lg","shadow-lg","p-6","mb-8","border","border-slate-700"],["for","number-of-images",1,"block","mb-2","text-sm","font-medium","text-slate-300"],["id","number-of-images","type","password",1,"w-full","bg-slate-900","border","border-slate-600","rounded-md","p-3","text-slate-200","focus:ring-2","focus:ring-indigo-500","focus:border-indigo-500","transition-colors",3,"input","value"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-6","mt-4"],[1,"md:col-span-2"],[1,"flex","items-center","justify-between","mb-2"],["for","prompts-textarea",1,"block","text-sm","font-medium","text-slate-300"],[1,"flex","items-center","gap-2"],[1,"cursor-pointer","text-sm","bg-slate-700","hover:bg-slate-600","text-slate-300","font-semibold","py-1","px-3","rounded-md","transition-colors",3,"click"],[1,"cursor-pointer","text-sm","bg-slate-700","hover:bg-red-600/50","text-slate-300","font-semibold","py-1","px-3","rounded-md","transition-colors"],["type","file","accept",".txt",1,"hidden",3,"change"],["id","prompts-textarea","rows","8","placeholder","e.g., A futuristic city skyline at dusk...",1,"w-full","bg-slate-900","border","border-slate-600","rounded-md","p-3","text-slate-200","placeholder-slate-500","focus:ring-2","focus:ring-indigo-500","focus:border-indigo-500","transition-colors",3,"input","value"],[1,"flex","flex-col","justify-between"],[1,"space-y-4"],[1,"grid","grid-cols-2","gap-4"],["for","aspect-ratio",1,"block","mb-2","text-sm","font-medium","text-slate-300"],["id","aspect-ratio",1,"w-full","bg-slate-900","border","border-slate-600","rounded-md","p-3","text-slate-200","focus:ring-2","focus:ring-indigo-500","focus:border-indigo-500","transition-colors",3,"change","value"],[3,"value"],["id","number-of-images","type","number","min","1","max","4",1,"w-full","bg-slate-900","border","border-slate-600","rounded-md","p-3","text-slate-200","focus:ring-2","focus:ring-indigo-500","focus:border-indigo-500","transition-colors",3,"input","value"],["for","style-preset",1,"block","mb-2","text-sm","font-medium","text-slate-300"],["id","style-preset",1,"w-full","bg-slate-900","border","border-slate-600","rounded-md","p-3","text-slate-200","focus:ring-2","focus:ring-indigo-500","focus:border-indigo-500","transition-colors",3,"change","value"],["for","model-selection",1,"block","mb-2","text-sm","font-medium","text-slate-300"],["id","model-selection",1,"w-full","bg-slate-900","border","border-slate-600","rounded-md","p-3","text-slate-200","focus:ring-2","focus:ring-indigo-500","focus:border-indigo-500","transition-colors",3,"change","value"],[1,"cursor-pointer","w-full","mt-4","flex","items-center","justify-center","bg-indigo-600","text-white","font-bold","py-3","px-4","rounded-md","hover:bg-indigo-500","disabled:bg-slate-600","disabled:cursor-not-allowed","transition-all","duration-300","ease-in-out","transform","hover:scale-105","disabled:scale-100",3,"click","disabled"],[1,"cursor-pointer","text-sm","bg-slate-700","hover:bg-red-600/50","text-slate-300","font-semibold","py-1","px-3","rounded-md","transition-colors",3,"click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24",1,"animate-spin","-ml-1","mr-3","h-5","w-5","text-white"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"]],template:function(n,r){if(n&1){let o=Qr();se(0,"div",1)(1,"div")(2,"label",2),De(3,"Token"),ae(),se(4,"input",3),pt("input",function(s){return dt(o),ft(r.onTokenChange(s))}),ae()(),se(5,"div",4)(6,"div",5)(7,"div",6)(8,"label",7),De(9,"Prompts (one per line)"),ae(),se(10,"div",8)(11,"button",9),pt("click",function(){dt(o);let s=Gf(15);return ft(s.click())}),De(12," Upload .txt "),ae(),Et(13,L1,2,0,"button",10),ae(),se(14,"input",11,0),pt("change",function(s){return dt(o),ft(r.handleFileInput(s))}),ae()(),se(16,"textarea",12),pt("input",function(s){return dt(o),ft(r.prompt.set(s.target.value))}),De(17,"      "),ae()(),se(18,"div",13)(19,"div",14)(20,"div",15)(21,"div")(22,"label",16),De(23,"Aspect Ratio"),ae(),se(24,"select",17),pt("change",function(s){return dt(o),ft(r.size.set(s.target.value))}),Wn(25,U1,2,2,"option",18,Zh),ae()(),se(27,"div")(28,"label",2),De(29,"Images (1-4)"),ae(),se(30,"input",19),pt("input",function(s){return dt(o),ft(r.onNumberOfImagesChange(s))}),ae()()(),se(31,"div")(32,"label",20),De(33,"Style Preset"),ae(),se(34,"select",21),pt("change",function(s){return dt(o),ft(r.stylePreset.set(s.target.value))}),Wn(35,B1,2,2,"option",18,Zh),ae()(),se(37,"div")(38,"label",22),De(39,"Model"),ae(),se(40,"select",23),pt("change",function(s){return dt(o),ft(r.model.set(s.target.value))}),Wn(41,V1,2,2,"option",18,Zh),ae()()(),se(43,"button",24),pt("click",function(){return dt(o),ft(r.submitGeneration())}),Et(44,H1,5,0)(45,$1,2,0,"span"),ae()()()()}n&2&&(ye(4),at("value",r.token()),ye(9),_t(r.prompt().length>0?13:-1),ye(3),at("value",r.prompt()),ye(8),at("value",r.size()),ye(),Jn(r.sizeOptions),ye(5),at("value",r.numberOfImages()),ye(4),at("value",r.stylePreset()),ye(),Jn(r.stylePresets),ye(5),at("value",r.model()),ye(),Jn(r.imageModels),ye(2),at("disabled",r.isLoading()||!r.prompt().trim()),ye(),_t(r.isLoading()?44:45))},dependencies:[Mn],encapsulation:2})};var ec=class e{constructor(t){this.http=t}generateImage(t,n){let r={model:t?.model??"nano-banana",prompt:t?.prompt??"",n:t?.n??1,size:t?.size??"1024x1792",response_format:"b64_json",seed:t?.seed},o=new Rn({Authorization:`Bearer ${n}`,"Content-Type":"application/json"});return this.http.post(`${Fs.baseUrl}/images/generations`,r,{headers:o}).pipe(Me(i=>i.data.map(s=>`data:image/png;base64,${s.b64_json}`)))}static \u0275fac=function(n){return new(n||e)(ue(pp))};static \u0275prov=te({token:e,factory:e.\u0275fac,providedIn:"root"})};function G1(e,t){if(e&1&&pr(0,"app-queue-progress",6),e&2){let n=We();Oo("total",n.totalQueueCount())("completed",n.completedQueueCount())("current",n.currentPromptIndex())}}var tc=class e{geminiService=z(Ku);imgGenerateService=z(ec);results=Le([]);isLoading=Le(!1);aspectRatio=Le("1:1");size=Le("1792x1024");totalQueueCount=Le(0);completedQueueCount=Le(0);currentPromptIndex=Le(0);async generateImages(t){if(this.isLoading())return;this.isLoading.set(!0),this.aspectRatio.set(t.aspectRatio);let n=t.prompts.trim().split(`
`).filter(r=>r.trim()!=="");this.totalQueueCount.set(n.length),this.completedQueueCount.set(0),this.currentPromptIndex.set(0),this.results.set(n.map(r=>({prompt:r,status:"loading"})));for(let r=0;r<n.length;r++){this.currentPromptIndex.set(r+1);let o=n[r];try{let i=t.stylePreset?`${o}, ${t.stylePreset}`:o,s=await this.geminiService.generateImage(i,t.aspectRatio,t.numberOfImages,t.model);this.results.update(a=>{let l=[...a];return l[r]={prompt:o,status:"success",images:s},l})}catch(i){let s=i instanceof Error?i.message:"An unknown error occurred";this.results.update(a=>{let l=[...a];return l[r]={prompt:o,status:"error",error:s},l})}finally{this.completedQueueCount.update(i=>i+1)}r<n.length-1&&await new Promise(i=>setTimeout(i,1e3))}this.isLoading.set(!1)}async generateImg(t){if(this.isLoading())return;this.isLoading.set(!0),this.size.set(t.size);let n=t.prompt.trim().split(`
`).filter(r=>r.trim()!=="");this.totalQueueCount.set(n.length),this.completedQueueCount.set(0),this.currentPromptIndex.set(0),this.results.set(n.map(r=>({prompt:r,status:"loading"})));for(let r=0;r<n.length;r++){this.currentPromptIndex.set(r+1);let o=n[r];try{let i=t.stylePreset?`${o}, ${t.stylePreset}`:o,s=ke(X({},t),{prompt:i}),a=await Sc(this.imgGenerateService.generateImage(s,t.token));this.results.update(l=>{let c=[...l];return c[r]={prompt:o,status:"success",images:a},c})}catch(i){let s=i instanceof Error?i.message:"An unknown error occurred";this.results.update(a=>{let l=[...a];return l[r]={prompt:o,status:"error",error:s},l})}finally{this.completedQueueCount.update(i=>i+1)}r<n.length-1&&await new Promise(i=>setTimeout(i,1e3))}this.isLoading.set(!1)}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=cn({type:e,selectors:[["app-root"]],decls:11,vars:4,consts:[[1,"min-h-screen","bg-slate-900","text-slate-100","p-4","sm:p-6","lg:p-8"],[1,"max-w-7xl","mx-auto"],[1,"text-center","mb-8"],[1,"text-4xl","sm:text-5xl","font-extrabold","text-transparent","bg-clip-text","bg-gradient-to-r","from-purple-400","to-indigo-600","mb-4"],[1,"text-slate-400","max-w-2xl","mx-auto"],[3,"generate","isLoading"],[3,"total","completed","current"],[3,"results","aspectRatio"]],template:function(n,r){n&1&&(Kr(0,"main",0)(1,"div",1)(2,"header",2)(3,"h1",3),De(4," Batch Image Generator "),fr(),Kr(5,"p",4),De(6," Enter multiple prompts, one per line, to generate a collection of images at once using the Nano Banana API. "),fr()(),Kr(7,"app-gen-img-form",5),vl("generate",function(i){return r.generateImg(i)}),fr(),Et(8,G1,1,3,"app-queue-progress",6),pr(9,"app-results-grid",7),fr()(),pr(10,"router-outlet")),n&2&&(ye(7),Oo("isLoading",r.isLoading()),ye(),_t(r.isLoading()?8:-1),ye(),Oo("results",r.results())("aspectRatio",r.aspectRatio()))},dependencies:[Mn,Xu,fu,pu,Ss],encapsulation:2,changeDetection:0})};lp(tc,N_).catch(e=>console.error(e));
